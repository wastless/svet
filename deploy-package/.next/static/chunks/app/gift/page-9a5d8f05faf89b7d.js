(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9125],{501:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a,w:()=>i}),r(4391);var n=r(2596),l=r(9688);let i={extend:{classGroups:{"font-size":[{text:["title-h1","md-title-h1","sm-title-h1","title-h2","title-h3","title-h4","sm-title-h4","title-h5","paragraph-xl","paragraph-lg","paragraph-md","paragraph-sm","paragraph-xs","label-xl","label-lg","label-md","label-sm","label-xs","marker-lg","marker-md","marker-sm"]}]}}},a=((0,l.zu)(i),n.A)},887:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.bind(r,4897))},1775:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var n=r(5155),l=r(2115),i=r(9708);let a=(0,r(6694).tv)({slots:{root:["group","relative","flex","items-center","gap-2","font-styrene","md:text-paragraph-md","sm:text-paragraph-sm sm:font-bold","md:font-bold","uppercase","text-adaptive","transition-all","duration-300"],text:[],icon:["transition-transform"],underline:["absolute","bottom-0","h-[2px]","w-0","translate-y-1","transform","bg-adaptive-text","transition-all","duration-700","ease-custom","group-hover:w-1/2"],underlineLeft:["left-0"],underlineRight:["right-0"]},variants:{position:{relative:{},absolute:{root:["absolute","bottom-8","right-8","z-10"]}},iconPosition:{start:{icon:["group-hover:-translate-x-1"]},end:{icon:["group-hover:translate-x-1"]}}},defaultVariants:{position:"relative",iconPosition:"end"}}),o=l.forwardRef((e,t)=>{let{children:r,icon:l,asChild:o,className:s,position:c,iconPosition:u,...d}=e,h=o?i.DX:"button",m=a({position:c,iconPosition:u}),f=l&&(0,n.jsx)("span",{className:m.icon(),children:l});return(0,n.jsxs)(h,{ref:t,className:m.root({className:s}),...d,children:["start"===u&&f,(0,n.jsx)("span",{className:m.text(),children:r}),"end"===u&&f,(0,n.jsx)("span",{className:"".concat(m.underline()," ").concat(m.underlineLeft())}),(0,n.jsx)("span",{className:"".concat(m.underline()," ").concat(m.underlineRight())})]})});o.displayName="IconButtonRoot"},4346:(e,t,r)=>{"use strict";r.d(t,{DG:()=>i,H6:()=>l,l$:()=>n});let n={START_DATE:"2025-07-01",CYCLE_LENGTH:365},l={TARGET_DATE:"2025-08-01",UPDATE_INTERVAL:1e3},i=["Hi","Hey","Hola","Bonjour","Hallo","Ciao","Ol\xe1","Czesc","Privet","Merhaba","Salam","Shalom","Ni hao","Namaste","Sawadee","Halo","Jambo","Yia sou","Hall\xf3","Hej","Hej","Ahoj","Hell\xf3"]},4629:(e,t,r)=>{"use strict";r.d(t,{E$:()=>a,HQ:()=>f,IJ:()=>o,fl:()=>l,kt:()=>s,lQ:()=>u,ne:()=>m,nn:()=>d,th:()=>h,ud:()=>i,v:()=>c});var n=r(5155);function l(e){let{className:t="",size:r=16}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,className:t,children:[(0,n.jsx)("g",{clipPath:"url(#arrow-right_a)",children:(0,n.jsx)("path",{fill:"currentColor",d:"M8.757 13.6565L14.414 7.99951L8.757 2.34351L7.343 3.75751L10.586 6.99951H2V8.99951H10.586L7.343 12.2425L8.757 13.6565Z"})}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"arrow-right_a",children:(0,n.jsx)("path",{d:"M0 0h16v16H0z"})})})]})}function i(e){let{className:t="",size:r=20}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:r,height:r,className:t,fill:"currentColor",children:(0,n.jsx)("path",{d:"M8 5.5V12h11v-.75C14 9.5 9.5 5.5 9.5 5.5zm0 13V12h11v.75c-5 1.75-9.5 5.75-9.5 5.75z",clipRule:"evenodd",fillRule:"evenodd"})})}function a(e){let{className:t="",size:r=20}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:r,height:r,className:t,fill:"currentColor",children:(0,n.jsx)("path",{d:"M11 5.5H7v13h4zm6 0h-4v13h4z",clipRule:"evenodd",fillRule:"evenodd"})})}function o(e){let{className:t="",size:r=20}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:r,height:r,className:t,fill:"currentColor",children:(0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})}function s(e){let{className:t="",size:r=20}=e;return(0,n.jsx)("div",{style:{width:r,height:r},className:"border-current animate-spin rounded-full border-b-2 ".concat(t)})}function c(e){let{className:t="",size:r=20}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:r,height:r,className:t,fill:"currentColor",children:(0,n.jsx)("path",{d:"M12.5 3H12l-.299.398V3.4l-.003.003-.018.024-.088.108a10 10 0 0 1-.375.422c-.339.36-.848.855-1.52 1.381C8.348 6.392 6.37 7.553 3.82 8.017L3 8.164v7.67l.821.149c2.55.463 4.528 1.624 5.875 2.679q.812.633 1.52 1.381.241.257.464.53l.018.024.002.002.001.001.299.4h4.5V3zm.174 2.326A13 13 0 0 0 12.97 5h1.53v14h-1.53q-.145-.166-.296-.326a16 16 0 0 0-1.745-1.587C9.546 16.006 7.554 14.805 5 14.19V9.81c2.554-.615 4.546-1.815 5.929-2.898a15.6 15.6 0 0 0 1.745-1.586M19.5 6v12h2V6z",clipRule:"evenodd"})})}function u(e){let{className:t="",size:r=20}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:r,height:r,className:t,fill:"currentColor",children:[(0,n.jsx)("path",{d:"m16.5 17.44 3.355 2.826 1.289-1.53-4.644-3.91v-.012l-2-1.674L2.145 2.736.856 4.266l4.133 3.48a12 12 0 0 1-1.168.27L3 8.166v7.669l.821.149c2.55.463 4.528 1.624 5.875 2.679q.812.633 1.52 1.381.241.257.464.53l.018.024.002.002.001.001L12 21h4.5zm-2-1.684V19h-1.53q-.145-.166-.296-.326a16 16 0 0 0-1.745-1.587C9.546 16.006 7.554 14.805 5 14.19V9.81c.63-.151 1.225-.339 1.785-.551zM16.5 4v6.902l-2-1.675V5h-1.53a14 14 0 0 1-.296.326c-.322.342-.768.78-1.335 1.255L9.777 5.273q.766-.607 1.44-1.317.24-.257.463-.53l.018-.024.002-.003h.001L12 3h4.5z",clipRule:"evenodd",fillRule:"evenodd"}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{children:(0,n.jsx)("path",{d:"M0 0h24v24H0z"})})})]})}function d(e){let{className:t="",size:r=48}=e;return(0,n.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:r,height:r,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}function h(e){let{className:t="",size:r=20}=e;return(0,n.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:r,height:r,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}function m(e){let{className:t="",size:r=20}=e;return(0,n.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:r,height:r,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}function f(e){let{className:t=""}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"72",height:"34",fill:"none",viewBox:"0 0 64 30",className:t,children:[(0,n.jsx)("g",{clipPath:"url(#a)",children:(0,n.jsx)("path",{fill:"#F90000",d:"M60.8 8.66c.455.455.82.82 1.184 1.229 2.368 2.594 2.641 5.87.865 8.874-.865 1.456-2.05 2.593-3.37 3.594-3.052 2.276-6.468 3.777-10.111 4.733-11.568 3.049-23.228 3.185-34.933.865-3.097-.592-6.103-1.548-8.927-3.095-1.548-.864-2.96-1.866-4.007-3.322C-.276 19.172-.458 16.67.863 14.03c.865-1.775 2.232-3.14 3.78-4.369 2.733-2.184 5.739-3.822 8.972-5.096C25.32-.213 37.39-1.124 49.732 1.288c3.37.637 6.559 1.775 9.474 3.686.592.41 1.184.82 1.73 1.32 1.093.956 1.048 1.274-.136 2.366M49.823 3.7v-.182c-.728-.136-1.412-.318-2.14-.455-9.701-1.638-19.266-1.138-28.693 1.73-4.1 1.228-8.062 2.912-11.569 5.414-1.32.956-2.641 2.003-3.689 3.231-2.414 2.867-2.14 5.78.82 8.1 1.275 1.002 2.778 1.775 4.281 2.458 3.234 1.41 6.65 2.093 10.111 2.594 8.29 1.137 16.578 1.046 24.822-.365 4.418-.773 8.699-2.047 12.616-4.368 1.594-.956 3.097-2.048 4.19-3.55 1.867-2.502 1.685-5.142-.547-7.326-.683-.683-1.457-1.274-2.277-1.82-3.826-2.503-8.061-3.55-12.57-3.459-.957 0-1.959.091-2.915.137-.592 0-1.093-.228-1.139-.865-.045-.546.365-.91.911-.955.957-.137 1.913-.364 2.87-.41 1.64-.045 3.279.046 4.918.091"})}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"a",children:(0,n.jsx)("path",{fill:"#fff",d:"M0 0h64v29.553H0z"})})})]})}r(2115)},4897:(e,t,r)=>{"use strict";r.d(t,{RoadmapGrid:()=>x});var n=r(5155),l=r(2115),i=r(9535),a=r(6766);function o(e){let{imageUrl:t,imageCover:r=!1,randomOffset:i=0,alt:o="Image"}=e,s=(0,l.useRef)(null),c=(0,l.useRef)(null),u=(0,l.useRef)(null),d=(0,l.useRef)(null),h=(0,l.useRef)(null),m=(0,l.useRef)(null),f=(0,l.useRef)(0),v=(0,l.useRef)(0),g=(0,l.useRef)(null),x=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{let e=s.current,r=c.current;if(!e||!r)return;let n=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!n)return;d.current=n;let l=function(e,t,r){let n=e.createShader(e.VERTEX_SHADER);if(!n)return null;e.shaderSource(n,t),e.compileShader(n);let l=e.createShader(e.FRAGMENT_SHADER);if(!l)return null;e.shaderSource(l,r),e.compileShader(l);let i=e.createProgram();return i?(e.attachShader(i,n),e.attachShader(i,l),e.linkProgram(i),i):null}(n,"\n  attribute vec2 position;\n  attribute vec2 uv;\n  varying vec2 vUv;\n  void main() {\n    gl_Position = vec4(position, 0.0, 1.0);\n    vUv = uv;\n  }\n","\n  precision mediump float;\n  varying vec2 vUv;\n  uniform sampler2D uTexture;\n  uniform float uHover;\n  uniform vec2 uImageRatio;\n  \n  void main() {\n    vec2 uv = vUv;\n    \n    // Применяем эффект hover без искажения пропорций\n    float HOVER_SCALE = 0.08;\n    uv -= 0.5;\n    float dist = length(uv);\n    float scaleFactor = 1.0 - uHover * HOVER_SCALE * smoothstep(0.0, 1.0, dist * 1.4);\n    uv *= scaleFactor;\n    uv += 0.5;\n    \n    // Исправляем перевернутую ось Y\n    uv.y = 1.0 - uv.y;\n    \n    // Повышаем яркость при наведении\n    vec4 color = texture2D(uTexture, uv);\n    color.rgb = mix(color.rgb, color.rgb * 1.2, uHover);\n    \n    gl_FragColor = color;\n  }\n");if(!l)return;h.current=l;let i=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),n.STATIC_DRAW);let a=n.getAttribLocation(l,"position");n.enableVertexAttribArray(a),n.vertexAttribPointer(a,2,n.FLOAT,!1,0,0);let o=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),n.STATIC_DRAW);let p=n.getAttribLocation(l,"uv");n.enableVertexAttribArray(p),n.vertexAttribPointer(p,2,n.FLOAT,!1,0,0);let w=n.createTexture();m.current=w,n.bindTexture(n.TEXTURE_2D,w),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,new Uint8Array([0,0,0,255]));let T=new window.Image;T.onload=()=>{if(!n||!w||!e||!r)return;n.bindTexture(n.TEXTURE_2D,w),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,T),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),g.current={width:T.width,height:T.height};let t=()=>{let t=r.getBoundingClientRect(),l=window.devicePixelRatio||1,i=T.height/T.width,a=t.width;e.width=a*l,e.height=a*i*l,e.style.width="".concat(a,"px"),e.style.height="".concat(a*i,"px"),n.viewport(0,0,e.width,e.height)};t(),n.useProgram(l);let i=n.getUniformLocation(l,"uImageRatio");n.uniform2f(i,T.width,T.height),x.current=!0,E(),window.addEventListener("resize",()=>{e&&r&&n&&x.current&&(t(),E())})},T.crossOrigin="anonymous",T.src=t;let E=()=>{if(!d.current||!h.current||!s.current||!x.current)return;let e=d.current;f.current+=(v.current-f.current)*.05,e.viewport(0,0,s.current.width,s.current.height),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(h.current);let t=e.getUniformLocation(h.current,"uHover");if(e.uniform1f(t,f.current),e.activeTexture(e.TEXTURE0),m.current){e.bindTexture(e.TEXTURE_2D,m.current);let t=e.getUniformLocation(h.current,"uTexture");if(e.uniform1i(t,0),g.current){let t=e.getUniformLocation(h.current,"uImageRatio");e.uniform2f(t,g.current.width,g.current.height)}}e.drawArrays(e.TRIANGLE_STRIP,0,4),Math.abs(f.current-v.current)>.001&&(u.current=requestAnimationFrame(E))},b=()=>{if(e&&r&&n&&x.current){let t=r.getBoundingClientRect(),l=window.devicePixelRatio||1;e.width=t.width*l,e.height=t.height*l,e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),n.viewport(0,0,e.width,e.height),E()}};return window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b),u.current&&cancelAnimationFrame(u.current)}},[t,r]),(0,n.jsxs)("div",{ref:c,className:"w-full relative",style:{position:"relative",overflow:"visible",height:"auto"},onMouseEnter:()=>{v.current=1,d.current&&h.current&&x.current&&(u.current=requestAnimationFrame(function e(){if(!d.current||!h.current||!x.current)return;f.current+=(v.current-f.current)*.05;let t=d.current;t.useProgram(h.current);let r=t.getUniformLocation(h.current,"uHover");t.uniform1f(r,f.current),t.drawArrays(t.TRIANGLE_STRIP,0,4),Math.abs(f.current-v.current)>.001&&(u.current=requestAnimationFrame(e))}))},onMouseLeave:()=>{v.current=0,d.current&&h.current&&x.current&&(u.current=requestAnimationFrame(function e(){if(!d.current||!h.current||!x.current)return;f.current+=(v.current-f.current)*.05;let t=d.current;t.useProgram(h.current);let r=t.getUniformLocation(h.current,"uHover");t.uniform1f(r,f.current),t.drawArrays(t.TRIANGLE_STRIP,0,4),Math.abs(f.current-v.current)>.001&&(u.current=requestAnimationFrame(e))}))},children:[(0,n.jsx)("canvas",{ref:s,className:"w-full",style:{display:"block",position:"relative",objectFit:"contain"}}),(0,n.jsx)("div",{className:"hidden",children:(0,n.jsx)(a.default,{src:t,alt:o,width:1e3,height:1e3,unoptimized:!0})})]})}var s=r(5695),c=r(6555),u=r(4629);let d=(0,l.memo)(function(e){let{id:t,number:r,coverImage:i,isOpen:a,title:s,isTargetDay:c,onClick:d}=e,[h,m]=(0,l.useState)(!1);return(0,n.jsx)("div",{className:"block h-full ".concat(a?"cursor-pointer":""," relative"),onClick:d,children:a?(0,n.jsx)(()=>(0,n.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,n.jsx)("div",{className:"w-full overflow-visible",children:(0,n.jsx)(o,{imageUrl:i,alt:s||"Roadmap item ".concat(r)})}),(0,n.jsx)("div",{className:"mt-2 flex justify-between items-center relative",children:(0,n.jsxs)("div",{className:"relative",children:[c&&(0,n.jsx)("div",{className:"absolute z-40",style:{transform:"translate(-8px, -4px)"},children:(0,n.jsx)(u.HQ,{className:"absolute z-30 left-0"})}),(0,n.jsx)("span",{className:"font-styrene text-paragraph-md font-medium text-adaptive relative z-20",children:c?"DAY X":r<10?"0".concat(r):r})]})})]}),{}):(0,n.jsx)(()=>(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"mt-1 flex justify-between items-center",children:(0,n.jsxs)("div",{className:"relative",children:[c&&(0,n.jsx)("div",{className:"absolute z-40",style:{transform:"translate(-8px, -4px)"},children:(0,n.jsx)(u.HQ,{className:"absolute z-30 left-0"})}),(0,n.jsx)("span",{className:"font-styrene text-paragraph-md font-medium text-adaptive relative z-20",children:c?"DAY X":r<10?"0".concat(r):r})]})}),(0,n.jsx)("div",{className:"relative w-full pb-[100%] overflow-hidden",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:(0,n.jsx)("div",{className:"absolute inset-0"})})]}),{})})}),h=(0,l.memo)(function(e){let{id:t,number:r,hintImageUrl:a,imageCover:o,openDate:u,title:h,isTargetDay:m=!1}=e,f=(0,s.useRouter)(),{giftsDate:v}=(0,c.Zj)(),g=(0,l.useMemo)(()=>(0,i.B)(u,v),[u,v]);return(0,n.jsx)(d,{id:t,number:r,coverImage:o||a,isOpen:g,title:h,isTargetDay:m,onClick:e=>{g&&(e.stopPropagation(),f.push("/gift/".concat(t)))}})});var m=r(1775),f=r(4346),v=r(5005);let g=(0,l.memo)(function(e){let{children:t,className:r="",options:i={dragFree:!0,containScroll:"trimSnaps",align:"start",loop:!1},onScroll:a,emblaApiRef:o}=e,[s,c]=(0,v.A)(i),[u,d]=(0,l.useState)(0),h=(0,l.useRef)(null),m=(0,l.useCallback)(()=>{if(!c)return;let e=c.scrollProgress();d(e),a&&a(e)},[c,a]);return(0,l.useEffect)(()=>{if(c&&o)return o.current=c,a&&a(c.scrollProgress()),c.on("scroll",m),c.on("reInit",m),()=>{c.off("scroll",m),c.off("reInit",m)}},[c,o,a,m]),(0,l.useEffect)(()=>{if(!c)return;let e=e=>{switch(e.key){case"ArrowLeft":e.preventDefault(),c.scrollPrev();break;case"ArrowRight":e.preventDefault(),c.scrollNext();break;case"Home":e.preventDefault(),c.scrollTo(0);break;case"End":var t;e.preventDefault(),c.scrollTo((null==(t=c.scrollSnapList())?void 0:t.length)-1||0)}},t=c.rootNode();return t&&(t.addEventListener("keydown",e),t.setAttribute("tabindex","0")),()=>{t&&t.removeEventListener("keydown",e)}},[c]),(0,n.jsx)("div",{ref:e=>{h.current=e,"function"==typeof s&&e&&s(e)},className:"overflow-hidden ".concat(r," cursor-grab active:cursor-grabbing"),"data-testid":"embla-carousel",role:"region","aria-roledescription":"carousel",children:(0,n.jsx)("div",{className:"flex flex-row",children:t})})});function x(e){let{gifts:t}=e,{giftsDate:r}=(0,c.Zj)(),a=(0,l.useRef)(null),o=(0,l.useRef)(null),s=(0,l.useRef)(null),u=(0,l.useRef)(null),d=(0,l.useRef)(!1),v=(0,l.useMemo)(()=>r?new Date(r.getFullYear(),r.getMonth(),r.getDate()):null,[r]),x=(0,l.useMemo)(()=>[...t].sort((e,t)=>new Date(e.openDate).getTime()-new Date(t.openDate).getTime()),[t]),p=(0,l.useMemo)(()=>{let e=[...x].reverse().find(e=>{let t=new Date(e.openDate);return v?t<=v:t<=new Date});return e||x[0]},[x,v]),w=(0,l.useMemo)(()=>x.find(e=>{let t=new Date(e.openDate);return v?t>v:t>new Date})||x[0],[x,v]),T=(0,l.useMemo)(()=>x.reduce((e,t)=>{let r=(0,i.Z)(t.openDate,f.l$.START_DATE);return null===r||e[r]||(e[r]=t),e},{}),[x]),E=(0,l.useMemo)(()=>x.reduce((e,t)=>{let r=new Date(t.openDate),n=new Date(f.H6.TARGET_DATE);return e?Math.abs(r.getTime()-n.getTime())<Math.abs(new Date(e.openDate).getTime()-n.getTime())?t:e:t},null),[x]),b=(0,l.useCallback)(e=>{var t;let r=null==(t=s.current)?void 0:t.children;r&&requestAnimationFrame(()=>{for(let t=0;t<r.length;t++){let n,l=r[t];(0===t?null:t===r.length-1?"target":t)===e?l.style.opacity="1":l.style.opacity="0.5"}})},[]),R=(0,l.useCallback)(()=>{if(!o.current)return null;let e=o.current.selectedScrollSnap();if(void 0===e||e<0)return null;let t=x[e];return t?E&&t.id===E.id?"target":(0,i.Z)(t.openDate,f.l$.START_DATE):null},[x,E]),j=(0,l.useCallback)(e=>{if(!o.current)return;let t=o.current.selectedScrollSnap()||0;if(t===e)return;let r=e>t?1:-1,n=Math.abs(e-t),l=performance.now(),i=500+30*n,a=e=>{if(!o.current)return;let s=Math.min((e-l)/i,1),c=Math.round(t+r*n*(s=1-Math.pow(1-s,3)));o.current.scrollTo(c,!1),s<1&&requestAnimationFrame(a)};requestAnimationFrame(a)},[]),A=(0,l.useCallback)(e=>{if(!o.current)return;a.current=e,b(e),d.current=!0;let t=0;if(null===e)t=0;else if("target"===e&&E){let e=x.findIndex(e=>e.id===E.id);-1!==e&&(t=e)}else{let r=T[e];if(r){let e=x.findIndex(e=>e.id===r.id);-1!==e&&(t=e)}}j(t),setTimeout(()=>{d.current=!1},800)},[b,T,x,E,j]);return(0,l.useCallback)(e=>{if(!o.current)return;d.current=!0;let t=x.findIndex(t=>t.id===e.id);-1!==t&&(o.current.scrollTo(t,!1),requestAnimationFrame(()=>{let t=document.getElementById("gift-".concat(e.id));t&&(document.querySelectorAll(".embla-current-gift").forEach(e=>{e.classList.remove("embla-current-gift")}),t.classList.add("embla-current-gift"));let r=(0,i.Z)(e.openDate,f.l$.START_DATE);e.id===(null==E?void 0:E.id)?(a.current="target",b("target")):null!==r&&(a.current=r,b(r)),d.current=!1}))},[x,b,E]),(0,l.useEffect)(()=>{let e=!1,t=()=>{if(!o.current||!p||e)return;e=!0;let t=x.findIndex(e=>e.id===p.id);-1!==t&&(d.current=!0,o.current.scrollTo(t,!1),requestAnimationFrame(()=>{let e=document.getElementById("gift-".concat(p.id));e&&e.classList.add("embla-current-gift");let t=(0,i.Z)(p.openDate,f.l$.START_DATE);p.id===(null==E?void 0:E.id)?(a.current="target",b("target")):null!==t&&(a.current=t,b(t)),d.current=!1}))};o.current&&t();let r=setTimeout(t,300);function n(e){if(!o.current)return;let t=o.current.scrollProgress(),r=e.deltaY>0,n=window.scrollY<=10;if(window.innerHeight,window.scrollY,document.body.offsetHeight,r){t>=.8||(e.preventDefault(),o.current.scrollNext());return}n&&(t<=.01||(e.preventDefault(),o.current.scrollPrev()))}return document.addEventListener("wheel",n,{passive:!1,capture:!0}),()=>{document.removeEventListener("wheel",n,{capture:!0}),clearTimeout(r)}},[o.current,p,x,E,b]),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{ref:s,className:"flex flex-wrap justify-center gap-2 sm:gap-3 md:gap-6 mb-6 md:mb-8 px-2",children:[(0,n.jsx)(m.b,{onClick:()=>A(null),className:"opacity-50",children:"ALL"}),(0,n.jsx)(m.b,{onClick:()=>A(1),className:"opacity-50",children:"1 WEEK"}),(0,n.jsx)(m.b,{onClick:()=>A(2),className:"opacity-50",children:"2 WEEK"}),(0,n.jsx)(m.b,{onClick:()=>A(3),className:"opacity-50",children:"3 WEEK"}),(0,n.jsx)(m.b,{onClick:()=>A(4),className:"opacity-50",children:"4 WEEK"}),(0,n.jsx)(m.b,{onClick:()=>A("target"),className:"opacity-50",children:"DAY X"})]}),(0,n.jsx)("div",{className:"w-full overflow-hidden overflow-y-visible relative",children:(0,n.jsxs)(g,{options:{dragFree:!1,containScroll:!1,align:"start",loop:!1,inViewThreshold:.5,skipSnaps:!1,breakpoints:{"(max-width: 768px)":{dragFree:!1,align:"center"}}},emblaApiRef:o,onScroll:e=>{d.current||(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{let e=R();e!==a.current&&(a.current=e,b(e))},50))},className:"pb-4 px-2 sm:px-4 md:px-8 h-full",children:[x.map(e=>{let t=(0,i.Z)(e.openDate,f.l$.START_DATE),r=e.id===(null==E?void 0:E.id),l=e.id===(null==w?void 0:w.id),a=e.id===(null==p?void 0:p.id);return(0,n.jsx)("div",{id:"gift-".concat(e.id),className:"min-w-[320px] flex-shrink-0 overflow-visible ".concat(r?"ml-1":""," ").concat(r||l||a?"relative":""," mx-1"),"data-week":t,"data-target":r?"true":void 0,"data-next":l?"true":void 0,"data-current":a?"true":void 0,children:(0,n.jsx)(h,{id:e.id,number:e.number,hintImageUrl:e.hintImageUrl,imageCover:e.imageCover||"",openDate:e.openDate,title:e.title||void 0,isTargetDay:r})},e.id)}),(0,n.jsx)("div",{className:"flex-shrink-0"})]})})]})}},6555:(e,t,r)=>{"use strict";r.d(t,{DateProvider:()=>s,L$:()=>c,S_:()=>d,Zj:()=>u});var n=r(5155),l=r(2115);let i=(0,l.createContext)(void 0),a=(0,l.createContext)(void 0),o=(0,l.memo)(function(e){let{children:t,giftsDate:r}=e;return(0,n.jsx)(a.Provider,{value:{giftsDate:r},children:t})});function s(e){let{children:t}=e,[r,a]=(0,l.useState)(!1),[s,c]=(0,l.useState)(null),[u,d]=(0,l.useState)(null),h=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=new Date;c(e),d(e),h.current=m(e)},[]);let m=e=>"".concat(e.getFullYear(),"-").concat(e.getMonth(),"-").concat(e.getDate());return(0,l.useEffect)(()=>{r&&s&&d(s)},[r,s]),(0,l.useEffect)(()=>{if(r)return;let e=setInterval(()=>{let e=new Date;c(e);let t=m(e);h.current!==t&&(console.log("День изменился, обновляем дату для подарков"),d(e),h.current=t)},1e3);return()=>{clearInterval(e)}},[r]),(0,n.jsx)(i.Provider,{value:{currentDate:s,setCurrentDate:c,isTestMode:r,setIsTestMode:a},children:(0,n.jsx)(o,{giftsDate:u,children:t})})}function c(){let e=(0,l.useContext)(i);if(void 0===e)throw Error("useTimer must be used within a DateProvider");return e}function u(){let e=(0,l.useContext)(a);if(void 0===e)throw Error("useGifts must be used within a DateProvider");return e}function d(){let e=(0,l.useContext)(i),t=(0,l.useContext)(a);if(void 0===e||void 0===t)throw Error("useDate must be used within a DateProvider");return{...e,...t}}},6694:(e,t,r)=>{"use strict";r.d(t,{tv:()=>i});var n=r(6733),l=r(501);let i=(0,n.N1)({twMergeConfig:l.w})},9535:(e,t,r)=>{"use strict";function n(e,t){return!!t&&new Date(new Date(e).getFullYear(),new Date(e).getMonth(),new Date(e).getDate())<=new Date(t.getFullYear(),t.getMonth(),t.getDate())}function l(e,t){let r=new Date(e),n=new Date(t);return r<n?null:Math.floor(Math.floor((r.getTime()-n.getTime())/864e5)/7)+1}r.d(t,{B:()=>n,Z:()=>l})}},e=>{var t=t=>e(e.s=t);e.O(0,[6530,6874,6766,9687,8441,1684,7358],()=>t(887)),_N_E=e.O()}]);