(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6235],{285:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});var s=r(5155),a=r(2115),l=r(9708);let i=(0,r(6694).tv)({slots:{root:["btn-adaptive"]}}),n=a.forwardRef((e,t)=>{let{children:r,asChild:n,className:o,...c}=e;a.useId();let m=n?l.DX:"button",d=i();return(0,s.jsx)(m,{ref:t,className:d.root({className:o}),...c,children:r})});n.displayName="ButtonRoot"},501:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i,w:()=>l}),r(4391);var s=r(2596),a=r(9688);let l={extend:{classGroups:{"font-size":[{text:["title-h1","md-title-h1","sm-title-h1","title-h2","title-h3","title-h4","sm-title-h4","title-h5","paragraph-xl","paragraph-lg","paragraph-md","paragraph-sm","paragraph-xs","label-xl","label-lg","label-md","label-sm","label-xs","marker-lg","marker-md","marker-sm"]}]}}},i=((0,a.zu)(l),s.A)},6129:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(5155),a=r(2115),l=r(3794),i=r(6555),n=r(6874),o=r.n(n),c=r(285),m=r(2352);function d(){let{currentDate:e}=(0,i.S_)(),[t,r]=(0,a.useState)([]),[n,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{!async function(){try{d(!0);let e=await fetch("/api/gifts");if(!e.ok)throw Error("Не удалось загрузить данные о подарках");let t=(await e.json()).filter(e=>e.memoryPhoto).map(e=>(e.openDate&&"string"==typeof e.openDate&&(e.openDate=new Date(e.openDate)),{...e.memoryPhoto,gift:e})).sort((e,t)=>e.gift&&t.gift?e.gift.number-t.gift.number:0);r(t)}catch(e){console.error("Ошибка при загрузке подарков:",e)}finally{d(!1)}}()},[]);let u=t=>!!e&&!!t&&e>=("string"==typeof t?new Date(t):t),f=e=>e?"string"==typeof e?new Date(e):e:new Date;return(0,s.jsxs)("div",{className:"relative bg-white",children:[n&&(0,s.jsx)("div",{className:"fixed bottom-6 right-6 z-50",children:(0,s.jsx)(m.y,{className:"text-black w-8 h-8"})}),!n&&(0,s.jsxs)("main",{className:"min-h-screen",children:[(0,s.jsx)("div",{className:"flex justify-center pt-24 md:pt-20 lg:pt-24 mb-8 md:mb-16",children:(0,s.jsx)("h4",{className:"text-center font-founders text-title-h4 uppercase text-black",children:"remember?"})}),(0,s.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-12 sm:pb-16 md:pb-20 pt-4 sm:pt-6",children:t.length>0?(0,s.jsx)("div",{className:"flex flex-col items-center sm:grid sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-y-12 sm:gap-6 md:gap-8",children:t.map(e=>{var t,r,a;let i=u(null==(t=e.gift)?void 0:t.openDate);return(0,s.jsx)("div",{className:"mb-8 sm:mb-0",children:i?(0,s.jsx)(o(),{href:"/gift/".concat(e.giftId),className:"cursor-pointer block",children:(0,s.jsx)(l.v,{memoryPhoto:e,isRevealed:i,openDate:f(null==(r=e.gift)?void 0:r.openDate),size:"small"})}):(0,s.jsx)("div",{className:"cursor-default block",children:(0,s.jsx)(l.v,{memoryPhoto:e,isRevealed:i,openDate:f(null==(a=e.gift)?void 0:a.openDate),size:"small"})})},e.id)})}):(0,s.jsx)(s.Fragment,{})}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-6 sm:gap-8 md:gap-10 pt-12 sm:pt-16 md:pt-20 pb-16 sm:pb-20 md:pb-28 text-center px-4",children:[(0,s.jsx)("span",{className:"font-nyghtserif text-label-xl",children:"***"}),(0,s.jsxs)("h2",{className:"font-founders text-title-h4 md:text-title-h3 uppercase",children:["Happiness ",(0,s.jsx)("br",{}),"is nearby"]}),(0,s.jsx)(o(),{href:"/",className:"mt-2 sm:mt-4",children:(0,s.jsx)(c.b,{children:"go home"})})]})]})]})}},6555:(e,t,r)=>{"use strict";r.d(t,{DateProvider:()=>o,L$:()=>c,S_:()=>d,Zj:()=>m});var s=r(5155),a=r(2115);let l=(0,a.createContext)(void 0),i=(0,a.createContext)(void 0),n=(0,a.memo)(function(e){let{children:t,giftsDate:r}=e;return(0,s.jsx)(i.Provider,{value:{giftsDate:r},children:t})});function o(e){let{children:t}=e,[r,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),[m,d]=(0,a.useState)(null),u=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=new Date;c(e),d(e),u.current=f(e)},[]);let f=e=>"".concat(e.getFullYear(),"-").concat(e.getMonth(),"-").concat(e.getDate());return(0,a.useEffect)(()=>{r&&o&&d(o)},[r,o]),(0,a.useEffect)(()=>{if(r)return;let e=setInterval(()=>{let e=new Date;c(e);let t=f(e);u.current!==t&&(console.log("День изменился, обновляем дату для подарков"),d(e),u.current=t)},1e3);return()=>{clearInterval(e)}},[r]),(0,s.jsx)(l.Provider,{value:{currentDate:o,setCurrentDate:c,isTestMode:r,setIsTestMode:i},children:(0,s.jsx)(n,{giftsDate:m,children:t})})}function c(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useTimer must be used within a DateProvider");return e}function m(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useGifts must be used within a DateProvider");return e}function d(){let e=(0,a.useContext)(l),t=(0,a.useContext)(i);if(void 0===e||void 0===t)throw Error("useDate must be used within a DateProvider");return{...e,...t}}},6694:(e,t,r)=>{"use strict";r.d(t,{tv:()=>l});var s=r(6733),a=r(501);let l=(0,s.N1)({twMergeConfig:a.w})},9023:(e,t,r)=>{Promise.resolve().then(r.bind(r,6129))}},e=>{var t=t=>e(e.s=t);e.O(0,[6530,6874,4041,8441,1684,7358],()=>t(9023)),_N_E=e.O()}]);