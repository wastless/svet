(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{280:(e,t,n)=>{"use strict";n.d(t,{A8:()=>l,ug:()=>c,y:()=>d});var r=n(5155),o=n(2115),a=n(6609);n(5695);class s{static getInstance(){return s.instance||(s.instance=new s),s.instance}shouldShowIntro(){return!!this.isDebug||!this.isIntroCompleted()}isIntroCompleted(){return document.cookie.split(";").some(e=>e.trim().startsWith("".concat(this.introCompletedKey,"=true")))}completeIntro(){document.cookie="".concat(this.introCompletedKey,"=true; path=/; max-age=").concat(31536e3),this.dispatchIntroStateChange(!0)}resetIntro(){document.cookie="".concat(this.introCompletedKey,"=; path=/; max-age=0"),this.dispatchIntroStateChange(!1)}setDebugMode(e){this.isDebug=e}dispatchIntroStateChange(e){this.onStateChangeCallbacks.forEach(t=>t(e));try{let t=new CustomEvent("introStateChange",{detail:{completed:e}});window.dispatchEvent(t)}catch(e){console.error("Error dispatching intro state change event:",e)}}onStateChange(e){return this.onStateChangeCallbacks.push(e),()=>{this.onStateChangeCallbacks=this.onStateChangeCallbacks.filter(t=>t!==e)}}constructor(){this.introCompletedKey="intro_completed",this.isDebug=!1,this.onStateChangeCallbacks=[]}}let i=(0,o.createContext)(null);function l(){let e=(0,o.useContext)(i);if(!e)throw Error("useIntro must be used within an IntroProvider");let[t,n]=(0,o.useState)(!0),{setNavVisibility:r}=(0,a.r)();return e.shouldShowIntro&&setTimeout(()=>{r(!1)},0),(0,o.useEffect)(()=>{r(!e.shouldShowIntro),n(!1);let t=e=>{let{completed:t}=e.detail;t?setTimeout(()=>{r(!0)},300):r(!1)};return window.addEventListener("introStateChange",t),()=>{window.removeEventListener("introStateChange",t)}},[e.shouldShowIntro,r]),{shouldShowIntro:e.shouldShowIntro,isLoading:t,completeIntro:e.completeIntro,resetIntro:e.resetIntro}}function c(e){let{children:t}=e,[n,a]=(0,o.useState)(!1),l=s.getInstance();return(0,o.useEffect)(()=>(a(l.shouldShowIntro()),l.onStateChange(e=>{a(!e)})),[]),(0,r.jsx)(i.Provider,{value:{shouldShowIntro:n,completeIntro:()=>l.completeIntro(),resetIntro:()=>l.resetIntro()},children:t})}let d=s.getInstance()},3110:(e,t,n)=>{"use strict";n.d(t,{DateTestControl:()=>i});var r=n(5155),o=n(2115),a=n(6555),s=n(285);function i(){let{currentDate:e,setCurrentDate:t,isTestMode:n,setIsTestMode:i}=(0,a.S_)(),[l,c]=(0,o.useState)(""),d=e=>{if(!e)return"";let t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)};return n?(0,r.jsx)("div",{className:"fixed bottom-4 right-4 z-50 bg-white p-4 rounded-lg shadow-lg",children:(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"font-styrene text-paragraph-sm",children:"Test Mode"}),(0,r.jsx)("button",{onClick:()=>{n?t(new Date):e&&c(d(e)),i(!n)},className:"w-12 h-6 rounded-full p-1 transition-colors bg-green-500",children:(0,r.jsx)("div",{className:"w-4 h-4 rounded-full bg-white transform transition-transform translate-x-6"})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("span",{className:"font-styrene text-paragraph-sm",children:["Current: ",null==e?void 0:e.toLocaleDateString()]}),(0,r.jsx)("input",{type:"date",value:l,onChange:e=>{c(e.target.value)},className:"border p-2 rounded text-sm dark:bg-bg-strong-800 dark:border-bg-strong-700"}),(0,r.jsx)(s.b,{onClick:()=>{l&&t(new Date(l))},className:"text-sm py-1",children:"Apply Date"})]})]})}):null}},3855:(e,t,n)=>{"use strict";var r=n(2385);console.log("\uD83D\uDE80 Initializing unified fetch patch early..."),(0,r.HT)()},4274:(e,t,n)=>{"use strict";n.d(t,{Providers:()=>u});var r=n(5155);n(3855);var o=n(6609),a=n(2115),s=n(280);function i(e){let{children:t}=e;return(0,r.jsx)(s.ug,{children:t})}var l=n(5695);function c(e){let{children:t,excludePaths:n=[],homePath:o="/"}=e,{shouldShowIntro:i}=(0,s.A8)(),c=(0,l.useRouter)(),d=(0,l.usePathname)(),u=(0,a.useRef)(!1),h=d===o,p=n.some(e=>d.startsWith(e));return(0,a.useEffect)(()=>{!i||h||p||u.current||(u.current=!0,c.replace(o))},[i,h,p,c,o]),(0,r.jsx)(r.Fragment,{children:t})}var d=n(7200);function u(e){let{children:t}=e;return(0,r.jsx)(d.O,{children:(0,r.jsx)(o.B,{children:(0,r.jsx)(i,{children:(0,r.jsx)(c,{excludePaths:["/api","/_next","/favicon.ico","/static"],homePath:"/",children:t})})})})}},5255:(e,t,n)=>{"use strict";n.d(t,{Navigation:()=>x});var r=n(5155),o=n(2115),a=n(6874),s=n.n(a),i=n(6320),l=n(9449),c=n(501);let d=l.bL,u=l.l9;l.ZL,l.i3;let h=o.forwardRef((e,t)=>{let{className:n,sideOffset:o=8,...a}=e;return(0,r.jsx)(l.UC,{ref:t,sideOffset:o,className:(0,c.cn)("z-50 w-[100px] overflow-hidden p-0","flex flex-col gap-1","bg-transparent rounded-lg","nav-blend","data-[state=open]:animate-in data-[state=open]:fade-in-0","data-[state=closed]:animate-out data-[state=closed]:fade-out-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...a})});h.displayName="DropdownMenuContent";let p=o.forwardRef((e,t)=>{let{className:n,inset:o,...a}=e;return(0,r.jsx)(l.q7,{ref:t,className:(0,c.cn)("group/item relative cursor-pointer select-none py-2 text-paragraph-md uppercase font-styrene font-boldoutline-none","flex items-center justify-end gap-2","transition duration-200 ease-out",o&&"pl-9",n),...a})});p.displayName="DropdownMenuItem",o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)(l.YJ,{ref:t,className:(0,c.cn)("flex flex-col gap-1",n),...o})}).displayName="DropdownMenuGroup";var m=n(6609),f=n(7200),g=n(2385);let v=e=>{let{href:t,children:n,isActive:o=!1}=e;return(0,r.jsxs)(s(),{href:t,className:"group relative font-styrene text-paragraph-md font-bold uppercase nav-blend transition-opacity duration-300",children:[n,(0,r.jsx)("span",{className:"ease-custom absolute bottom-0 left-0 h-[2px] w-0 translate-y-1 transform nav-blend-line transition-all duration-700 group-hover:w-1/2"}),(0,r.jsx)("span",{className:"ease-custom absolute bottom-0 right-0 h-[2px] w-0 translate-y-1 transform nav-blend-line transition-all duration-700 group-hover:w-1/2"})]})},x=()=>{let{user:e,isAuthenticated:t,invalidateSession:n}=(0,f.A)(),[a,s]=o.useState(!1),[l,c]=o.useState(!1),{isNavVisible:x}=(0,m.r)();o.useEffect(()=>{c(!0)},[]);let b=async()=>{n(),(0,g.RN)(),await (0,i.CI)({redirect:!1}),window.location.href="/"};return x?(0,r.jsx)("nav",{className:"fixed top-0 left-0 right-0 px-6 md:px-8 pt-8 z-[10000]",style:{mixBlendMode:"difference"},children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 md:gap-6",children:[(0,r.jsx)(v,{href:"/",isActive:!0,children:"Home"}),(0,r.jsx)(v,{href:"/gift",children:"Roadmap"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 md:gap-6 ",children:[(0,r.jsx)(v,{href:"/gallery",children:"Gallery"}),l&&t?(0,r.jsx)("span",{className:"font-styrene text-paragraph-md font-bold uppercase nav-blend",children:(0,r.jsxs)(d,{onOpenChange:s,children:[(0,r.jsx)(u,{asChild:!0,className:"focus:outline-none",children:(0,r.jsxs)("button",{className:"group relative cursor-pointer font-styrene text-paragraph-md font-bold uppercase nav-blend truncate max-w-[120px] md:max-w-none ".concat(a?"[&>span]:w-1/2":""),children:[(null==e?void 0:e.username)||(null==e?void 0:e.name),(0,r.jsx)("span",{className:"ease-custom absolute bottom-0 left-0 h-[2px] w-0 translate-y-1 transform nav-blend-line transition-all duration-700 group-hover:w-1/2"}),(0,r.jsx)("span",{className:"ease-custom absolute bottom-0 right-0 h-[2px] w-0 translate-y-1 transform nav-blend-line transition-all duration-700 group-hover:w-1/2"})]})}),(0,r.jsx)(h,{align:"end",children:(0,r.jsx)(p,{onClick:b,children:"Logout"})})]})}):(0,r.jsx)(v,{href:"/login",children:"Log in"})]})]})}):null}},5786:()=>{},6555:(e,t,n)=>{"use strict";n.d(t,{DateProvider:()=>l,L$:()=>c,S_:()=>u,Zj:()=>d});var r=n(5155),o=n(2115);let a=(0,o.createContext)(void 0),s=(0,o.createContext)(void 0),i=(0,o.memo)(function(e){let{children:t,giftsDate:n}=e;return(0,r.jsx)(s.Provider,{value:{giftsDate:n},children:t})});function l(e){let{children:t}=e,[n,s]=(0,o.useState)(!1),[l,c]=(0,o.useState)(null),[d,u]=(0,o.useState)(null),h=(0,o.useRef)(null);(0,o.useEffect)(()=>{let e=new Date;c(e),u(e),h.current=p(e)},[]);let p=e=>"".concat(e.getFullYear(),"-").concat(e.getMonth(),"-").concat(e.getDate());return(0,o.useEffect)(()=>{n&&l&&u(l)},[n,l]),(0,o.useEffect)(()=>{if(n)return;let e=setInterval(()=>{let e=new Date;c(e);let t=p(e);h.current!==t&&(console.log("День изменился, обновляем дату для подарков"),u(e),h.current=t)},1e3);return()=>{clearInterval(e)}},[n]),(0,r.jsx)(a.Provider,{value:{currentDate:l,setCurrentDate:c,isTestMode:n,setIsTestMode:s},children:(0,r.jsx)(i,{giftsDate:d,children:t})})}function c(){let e=(0,o.useContext)(a);if(void 0===e)throw Error("useTimer must be used within a DateProvider");return e}function d(){let e=(0,o.useContext)(s);if(void 0===e)throw Error("useGifts must be used within a DateProvider");return e}function u(){let e=(0,o.useContext)(a),t=(0,o.useContext)(s);if(void 0===e||void 0===t)throw Error("useDate must be used within a DateProvider");return{...e,...t}}},6607:(e,t,n)=>{"use strict";n.d(t,{ReactQueryProvider:()=>i});var r=n(5155),o=n(7017),a=n(6715),s=n(2115);function i(e){let{children:t}=e,[n]=(0,s.useState)(()=>new o.E({defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,retry:1,refetchOnWindowFocus:!1}}}));return(0,r.jsx)(a.Ht,{client:n,children:t})}},6609:(e,t,n)=>{"use strict";n.d(t,{B:()=>s,r:()=>i});var r=n(5155),o=n(2115);let a=(0,o.createContext)({isNavVisible:!0,setNavVisibility:()=>{}});function s(e){let{children:t}=e,[n,s]=(0,o.useState)(!0);return(0,r.jsx)(a.Provider,{value:{isNavVisible:n,setNavVisibility:e=>{s(e)}},children:t})}function i(){return(0,o.useContext)(a)}},7200:(e,t,n)=>{"use strict";n.d(t,{A:()=>h,O:()=>d});var r=n(5155);n(3855);var o=n(6320),a=n(2115),s=n(4258),i=n(6715),l=n(2385);let c=(0,a.createContext)({isAuthenticated:!1,isLoading:!0,user:null,invalidateSession:()=>{}});function d(e){let{children:t}=e;return(0,r.jsx)(o.CP,{refetchInterval:0,refetchOnWindowFocus:!1,refetchWhenOffline:!1,children:(0,r.jsx)(u,{children:t})})}function u(e){let{children:t}=e,n=(0,i.jE)(),{data:o,isLoading:a}=(0,s.Q)();return(0,r.jsx)(c.Provider,{value:{isAuthenticated:!!(null==o?void 0:o.isAuthenticated),isLoading:a,user:null==o?void 0:o.user,invalidateSession:()=>{(0,l.GB)(),n.invalidateQueries({queryKey:[s.e]})}},children:t})}function h(){return(0,a.useContext)(c)}},7400:(e,t,n)=>{Promise.resolve().then(n.bind(n,3110)),Promise.resolve().then(n.bind(n,5255)),Promise.resolve().then(n.bind(n,9855)),Promise.resolve().then(n.t.bind(n,5786,23)),Promise.resolve().then(n.t.bind(n,2016,23)),Promise.resolve().then(n.t.bind(n,5769,23)),Promise.resolve().then(n.t.bind(n,790,23)),Promise.resolve().then(n.t.bind(n,9087,23)),Promise.resolve().then(n.t.bind(n,5664,23)),Promise.resolve().then(n.bind(n,6555)),Promise.resolve().then(n.bind(n,4274)),Promise.resolve().then(n.bind(n,6607))},9855:(e,t,n)=>{"use strict";n.d(t,{SmoothScrollScript:()=>o});var r=n(2115);function o(){return(0,r.useEffect)(()=>{let e=document.createElement("script");function t(e,t,n,r){let o=performance.now();requestAnimationFrame(function a(s){var i;let l=s-o;if(l>r){e.scrollLeft=n;return}e.scrollLeft=t+(n-t)*((i=l/r)<.5?4*i*i*i:1-Math.pow(-2*i+2,3)/2),requestAnimationFrame(a)})}return e.src="https://cdnjs.cloudflare.com/ajax/libs/smoothscroll/1.4.10/SmoothScroll.min.js",e.integrity="sha256-huW7yWl7tNfP7lGk46XE+Sp0nCotjzYodhVKlwaNeco=",e.crossOrigin="anonymous",e.onload=()=>{"function"==typeof window.SmoothScroll&&(window.SmoothScroll({animationTime:1200,stepSize:60,accelerationDelta:20,accelerationMax:1.5,keyboardSupport:!0,arrowScroll:40,pulseAlgorithm:!0,pulseScale:6,pulseNormalize:1,touchpadSupport:!0,touchpadSensitivity:1.5}),document.querySelectorAll('[data-slider="w"]').forEach(e=>{e instanceof HTMLElement&&(window.addEventListener("wheel",n=>{if(0!==n.deltaX||n.shiftKey)return;let r=e.getBoundingClientRect(),o=r.top<window.innerHeight&&r.bottom>0,a=n.clientX>=r.left&&n.clientX<=r.right&&n.clientY>=r.top&&n.clientY<=r.bottom;if(o&&a){n.preventDefault();let r=5*n.deltaY,o=e.scrollLeft;t(e,o,o+r,800)}},{passive:!1}),function(e){if(e.scrollWidth<=e.clientWidth)return;let n="40px",r=document.createElement("button");r.innerHTML="&lt;",r.style.cssText="\n        position: absolute;\n        left: 10px;\n        top: 50%;\n        transform: translateY(-50%);\n        width: ".concat(n,";\n        height: ").concat(n,";\n        border-radius: 50%;\n        background: rgba(255, 255, 255, 0.5);\n        border: 1px solid rgba(0, 0, 0, 0.1);\n        font-size: 18px;\n        z-index: 10;\n        cursor: pointer;\n        display: none;\n        transition: all 0.3s ease;\n        opacity: 0.7;\n        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n      ");let o=document.createElement("button");o.innerHTML="&gt;",o.style.cssText="\n        position: absolute;\n        right: 10px;\n        top: 50%;\n        transform: translateY(-50%);\n        width: ".concat(n,";\n        height: ").concat(n,";\n        border-radius: 50%;\n        background: rgba(255, 255, 255, 0.5);\n        border: 1px solid rgba(0, 0, 0, 0.1);\n        font-size: 18px;\n        z-index: 10;\n        cursor: pointer;\n        display: none;\n        transition: all 0.3s ease;\n        opacity: 0.7;\n        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n      "),r.addEventListener("mouseenter",()=>{r.style.opacity="1",r.style.background="rgba(255, 255, 255, 0.8)"}),r.addEventListener("mouseleave",()=>{r.style.opacity="0.7",r.style.background="rgba(255, 255, 255, 0.5)"}),o.addEventListener("mouseenter",()=>{o.style.opacity="1",o.style.background="rgba(255, 255, 255, 0.8)"}),o.addEventListener("mouseleave",()=>{o.style.opacity="0.7",o.style.background="rgba(255, 255, 255, 0.5)"}),r.addEventListener("click",()=>{let n=e.scrollLeft,r=n-e.clientWidth/2;t(e,n,r,800)}),o.addEventListener("click",()=>{let n=e.scrollLeft,r=n+e.clientWidth/2;t(e,n,r,800)});let a=e.parentElement;a&&("static"===window.getComputedStyle(a).position&&(a.style.position="relative"),a.appendChild(r),a.appendChild(o),e.addEventListener("scroll",()=>{let t=e.scrollLeft<=20,n=e.scrollLeft>=e.scrollWidth-e.clientWidth-20;r.style.display=t?"none":"block",o.style.display=n?"none":"block"}),e.dispatchEvent(new Event("scroll")))}(e))}))},document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),null}}},e=>{var t=t=>e(e.s=t);e.O(0,[1050,6530,2960,9918,6874,9857,722,4546,8441,1684,7358],()=>t(7400)),_N_E=e.O()}]);