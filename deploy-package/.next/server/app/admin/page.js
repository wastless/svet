(()=>{var e={};e.id=698,e.ids=[698],e.modules={1132:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\repositories\\\\lesya.svet\\\\src\\\\app\\\\admin\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\repositories\\lesya.svet\\src\\app\\admin\\page.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10815:(e,t,r)=>{"use strict";r.d(t,{b:()=>i});var a=r(60687),s=r(43210),l=r(8730);let n=(0,r(43222).tv)({slots:{root:["group","relative","flex","items-center","gap-2","font-styrene","md:text-paragraph-md","sm:text-paragraph-sm sm:font-bold","md:font-bold","uppercase","text-adaptive","transition-all","duration-300"],text:[],icon:["transition-transform"],underline:["absolute","bottom-0","h-[2px]","w-0","translate-y-1","transform","bg-adaptive-text","transition-all","duration-700","ease-custom","group-hover:w-1/2"],underlineLeft:["left-0"],underlineRight:["right-0"]},variants:{position:{relative:{},absolute:{root:["absolute","bottom-8","right-8","z-10"]}},iconPosition:{start:{icon:["group-hover:-translate-x-1"]},end:{icon:["group-hover:translate-x-1"]}}},defaultVariants:{position:"relative",iconPosition:"end"}}),i=s.forwardRef(({children:e,icon:t,asChild:r,className:s,position:i,iconPosition:o,...c},d)=>{let u=r?l.DX:"button",h=n({position:i,iconPosition:o}),p=t&&(0,a.jsx)("span",{className:h.icon(),children:t});return(0,a.jsxs)(u,{ref:d,className:h.root({className:s}),...c,children:["start"===o&&p,(0,a.jsx)("span",{className:h.text(),children:e}),"end"===o&&p,(0,a.jsx)("span",{className:`${h.underline()} ${h.underlineLeft()}`}),(0,a.jsx)("span",{className:`${h.underline()} ${h.underlineRight()}`})]})});i.displayName="IconButtonRoot"},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11365:(e,t,r)=>{"use strict";r.d(t,{E$:()=>n,HQ:()=>x,IJ:()=>i,fl:()=>s,kt:()=>o,lQ:()=>d,ne:()=>p,nn:()=>u,th:()=>h,ud:()=>l,v:()=>c});var a=r(60687);function s({className:e="",size:t=16}){return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:t,height:t,className:e,children:[(0,a.jsx)("g",{clipPath:"url(#arrow-right_a)",children:(0,a.jsx)("path",{fill:"currentColor",d:"M8.757 13.6565L14.414 7.99951L8.757 2.34351L7.343 3.75751L10.586 6.99951H2V8.99951H10.586L7.343 12.2425L8.757 13.6565Z"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"arrow-right_a",children:(0,a.jsx)("path",{d:"M0 0h16v16H0z"})})})]})}function l({className:e="",size:t=20}){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,className:e,fill:"currentColor",children:(0,a.jsx)("path",{d:"M8 5.5V12h11v-.75C14 9.5 9.5 5.5 9.5 5.5zm0 13V12h11v.75c-5 1.75-9.5 5.75-9.5 5.75z",clipRule:"evenodd",fillRule:"evenodd"})})}function n({className:e="",size:t=20}){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,className:e,fill:"currentColor",children:(0,a.jsx)("path",{d:"M11 5.5H7v13h4zm6 0h-4v13h4z",clipRule:"evenodd",fillRule:"evenodd"})})}function i({className:e="",size:t=20}){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,className:e,fill:"currentColor",children:(0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})}function o({className:e="",size:t=20}){return(0,a.jsx)("div",{style:{width:t,height:t},className:`border-current animate-spin rounded-full border-b-2 ${e}`})}function c({className:e="",size:t=20}){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,className:e,fill:"currentColor",children:(0,a.jsx)("path",{d:"M12.5 3H12l-.299.398V3.4l-.003.003-.018.024-.088.108a10 10 0 0 1-.375.422c-.339.36-.848.855-1.52 1.381C8.348 6.392 6.37 7.553 3.82 8.017L3 8.164v7.67l.821.149c2.55.463 4.528 1.624 5.875 2.679q.812.633 1.52 1.381.241.257.464.53l.018.024.002.002.001.001.299.4h4.5V3zm.174 2.326A13 13 0 0 0 12.97 5h1.53v14h-1.53q-.145-.166-.296-.326a16 16 0 0 0-1.745-1.587C9.546 16.006 7.554 14.805 5 14.19V9.81c2.554-.615 4.546-1.815 5.929-2.898a15.6 15.6 0 0 0 1.745-1.586M19.5 6v12h2V6z",clipRule:"evenodd"})})}function d({className:e="",size:t=20}){return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,className:e,fill:"currentColor",children:[(0,a.jsx)("path",{d:"m16.5 17.44 3.355 2.826 1.289-1.53-4.644-3.91v-.012l-2-1.674L2.145 2.736.856 4.266l4.133 3.48a12 12 0 0 1-1.168.27L3 8.166v7.669l.821.149c2.55.463 4.528 1.624 5.875 2.679q.812.633 1.52 1.381.241.257.464.53l.018.024.002.002.001.001L12 21h4.5zm-2-1.684V19h-1.53q-.145-.166-.296-.326a16 16 0 0 0-1.745-1.587C9.546 16.006 7.554 14.805 5 14.19V9.81c.63-.151 1.225-.339 1.785-.551zM16.5 4v6.902l-2-1.675V5h-1.53a14 14 0 0 1-.296.326c-.322.342-.768.78-1.335 1.255L9.777 5.273q.766-.607 1.44-1.317.24-.257.463-.53l.018-.024.002-.003h.001L12 3h4.5z",clipRule:"evenodd",fillRule:"evenodd"}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{children:(0,a.jsx)("path",{d:"M0 0h24v24H0z"})})})]})}function u({className:e="",size:t=48}){return(0,a.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:t,height:t,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}function h({className:e="",size:t=20}){return(0,a.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:t,height:t,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}function p({className:e="",size:t=20}){return(0,a.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:t,height:t,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}function x({className:e=""}){return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"72",height:"34",fill:"none",viewBox:"0 0 64 30",className:e,children:[(0,a.jsx)("g",{clipPath:"url(#a)",children:(0,a.jsx)("path",{fill:"#F90000",d:"M60.8 8.66c.455.455.82.82 1.184 1.229 2.368 2.594 2.641 5.87.865 8.874-.865 1.456-2.05 2.593-3.37 3.594-3.052 2.276-6.468 3.777-10.111 4.733-11.568 3.049-23.228 3.185-34.933.865-3.097-.592-6.103-1.548-8.927-3.095-1.548-.864-2.96-1.866-4.007-3.322C-.276 19.172-.458 16.67.863 14.03c.865-1.775 2.232-3.14 3.78-4.369 2.733-2.184 5.739-3.822 8.972-5.096C25.32-.213 37.39-1.124 49.732 1.288c3.37.637 6.559 1.775 9.474 3.686.592.41 1.184.82 1.73 1.32 1.093.956 1.048 1.274-.136 2.366M49.823 3.7v-.182c-.728-.136-1.412-.318-2.14-.455-9.701-1.638-19.266-1.138-28.693 1.73-4.1 1.228-8.062 2.912-11.569 5.414-1.32.956-2.641 2.003-3.689 3.231-2.414 2.867-2.14 5.78.82 8.1 1.275 1.002 2.778 1.775 4.281 2.458 3.234 1.41 6.65 2.093 10.111 2.594 8.29 1.137 16.578 1.046 24.822-.365 4.418-.773 8.699-2.047 12.616-4.368 1.594-.956 3.097-2.048 4.19-3.55 1.867-2.502 1.685-5.142-.547-7.326-.683-.683-1.457-1.274-2.277-1.82-3.826-2.503-8.061-3.55-12.57-3.459-.957 0-1.959.091-2.915.137-.592 0-1.093-.228-1.139-.865-.045-.546.365-.91.911-.955.957-.137 1.913-.364 2.87-.41 1.64-.045 3.279.046 4.918.091"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"a",children:(0,a.jsx)("path",{fill:"#fff",d:"M0 0h64v29.553H0z"})})})]})}r(43210)},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22971:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var a=r(65239),s=r(48088),l=r(88170),n=r.n(l),i=r(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let c={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1132)),"C:\\repositories\\lesya.svet\\src\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,55524)),"C:\\repositories\\lesya.svet\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"C:\\repositories\\lesya.svet\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["C:\\repositories\\lesya.svet\\src\\app\\admin\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},23286:(e,t,r)=>{"use strict";r.d(t,{DG:()=>l,H6:()=>s,l$:()=>a});let a={START_DATE:"2025-07-01",CYCLE_LENGTH:365},s={TARGET_DATE:"2025-08-01",UPDATE_INTERVAL:1e3},l=["Hi","Hey","Hola","Bonjour","Hallo","Ciao","Ol\xe1","Czesc","Privet","Merhaba","Salam","Shalom","Ni hao","Namaste","Sawadee","Halo","Jambo","Yia sou","Hall\xf3","Hej","Hej","Ahoj","Hell\xf3"]},25718:(e,t,r)=>{"use strict";r.d(t,{HJ:()=>m,Kv:()=>p,RX:()=>u,Zj:()=>d,sw:()=>h,xj:()=>x});var a=r(51423),s=r(8693),l=r(54050),n=r(34610),i=r(84359),o=r(43210);let c={GIFTS:"gifts",GIFT:e=>["gift",e],GIFT_CONTENT:e=>["gift-content",e]};function d(){return(0,a.I)({queryKey:[c.GIFTS],queryFn:async()=>{let e=Date.now(),t=await fetch(`/api/gifts?_t=${e}`);if(!t.ok)throw Error("Ошибка загрузки подарков");return t.json()},staleTime:0,gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0})}function u(e){return(0,a.I)({queryKey:c.GIFT_CONTENT(e),queryFn:async()=>{let t=Date.now(),r=await fetch(`/api/gift-content/${e}?_t=${t}`);if(!r.ok)throw Error(`Ошибка загрузки контента подарка ${e}`);if(r.redirected){let t=await fetch(r.url);if(!t.ok)throw Error(`Ошибка загрузки контента подарка ${e} из облачного хранилища`);return t.json()}return r.json()},enabled:!!e,staleTime:0,gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0})}function h(e){let t=(0,a.I)({queryKey:c.GIFT(e),queryFn:async()=>{let t=Date.now(),r=await fetch(`/api/gifts/${e}?_t=${t}`);if(!r.ok)throw Error(`Ошибка загрузки подарка ${e}`);return r.json()},enabled:!!e,staleTime:0,gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0}),r=u(e),s=(0,n.Q)(),l=t.isLoading||r.isLoading||s.isLoading,d=t.isError||r.isError||s.isError,h=t.error||r.error||s.error,p=(0,o.useMemo)(()=>l||d?null:{gift:t.data,content:r.data,isAuthenticated:s.data?.isAuthenticated,memoryPhoto:t.data?.memoryPhoto},[l,d,t.data,r.data,s.data?.isAuthenticated]),x=(0,o.useRef)(!1);return{data:p,isLoading:l,isError:d,error:h,refetch:(0,o.useCallback)(async()=>{x.current||(console.log(`🔄 Invalidating cache for gift ${e}`),(0,i.Mb)(e),x.current=!0),await Promise.all([t.refetch(),r.refetch()]),setTimeout(()=>{x.current=!1},500)},[e,t,r])}}function p(){let e=(0,s.jE)();return(0,l.n)({mutationFn:async e=>{let t=await fetch("/api/gifts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Ошибка при создании подарка");return t.json()},onSuccess:()=>{e.invalidateQueries({queryKey:[c.GIFTS]}),(0,i.Mb)()}})}function x(e){let t=(0,s.jE)();return(0,l.n)({mutationFn:async t=>{if(!e)throw Error("ID подарка не указан");let r=await fetch(`/api/gifts/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error((await r.json()).error||"Ошибка при обновлении подарка");return r.json()},onSuccess:r=>{e&&(t.setQueryData(c.GIFT(e),r),t.invalidateQueries({queryKey:[c.GIFTS]}),t.invalidateQueries({queryKey:c.GIFT_CONTENT(e)}),(0,i.Mb)(e))}})}function m(){let e=(0,s.jE)();return(0,l.n)({mutationFn:async e=>{if(!(await fetch(`/api/gifts/${e}`,{method:"DELETE"})).ok)throw Error("Ошибка при удалении подарка");return e},onSuccess:t=>{e.invalidateQueries({queryKey:[c.GIFTS]}),e.removeQueries({queryKey:c.GIFT(t)}),e.removeQueries({queryKey:c.GIFT_CONTENT(t)}),(0,i.Mb)(t)}})}},25924:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>t3});var a=r(60687),s=r(43210),l=r(8730),n=r(45760),i=r(43222);let o="InputWrapper",c="InputEl",d="InputIcon",u="InputInlineAffixButton",h=(0,i.tv)({slots:{root:["group relative flex w-full overflow-hidden bg-bg-white-0 text-text-strong-950","transition duration-200 ease-out","divide-x divide-stroke-soft-200","before:absolute before:inset-0 before:ring-1 before:ring-inset before:ring-stroke-soft-200","before:pointer-events-none before:rounded-[inherit]","before:transition before:duration-200 before:ease-out","hover:shadow-none","has-[input:disabled]:shadow-none has-[input:disabled]:before:ring-transparent"],wrapper:["group/input-wrapper flex w-full cursor-text items-center bg-bg-white-0","transition duration-200 ease-out","has-[input:disabled]:pointer-events-none has-[input:disabled]:bg-bg-weak-50"],input:["w-full bg-transparent text-paragraph-md font-styrene text-text-strong-950 outline-none","transition duration-200 ease-out","placeholder:select-none placeholder:text-text-soft-400 placeholder:transition placeholder:duration-200 placeholder:ease-out","group-hover/input-wrapper:placeholder:text-text-sub-600","focus:outline-none","group-has-[input:focus]:placeholder:text-text-sub-600","disabled:text-text-disabled-300 disabled:placeholder:text-text-disabled-300"],icon:["flex size-5 shrink-0 select-none items-center justify-center","transition duration-200 ease-out","group-has-[:placeholder-shown]:text-text-soft-400","text-text-sub-600","group-has-[:placeholder-shown]:group-hover/input-wrapper:text-text-sub-600","group-has-[:placeholder-shown]:group-has-[input:focus]/input-wrapper:text-text-sub-600","group-has-[input:disabled]/input-wrapper:text-text-disabled-300"],affix:["shrink-0 bg-bg-white-0 text-paragraph-sm font-styrene text-text-sub-600","flex items-center justify-center truncate","transition duration-200 ease-out","group-has-[:placeholder-shown]:text-text-soft-400","group-has-[:placeholder-shown]:group-has-[input:focus]:text-text-sub-600"],inlineAffix:["text-paragraph-sm text-text-sub-600 font-styrene","group-has-[:placeholder-shown]:text-text-soft-400","group-has-[:placeholder-shown]:group-has-[input:focus]:text-text-sub-600"]},variants:{size:{medium:{root:"rounded-10",wrapper:"gap-2 px-3",input:"h-10"},small:{root:"rounded-lg",wrapper:"gap-2 px-2.5",input:"h-9"},xsmall:{root:"rounded-lg",wrapper:"gap-1.5 px-2",input:"h-8"}},hasError:{true:{root:["before:ring-error-base","hover:before:ring-error-base","has-[input:focus]:shadow-button-error-focus has-[input:focus]:before:ring-error-base"]},false:{root:["hover:before:ring-transparent"]}}},compoundVariants:[{size:"medium",class:{affix:"px-3"}},{size:["small","xsmall"],class:{affix:"px-2.5"}}],defaultVariants:{size:"medium"}});function p({className:e,children:t,size:r,hasError:i,asChild:p,...x}){let m=s.useId(),g=p?l.DX:"div",{root:f}=h({size:r,hasError:i}),v=(0,n.B)(t,{size:r,hasError:i},[o,c,d,"InputAffixButton",u],m,p);return(0,a.jsx)(g,{className:f({class:e}),...x,children:v})}function x({className:e,children:t,size:r,hasError:s,asChild:n,...i}){let o=n?l.DX:"label",{wrapper:c}=h({size:r,hasError:s});return(0,a.jsx)(o,{className:c({class:e}),...i,children:t})}p.displayName="InputRoot",x.displayName=o;let m=s.forwardRef(({className:e,type:t="text",size:r,hasError:s,asChild:n,...i},o)=>{let c=n?l.DX:"input",{input:d}=h({size:r,hasError:s});return(0,a.jsx)(c,{type:t,className:d({class:e}),ref:o,...i})});function g({size:e,hasError:t,as:r,className:s,...l}){let{icon:n}=h({size:e,hasError:t});return(0,a.jsx)(r??"div",{className:n({class:s}),...l})}function f({className:e,children:t,size:r,hasError:s,...l}){let{inlineAffix:n}=h({size:r,hasError:s});return(0,a.jsx)("span",{className:n({class:e}),...l,children:t})}m.displayName=c,g.displayName=d,f.displayName=u;var v=r(23286),b=r(80013),j=r(78762);let y=s.forwardRef(({className:e,hasError:t,simple:r,disabled:s,...l},n)=>(0,a.jsx)("textarea",{className:(0,j.cn)(["block w-full resize-none text-paragraph-md font-styrene text-text-strong-950 outline-none",!r&&["bg-transparent bg-none min-h-[82px] pl-3 pr-2.5 pt-2.5"],r&&["shadow-regular-xs min-h-28 rounded-xl  px-3 py-2.5","ring-1 ring-inset ring-stroke-soft-200","transition duration-200 ease-out",!t&&["hover:[&:not(:focus)]:ring-transparent","focus:shadow-button-important-focus focus:ring-stroke-strong-950"],t&&["ring-error-base","focus:shadow-button-error-focus focus:ring-error-base"],s&&["ring-transparent bg-bg-weak-50"]],!s&&["placeholder:select-none placeholder:text-text-soft-400 placeholder:transition placeholder:duration-200 placeholder:ease-out","group-hover/textarea:placeholder:text-text-sub-600","focus:outline-none","focus:placeholder:text-text-sub-600"],s&&["text-text-disabled-300 placeholder:text-text-disabled-300"]],e),ref:n,disabled:s,...l}));function w(){return(0,a.jsx)("div",{className:"pointer-events-none size-3 cursor-s-resize",children:(0,a.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M9.11111 2L2 9.11111M10 6.44444L6.44444 10",className:"stroke-text-soft-400"})})})}y.displayName="Textarea",w.displayName="TextareaResizeHandle";let N=s.forwardRef(({containerClassName:e,children:t,hasError:r,simple:s,...l},n)=>s?(0,a.jsx)(y,{ref:n,simple:!0,hasError:r,...l}):(0,a.jsx)("div",{className:(0,j.cn)(["group/textarea shadow-regular-xs relative w-full rounded-xl p-1","ring-1 ring-inset ring-stroke-soft-200","transition duration-200 ease-out","has-[[disabled]]:ring-transparent has-[[disabled]]:pointer-events-none has-[[disabled]]:bg-bg-weak-50"],!r&&["hover:[&:not(:focus-within)]:ring-transparent","focus-within:shadow-button-important-focus focus-within:ring-stroke-strong-950"],r&&["ring-error-base","focus-within:shadow-button-error-focus focus-within:ring-error-base"],e),children:(0,a.jsxs)("div",{className:"grid bg-white rounded-lg",children:[(0,a.jsxs)("div",{className:"relative z-10 flex flex-col gap-2 [grid-area:1/1]",children:[(0,a.jsx)(y,{ref:n,hasError:r,...l}),(0,a.jsxs)("div",{className:"pointer-events-none flex items-center justify-end gap-1.5 pl-3 pr-2.5",children:[t,(0,a.jsx)(w,{})]})]}),(0,a.jsx)("div",{className:"min-h-full resize-y overflow-hidden opacity-0 [grid-area:1/1]"})]})}));function k({current:e,max:t,className:r}){return void 0===e||void 0===t?null:(0,a.jsxs)("span",{className:(0,j.cn)("text-subheading-2xs text-text-soft-400","group-has-[[disabled]]/textarea:text-text-disabled-300",{"text-error-base":e>t},r),children:[e,"/",t]})}N.displayName="TextareaRoot",k.displayName="TextareaCounter";var C=r(98599),S=r(11273),T=r(70569),R=r(65551);function I(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var D=r(18853),E=r(46059),P=r(14163),L="Checkbox",[z,M]=(0,S.A)(L),[_,A]=z(L);function O(e){let{__scopeCheckbox:t,checked:r,children:l,defaultChecked:n,disabled:i,form:o,name:c,onCheckedChange:d,required:u,value:h="on",internal_do_not_use_render:p}=e,[x,m]=(0,R.i)({prop:r,defaultProp:n??!1,onChange:d,caller:L}),[g,f]=s.useState(null),[v,b]=s.useState(null),j=s.useRef(!1),y=!g||!!o||!!g.closest("form"),w={checked:x,disabled:i,setChecked:m,control:g,setControl:f,name:c,form:o,value:h,hasConsumerStoppedPropagationRef:j,required:u,defaultChecked:!W(n)&&n,isFormControl:y,bubbleInput:v,setBubbleInput:b};return(0,a.jsx)(_,{scope:t,...w,children:"function"==typeof p?p(w):l})}var F="CheckboxTrigger",U=s.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...l},n)=>{let{control:i,value:o,disabled:c,checked:d,required:u,setControl:h,setChecked:p,hasConsumerStoppedPropagationRef:x,isFormControl:m,bubbleInput:g}=A(F,e),f=(0,C.s)(n,h),v=s.useRef(d);return s.useEffect(()=>{let e=i?.form;if(e){let t=()=>p(v.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[i,p]),(0,a.jsx)(P.sG.button,{type:"button",role:"checkbox","aria-checked":W(d)?"mixed":d,"aria-required":u,"data-state":$(d),"data-disabled":c?"":void 0,disabled:c,value:o,...l,ref:f,onKeyDown:(0,T.m)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,T.m)(r,e=>{p(e=>!!W(e)||!e),g&&m&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())})})});U.displayName=F;var H=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:s,checked:l,defaultChecked:n,required:i,disabled:o,value:c,onCheckedChange:d,form:u,...h}=e;return(0,a.jsx)(O,{__scopeCheckbox:r,checked:l,defaultChecked:n,disabled:o,required:i,onCheckedChange:d,name:s,form:u,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U,{...h,ref:t,__scopeCheckbox:r}),e&&(0,a.jsx)(q,{__scopeCheckbox:r})]})})});H.displayName=L;var V="CheckboxIndicator",B=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:s,...l}=e,n=A(V,r);return(0,a.jsx)(E.C,{present:s||W(n.checked)||!0===n.checked,children:(0,a.jsx)(P.sG.span,{"data-state":$(n.checked),"data-disabled":n.disabled?"":void 0,...l,ref:t,style:{pointerEvents:"none",...e.style}})})});B.displayName=V;var G="CheckboxBubbleInput",q=s.forwardRef(({__scopeCheckbox:e,...t},r)=>{let{control:l,hasConsumerStoppedPropagationRef:n,checked:i,defaultChecked:o,required:c,disabled:d,name:u,value:h,form:p,bubbleInput:x,setBubbleInput:m}=A(G,e),g=(0,C.s)(r,m),f=I(i),v=(0,D.X)(l);s.useEffect(()=>{if(!x)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!n.current;if(f!==i&&e){let r=new Event("click",{bubbles:t});x.indeterminate=W(i),e.call(x,!W(i)&&i),x.dispatchEvent(r)}},[x,f,i,n]);let b=s.useRef(!W(i)&&i);return(0,a.jsx)(P.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:c,disabled:d,name:u,value:h,form:p,...t,tabIndex:-1,ref:g,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function W(e){return"indeterminate"===e}function $(e){return W(e)?"indeterminate":e?"checked":"unchecked"}function K({...e}){return(0,a.jsx)("svg",{width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M1 3.5L4 6.5L9 1.5",strokeWidth:"1.5",className:"stroke-white"})})}function Q({...e}){return(0,a.jsx)("svg",{width:"8",height:"2",viewBox:"0 0 8 2",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M0 1H8",strokeWidth:"1.5",className:"stroke-static-white"})})}q.displayName=G;let X=s.forwardRef(({className:e,checked:t,...r},l)=>{let n=s.useId();return(0,a.jsxs)(H,{ref:l,checked:t,className:(0,j.cn)("group/checkbox relative flex size-5 shrink-0 items-center justify-center outline-none","focus:outline-none",e),...r,children:[(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("rect",{x:"2",y:"2",width:"16",height:"16",rx:"4",className:(0,j.cn)("fill-bg-soft-200 transition duration-200 ease-out","group-hover/checkbox:fill-bg-sub-300","group-focus/checkbox:fill-bg-strong-950","group-disabled/checkbox:fill-bg-soft-200","group-hover/checkbox:group-data-[state=checked]/checkbox:fill-bg-strong-950","group-hover/checkbox:group-data-[state=indeterminate]/checkbox:fill-bg-strong-950","group-focus/checkbox:group-data-[state=checked]/checkbox:fill-bg-strong-950","group-focus/checkbox:group-data-[state=indeterminate]/checkbox:fill-bg-strong-950","group-data-[state=checked]/checkbox:fill-bg-strong-950","group-data-[state=indeterminate]/checkbox:fill-bg-strong-950","group-disabled/checkbox:group-data-[state=checked]/checkbox:fill-bg-soft-200","group-disabled/checkbox:group-data-[state=indeterminate]/checkbox:fill-bg-soft-200")}),(0,a.jsx)("g",{filter:`url(#${n})`,children:(0,a.jsx)("rect",{x:"3.5",y:"3.5",width:"13",height:"13",rx:"2.6",className:(0,j.cn)("fill-bg-white-0 transition duration-200 ease-out","group-disabled/checkbox:hidden","group-data-[state=checked]/checkbox:opacity-0","group-data-[state=indeterminate]/checkbox:opacity-0")})}),(0,a.jsx)("defs",{children:(0,a.jsxs)("filter",{id:n,x:"1.5",y:"3.5",width:"17",height:"17",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,a.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,a.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,a.jsx)("feOffset",{dy:"2"}),(0,a.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,a.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.105882 0 0 0 0 0.109804 0 0 0 0 0.113725 0 0 0 0.12 0"}),(0,a.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_34646_2602"}),(0,a.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_34646_2602",result:"shape"})]})})]}),(0,a.jsxs)(B,{forceMount:!0,className:"flex items-center justify-center",children:[(0,a.jsx)(K,{className:(0,j.cn)("absolute left-1/2 top-1/2 shrink-0 -translate-x-1/2 -translate-y-1/2 opacity-0 transition-opacity duration-200","group-data-[state=checked]/checkbox:opacity-100","group-data-[state=indeterminate]/checkbox:invisible")}),(0,a.jsx)(Q,{className:(0,j.cn)("absolute left-1/2 top-1/2 shrink-0 -translate-x-1/2 -translate-y-1/2 opacity-0 transition-opacity duration-200","group-data-[state=indeterminate]/checkbox:opacity-100","group-data-[state=checked]/checkbox:invisible")})]})]})});function Y({data:e,onChange:t,giftId:r}){let[l,n]=(0,s.useState)(e),i=(e,r)=>{let a={...l,[e]:r};if("openDate"===e&&r)try{let e=new Date(r);isNaN(e.getTime())&&console.warn("Указана некорректная дата:",r)}catch(e){console.error("Ошибка при обработке даты:",e)}n(a),t(a)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:col-span-2",children:[(0,a.jsx)(b.b,{htmlFor:"title",children:"Название подарка"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.title,onChange:e=>i("title",e.target.value),placeholder:"Музыкальный плеер"})})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)(b.b,{htmlFor:"number",children:["Номер подарка ",(0,a.jsx)(b.n,{})]}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"number",id:"number",value:l.number,onChange:e=>i("number",parseInt(e.target.value)||0),required:!0,min:"1"})})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)(b.b,{htmlFor:"openDate",children:["Дата открытия ",(0,a.jsx)(b.n,{})]}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"datetime-local",id:"openDate",value:l.openDate,onChange:e=>i("openDate",e.target.value),required:!0})})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)(b.b,{htmlFor:"author",children:["Имя друга ",(0,a.jsx)(b.n,{})]}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.author,onChange:e=>i("author",e.target.value),placeholder:"Даша",required:!0})})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)(b.b,{htmlFor:"nickname",children:["Никнейм друга ",(0,a.jsx)(b.n,{})]}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(f,{children:"@"}),(0,a.jsx)(m,{type:"text",value:l.nickname,onChange:e=>i("nickname",e.target.value),placeholder:"savdis",required:!0})]})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)(b.b,{htmlFor:"englishDescription",children:["Английское описание ",(0,a.jsx)(b.n,{})]}),(0,a.jsx)(N,{placeholder:"Each memory has a soundtrack of its own...",value:l.englishDescription,onChange:e=>i("englishDescription",e.target.value),required:!0,children:(0,a.jsx)(k,{current:l.englishDescription.length,max:200})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:col-span-2",children:[(0,a.jsx)(b.b,{htmlFor:"codeText",children:"Описание для кода"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{id:"codeText",value:l.codeText,onChange:e=>i("codeText",e.target.value),placeholder:"This is the part of your cipher. Collect them all to reveal the last secret"})})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:col-span-2",children:[(0,a.jsx)(b.b,{htmlFor:"code",children:"Секретный код"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{id:"code",value:l.code,onChange:e=>i("code",e.target.value),placeholder:"fZX+g"})})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(X,{id:"isSecret",checked:l.isSecret,onCheckedChange:e=>i("isSecret",!!e)}),(0,a.jsx)(b.b,{className:"text-paragraph-sm font-styrene uppercase text-text-strong-950",htmlFor:"isSecret",children:"Секретный подарок (скрыт от публичного просмотра)"})]})]})}X.displayName=H.displayName;var J=r(13495),Z=r(43),ee=r(66156);function et(e,[t,r]){return Math.min(r,Math.max(t,e))}var er="ScrollArea",[ea,es]=(0,S.A)(er),[el,en]=ea(er),ei=s.forwardRef((e,t)=>{let{__scopeScrollArea:r,type:l="hover",dir:n,scrollHideDelay:i=600,...o}=e,[c,d]=s.useState(null),[u,h]=s.useState(null),[p,x]=s.useState(null),[m,g]=s.useState(null),[f,v]=s.useState(null),[b,j]=s.useState(0),[y,w]=s.useState(0),[N,k]=s.useState(!1),[S,T]=s.useState(!1),R=(0,C.s)(t,e=>d(e)),I=(0,Z.jH)(n);return(0,a.jsx)(el,{scope:r,type:l,dir:I,scrollHideDelay:i,scrollArea:c,viewport:u,onViewportChange:h,content:p,onContentChange:x,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:N,onScrollbarXEnabledChange:k,scrollbarY:f,onScrollbarYChange:v,scrollbarYEnabled:S,onScrollbarYEnabledChange:T,onCornerWidthChange:j,onCornerHeightChange:w,children:(0,a.jsx)(P.sG.div,{dir:I,...o,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});ei.displayName=er;var eo="ScrollAreaViewport",ec=s.forwardRef((e,t)=>{let{__scopeScrollArea:r,children:l,nonce:n,...i}=e,o=en(eo,r),c=s.useRef(null),d=(0,C.s)(t,c,o.onViewportChange);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,a.jsx)(P.sG.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,a.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});ec.displayName=eo;var ed="ScrollAreaScrollbar",eu=s.forwardRef((e,t)=>{let{forceMount:r,...l}=e,n=en(ed,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,c="horizontal"===e.orientation;return s.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),"hover"===n.type?(0,a.jsx)(eh,{...l,ref:t,forceMount:r}):"scroll"===n.type?(0,a.jsx)(ep,{...l,ref:t,forceMount:r}):"auto"===n.type?(0,a.jsx)(ex,{...l,ref:t,forceMount:r}):"always"===n.type?(0,a.jsx)(em,{...l,ref:t}):null});eu.displayName=ed;var eh=s.forwardRef((e,t)=>{let{forceMount:r,...l}=e,n=en(ed,e.__scopeScrollArea),[i,o]=s.useState(!1);return s.useEffect(()=>{let e=n.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),o(!0)},a=()=>{t=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",a),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",a)}}},[n.scrollArea,n.scrollHideDelay]),(0,a.jsx)(E.C,{present:r||i,children:(0,a.jsx)(ex,{"data-state":i?"visible":"hidden",...l,ref:t})})}),ep=s.forwardRef((e,t)=>{var r,l;let{forceMount:n,...i}=e,o=en(ed,e.__scopeScrollArea),c="horizontal"===e.orientation,d=eP(()=>h("SCROLL_END"),100),[u,h]=(r="hidden",l={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},s.useReducer((e,t)=>l[e][t]??e,r));return s.useEffect(()=>{if("idle"===u){let e=window.setTimeout(()=>h("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(e)}},[u,o.scrollHideDelay,h]),s.useEffect(()=>{let e=o.viewport,t=c?"scrollLeft":"scrollTop";if(e){let r=e[t],a=()=>{let a=e[t];r!==a&&(h("SCROLL"),d()),r=a};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)}},[o.viewport,c,h,d]),(0,a.jsx)(E.C,{present:n||"hidden"!==u,children:(0,a.jsx)(em,{"data-state":"hidden"===u?"hidden":"visible",...i,ref:t,onPointerEnter:(0,T.m)(e.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:(0,T.m)(e.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),ex=s.forwardRef((e,t)=>{let r=en(ed,e.__scopeScrollArea),{forceMount:l,...n}=e,[i,o]=s.useState(!1),c="horizontal"===e.orientation,d=eP(()=>{if(r.viewport){let e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;o(c?e:t)}},10);return eL(r.viewport,d),eL(r.content,d),(0,a.jsx)(E.C,{present:l||i,children:(0,a.jsx)(em,{"data-state":i?"visible":"hidden",...n,ref:t})})}),em=s.forwardRef((e,t)=>{let{orientation:r="vertical",...l}=e,n=en(ed,e.__scopeScrollArea),i=s.useRef(null),o=s.useRef(0),[c,d]=s.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=eT(c.viewport,c.content),h={...l,sizes:c,onSizesChange:d,hasThumb:!!(u>0&&u<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function p(e,t){return function(e,t,r,a="ltr"){let s=eR(r),l=t||s/2,n=r.scrollbar.paddingStart+l,i=r.scrollbar.size-r.scrollbar.paddingEnd-(s-l),o=r.content-r.viewport;return eD([n,i],"ltr"===a?[0,o]:[-1*o,0])(e)}(e,o.current,c,t)}return"horizontal"===r?(0,a.jsx)(eg,{...h,ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=eI(n.viewport.scrollLeft,c,n.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=p(e,n.dir))}}):"vertical"===r?(0,a.jsx)(ef,{...h,ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=eI(n.viewport.scrollTop,c);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=p(e))}}):null}),eg=s.forwardRef((e,t)=>{let{sizes:r,onSizesChange:l,...n}=e,i=en(ed,e.__scopeScrollArea),[o,c]=s.useState(),d=s.useRef(null),u=(0,C.s)(t,d,i.onScrollbarXChange);return s.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,a.jsx)(ej,{"data-orientation":"horizontal",...n,ref:u,sizes:r,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":eR(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(i.viewport){let a=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(a),function(e,t){return e>0&&e<t}(a,r)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&l({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:eS(o.paddingLeft),paddingEnd:eS(o.paddingRight)}})}})}),ef=s.forwardRef((e,t)=>{let{sizes:r,onSizesChange:l,...n}=e,i=en(ed,e.__scopeScrollArea),[o,c]=s.useState(),d=s.useRef(null),u=(0,C.s)(t,d,i.onScrollbarYChange);return s.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,a.jsx)(ej,{"data-orientation":"vertical",...n,ref:u,sizes:r,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":eR(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(i.viewport){let a=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(a),function(e,t){return e>0&&e<t}(a,r)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&l({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:eS(o.paddingTop),paddingEnd:eS(o.paddingBottom)}})}})}),[ev,eb]=ea(ed),ej=s.forwardRef((e,t)=>{let{__scopeScrollArea:r,sizes:l,hasThumb:n,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:h,onResize:p,...x}=e,m=en(ed,r),[g,f]=s.useState(null),v=(0,C.s)(t,e=>f(e)),b=s.useRef(null),j=s.useRef(""),y=m.viewport,w=l.content-l.viewport,N=(0,J.c)(h),k=(0,J.c)(d),S=eP(p,10);function R(e){b.current&&u({x:e.clientX-b.current.left,y:e.clientY-b.current.top})}return s.useEffect(()=>{let e=e=>{let t=e.target;g?.contains(t)&&N(e,w)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[y,g,w,N]),s.useEffect(k,[l,k]),eL(g,S),eL(m.content,S),(0,a.jsx)(ev,{scope:r,scrollbar:g,hasThumb:n,onThumbChange:(0,J.c)(i),onThumbPointerUp:(0,J.c)(o),onThumbPositionChange:k,onThumbPointerDown:(0,J.c)(c),children:(0,a.jsx)(P.sG.div,{...x,ref:v,style:{position:"absolute",...x.style},onPointerDown:(0,T.m)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),b.current=g.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),R(e))}),onPointerMove:(0,T.m)(e.onPointerMove,R),onPointerUp:(0,T.m)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=j.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),ey="ScrollAreaThumb",ew=s.forwardRef((e,t)=>{let{forceMount:r,...s}=e,l=eb(ey,e.__scopeScrollArea);return(0,a.jsx)(E.C,{present:r||l.hasThumb,children:(0,a.jsx)(eN,{ref:t,...s})})}),eN=s.forwardRef((e,t)=>{let{__scopeScrollArea:r,style:l,...n}=e,i=en(ey,r),o=eb(ey,r),{onThumbPositionChange:c}=o,d=(0,C.s)(t,e=>o.onThumbChange(e)),u=s.useRef(void 0),h=eP(()=>{u.current&&(u.current(),u.current=void 0)},100);return s.useEffect(()=>{let e=i.viewport;if(e){let t=()=>{h(),u.current||(u.current=eE(e,c),c())};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,h,c]),(0,a.jsx)(P.sG.div,{"data-state":o.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:(0,T.m)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top;o.onThumbPointerDown({x:r,y:a})}),onPointerUp:(0,T.m)(e.onPointerUp,o.onThumbPointerUp)})});ew.displayName=ey;var ek="ScrollAreaCorner";s.forwardRef((e,t)=>{let r=en(ek,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&s?(0,a.jsx)(eC,{...e,ref:t}):null}).displayName=ek;var eC=s.forwardRef((e,t)=>{let{__scopeScrollArea:r,...l}=e,n=en(ek,r),[i,o]=s.useState(0),[c,d]=s.useState(0),u=!!(i&&c);return eL(n.scrollbarX,()=>{let e=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(e),d(e)}),eL(n.scrollbarY,()=>{let e=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(e),o(e)}),u?(0,a.jsx)(P.sG.div,{...l,ref:t,style:{width:i,height:c,position:"absolute",right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:0,...e.style}}):null});function eS(e){return e?parseInt(e,10):0}function eT(e,t){let r=e/t;return isNaN(r)?0:r}function eR(e){let t=eT(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function eI(e,t,r="ltr"){let a=eR(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=t.scrollbar.size-s,n=t.content-t.viewport,i=et(e,"ltr"===r?[0,n]:[-1*n,0]);return eD([0,n],[0,l-a])(i)}function eD(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(r-e[0])}}var eE=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},a=0;return!function s(){let l={left:e.scrollLeft,top:e.scrollTop},n=r.left!==l.left,i=r.top!==l.top;(n||i)&&t(),r=l,a=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(a)};function eP(e,t){let r=(0,J.c)(e),a=s.useRef(0);return s.useEffect(()=>()=>window.clearTimeout(a.current),[]),s.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,t)},[r,t])}function eL(e,t){let r=(0,J.c)(t);(0,ee.N)(()=>{let t=0;if(e){let a=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(t),a.unobserve(e)}}},[e,r])}var ez=r(51215),eM=r(9510),e_=r(31355),eA=r(1359),eO=r(32547),eF=r(96963),eU=r(55509),eH=r(25028),eV=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});s.forwardRef((e,t)=>(0,a.jsx)(P.sG.span,{...e,ref:t,style:{...eV,...e.style}})).displayName="VisuallyHidden";var eB=r(63376),eG=r(42247),eq=[" ","Enter","ArrowUp","ArrowDown"],eW=[" ","Enter"],e$="Select",[eK,eQ,eX]=(0,eM.N)(e$),[eY,eJ]=(0,S.A)(e$,[eX,eU.Bk]),eZ=(0,eU.Bk)(),[e0,e1]=eY(e$),[e2,e5]=eY(e$),e4=e=>{let{__scopeSelect:t,children:r,open:l,defaultOpen:n,onOpenChange:i,value:o,defaultValue:c,onValueChange:d,dir:u,name:h,autoComplete:p,disabled:x,required:m,form:g}=e,f=eZ(t),[v,b]=s.useState(null),[j,y]=s.useState(null),[w,N]=s.useState(!1),k=(0,Z.jH)(u),[C,S]=(0,R.i)({prop:l,defaultProp:n??!1,onChange:i,caller:e$}),[T,I]=(0,R.i)({prop:o,defaultProp:c,onChange:d,caller:e$}),D=s.useRef(null),E=!v||g||!!v.closest("form"),[P,L]=s.useState(new Set),z=Array.from(P).map(e=>e.props.value).join(";");return(0,a.jsx)(eU.bL,{...f,children:(0,a.jsxs)(e0,{required:m,scope:t,trigger:v,onTriggerChange:b,valueNode:j,onValueNodeChange:y,valueNodeHasChildren:w,onValueNodeHasChildrenChange:N,contentId:(0,eF.B)(),value:T,onValueChange:I,open:C,onOpenChange:S,dir:k,triggerPointerDownPosRef:D,disabled:x,children:[(0,a.jsx)(eK.Provider,{scope:t,children:(0,a.jsx)(e2,{scope:e.__scopeSelect,onNativeOptionAdd:s.useCallback(e=>{L(t=>new Set(t).add(e))},[]),onNativeOptionRemove:s.useCallback(e=>{L(t=>{let r=new Set(t);return r.delete(e),r})},[]),children:r})}),E?(0,a.jsxs)(tP,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:p,value:T,onChange:e=>I(e.target.value),disabled:x,form:g,children:[void 0===T?(0,a.jsx)("option",{value:""}):null,Array.from(P)]},z):null]})})};e4.displayName=e$;var e3="SelectTrigger",e6=s.forwardRef((e,t)=>{let{__scopeSelect:r,disabled:l=!1,...n}=e,i=eZ(r),o=e1(e3,r),c=o.disabled||l,d=(0,C.s)(t,o.onTriggerChange),u=eQ(r),h=s.useRef("touch"),[p,x,m]=tz(e=>{let t=u().filter(e=>!e.disabled),r=t.find(e=>e.value===o.value),a=tM(t,e,r);void 0!==a&&o.onValueChange(a.value)}),g=e=>{c||(o.onOpenChange(!0),m()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,a.jsx)(eU.Mz,{asChild:!0,...i,children:(0,a.jsx)(P.sG.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":tL(o.value)?"":void 0,...n,ref:d,onClick:(0,T.m)(n.onClick,e=>{e.currentTarget.focus(),"mouse"!==h.current&&g(e)}),onPointerDown:(0,T.m)(n.onPointerDown,e=>{h.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(g(e),e.preventDefault())}),onKeyDown:(0,T.m)(n.onKeyDown,e=>{let t=""!==p.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||x(e.key),(!t||" "!==e.key)&&eq.includes(e.key)&&(g(),e.preventDefault())})})})});e6.displayName=e3;var e8="SelectValue",e9=s.forwardRef((e,t)=>{let{__scopeSelect:r,className:s,style:l,children:n,placeholder:i="",...o}=e,c=e1(e8,r),{onValueNodeHasChildrenChange:d}=c,u=void 0!==n,h=(0,C.s)(t,c.onValueNodeChange);return(0,ee.N)(()=>{d(u)},[d,u]),(0,a.jsx)(P.sG.span,{...o,ref:h,style:{pointerEvents:"none"},children:tL(c.value)?(0,a.jsx)(a.Fragment,{children:i}):n})});e9.displayName=e8;var e7=s.forwardRef((e,t)=>{let{__scopeSelect:r,children:s,...l}=e;return(0,a.jsx)(P.sG.span,{"aria-hidden":!0,...l,ref:t,children:s||"▼"})});e7.displayName="SelectIcon";var te=e=>(0,a.jsx)(eH.Z,{asChild:!0,...e});te.displayName="SelectPortal";var tt="SelectContent",tr=s.forwardRef((e,t)=>{let r=e1(tt,e.__scopeSelect),[l,n]=s.useState();return((0,ee.N)(()=>{n(new DocumentFragment)},[]),r.open)?(0,a.jsx)(tn,{...e,ref:t}):l?ez.createPortal((0,a.jsx)(ta,{scope:e.__scopeSelect,children:(0,a.jsx)(eK.Slot,{scope:e.__scopeSelect,children:(0,a.jsx)("div",{children:e.children})})}),l):null});tr.displayName=tt;var[ta,ts]=eY(tt),tl=(0,l.TL)("SelectContent.RemoveScroll"),tn=s.forwardRef((e,t)=>{let{__scopeSelect:r,position:l="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:o,side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:p,collisionBoundary:x,collisionPadding:m,sticky:g,hideWhenDetached:f,avoidCollisions:v,...b}=e,j=e1(tt,r),[y,w]=s.useState(null),[N,k]=s.useState(null),S=(0,C.s)(t,e=>w(e)),[R,I]=s.useState(null),[D,E]=s.useState(null),P=eQ(r),[L,z]=s.useState(!1),M=s.useRef(!1);s.useEffect(()=>{if(y)return(0,eB.Eq)(y)},[y]),(0,eA.Oh)();let _=s.useCallback(e=>{let[t,...r]=P().map(e=>e.ref.current),[a]=r.slice(-1),s=document.activeElement;for(let r of e)if(r===s||(r?.scrollIntoView({block:"nearest"}),r===t&&N&&(N.scrollTop=0),r===a&&N&&(N.scrollTop=N.scrollHeight),r?.focus(),document.activeElement!==s))return},[P,N]),A=s.useCallback(()=>_([R,y]),[_,R,y]);s.useEffect(()=>{L&&A()},[L,A]);let{onOpenChange:O,triggerPointerDownPosRef:F}=j;s.useEffect(()=>{if(y){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(F.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(F.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():y.contains(r.target)||O(!1),document.removeEventListener("pointermove",t),F.current=null};return null!==F.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[y,O,F]),s.useEffect(()=>{let e=()=>O(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[O]);let[U,H]=tz(e=>{let t=P().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),a=tM(t,e,r);a&&setTimeout(()=>a.ref.current.focus())}),V=s.useCallback((e,t,r)=>{let a=!M.current&&!r;(void 0!==j.value&&j.value===t||a)&&(I(e),a&&(M.current=!0))},[j.value]),B=s.useCallback(()=>y?.focus(),[y]),G=s.useCallback((e,t,r)=>{let a=!M.current&&!r;(void 0!==j.value&&j.value===t||a)&&E(e)},[j.value]),q="popper"===l?to:ti,W=q===to?{side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:p,collisionBoundary:x,collisionPadding:m,sticky:g,hideWhenDetached:f,avoidCollisions:v}:{};return(0,a.jsx)(ta,{scope:r,content:y,viewport:N,onViewportChange:k,itemRefCallback:V,selectedItem:R,onItemLeave:B,itemTextRefCallback:G,focusSelectedItem:A,selectedItemText:D,position:l,isPositioned:L,searchRef:U,children:(0,a.jsx)(eG.A,{as:tl,allowPinchZoom:!0,children:(0,a.jsx)(eO.n,{asChild:!0,trapped:j.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,T.m)(n,e=>{j.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,a.jsx)(e_.qW,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:(0,a.jsx)(q,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:e=>e.preventDefault(),...b,...W,onPlaced:()=>z(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:(0,T.m)(b.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||H(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=P().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let r=e.target,a=t.indexOf(r);t=t.slice(a+1)}setTimeout(()=>_(t)),e.preventDefault()}})})})})})})});tn.displayName="SelectContentImpl";var ti=s.forwardRef((e,t)=>{let{__scopeSelect:r,onPlaced:l,...n}=e,i=e1(tt,r),o=ts(tt,r),[c,d]=s.useState(null),[u,h]=s.useState(null),p=(0,C.s)(t,e=>h(e)),x=eQ(r),m=s.useRef(!1),g=s.useRef(!0),{viewport:f,selectedItem:v,selectedItemText:b,focusSelectedItem:j}=o,y=s.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&u&&f&&v&&b){let e=i.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),r=i.valueNode.getBoundingClientRect(),a=b.getBoundingClientRect();if("rtl"!==i.dir){let s=a.left-t.left,l=r.left-s,n=e.left-l,i=e.width+n,o=Math.max(i,t.width),d=et(l,[10,Math.max(10,window.innerWidth-10-o)]);c.style.minWidth=i+"px",c.style.left=d+"px"}else{let s=t.right-a.right,l=window.innerWidth-r.right-s,n=window.innerWidth-e.right-l,i=e.width+n,o=Math.max(i,t.width),d=et(l,[10,Math.max(10,window.innerWidth-10-o)]);c.style.minWidth=i+"px",c.style.right=d+"px"}let s=x(),n=window.innerHeight-20,o=f.scrollHeight,d=window.getComputedStyle(u),h=parseInt(d.borderTopWidth,10),p=parseInt(d.paddingTop,10),g=parseInt(d.borderBottomWidth,10),j=h+p+o+parseInt(d.paddingBottom,10)+g,y=Math.min(5*v.offsetHeight,j),w=window.getComputedStyle(f),N=parseInt(w.paddingTop,10),k=parseInt(w.paddingBottom,10),C=e.top+e.height/2-10,S=v.offsetHeight/2,T=h+p+(v.offsetTop+S);if(T<=C){let e=s.length>0&&v===s[s.length-1].ref.current;c.style.bottom="0px";let t=Math.max(n-C,S+(e?k:0)+(u.clientHeight-f.offsetTop-f.offsetHeight)+g);c.style.height=T+t+"px"}else{let e=s.length>0&&v===s[0].ref.current;c.style.top="0px";let t=Math.max(C,h+f.offsetTop+(e?N:0)+S);c.style.height=t+(j-T)+"px",f.scrollTop=T-C+f.offsetTop}c.style.margin="10px 0",c.style.minHeight=y+"px",c.style.maxHeight=n+"px",l?.(),requestAnimationFrame(()=>m.current=!0)}},[x,i.trigger,i.valueNode,c,u,f,v,b,i.dir,l]);(0,ee.N)(()=>y(),[y]);let[w,N]=s.useState();(0,ee.N)(()=>{u&&N(window.getComputedStyle(u).zIndex)},[u]);let k=s.useCallback(e=>{e&&!0===g.current&&(y(),j?.(),g.current=!1)},[y,j]);return(0,a.jsx)(tc,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:m,onScrollButtonChange:k,children:(0,a.jsx)("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:(0,a.jsx)(P.sG.div,{...n,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});ti.displayName="SelectItemAlignedPosition";var to=s.forwardRef((e,t)=>{let{__scopeSelect:r,align:s="start",collisionPadding:l=10,...n}=e,i=eZ(r);return(0,a.jsx)(eU.UC,{...i,...n,ref:t,align:s,collisionPadding:l,style:{boxSizing:"border-box",...n.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});to.displayName="SelectPopperPosition";var[tc,td]=eY(tt,{}),tu="SelectViewport",th=s.forwardRef((e,t)=>{let{__scopeSelect:r,nonce:l,...n}=e,i=ts(tu,r),o=td(tu,r),c=(0,C.s)(t,i.onViewportChange),d=s.useRef(0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),(0,a.jsx)(eK.Slot,{scope:r,children:(0,a.jsx)(P.sG.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:(0,T.m)(n.onScroll,e=>{let t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:a}=o;if(a?.current&&r){let e=Math.abs(d.current-t.scrollTop);if(e>0){let a=window.innerHeight-20,s=Math.max(parseFloat(r.style.minHeight),parseFloat(r.style.height));if(s<a){let l=s+e,n=Math.min(a,l),i=l-n;r.style.height=n+"px","0px"===r.style.bottom&&(t.scrollTop=i>0?i:0,r.style.justifyContent="flex-end")}}}d.current=t.scrollTop})})})]})});th.displayName=tu;var tp="SelectGroup",[tx,tm]=eY(tp),tg=s.forwardRef((e,t)=>{let{__scopeSelect:r,...s}=e,l=(0,eF.B)();return(0,a.jsx)(tx,{scope:r,id:l,children:(0,a.jsx)(P.sG.div,{role:"group","aria-labelledby":l,...s,ref:t})})});tg.displayName=tp;var tf="SelectLabel",tv=s.forwardRef((e,t)=>{let{__scopeSelect:r,...s}=e,l=tm(tf,r);return(0,a.jsx)(P.sG.div,{id:l.id,...s,ref:t})});tv.displayName=tf;var tb="SelectItem",[tj,ty]=eY(tb),tw=s.forwardRef((e,t)=>{let{__scopeSelect:r,value:l,disabled:n=!1,textValue:i,...o}=e,c=e1(tb,r),d=ts(tb,r),u=c.value===l,[h,p]=s.useState(i??""),[x,m]=s.useState(!1),g=(0,C.s)(t,e=>d.itemRefCallback?.(e,l,n)),f=(0,eF.B)(),v=s.useRef("touch"),b=()=>{n||(c.onValueChange(l),c.onOpenChange(!1))};if(""===l)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,a.jsx)(tj,{scope:r,value:l,disabled:n,textId:f,isSelected:u,onItemTextChange:s.useCallback(e=>{p(t=>t||(e?.textContent??"").trim())},[]),children:(0,a.jsx)(eK.ItemSlot,{scope:r,value:l,disabled:n,textValue:h,children:(0,a.jsx)(P.sG.div,{role:"option","aria-labelledby":f,"data-highlighted":x?"":void 0,"aria-selected":u&&x,"data-state":u?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...o,ref:g,onFocus:(0,T.m)(o.onFocus,()=>m(!0)),onBlur:(0,T.m)(o.onBlur,()=>m(!1)),onClick:(0,T.m)(o.onClick,()=>{"mouse"!==v.current&&b()}),onPointerUp:(0,T.m)(o.onPointerUp,()=>{"mouse"===v.current&&b()}),onPointerDown:(0,T.m)(o.onPointerDown,e=>{v.current=e.pointerType}),onPointerMove:(0,T.m)(o.onPointerMove,e=>{v.current=e.pointerType,n?d.onItemLeave?.():"mouse"===v.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,T.m)(o.onPointerLeave,e=>{e.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:(0,T.m)(o.onKeyDown,e=>{(d.searchRef?.current===""||" "!==e.key)&&(eW.includes(e.key)&&b()," "===e.key&&e.preventDefault())})})})})});tw.displayName=tb;var tN="SelectItemText",tk=s.forwardRef((e,t)=>{let{__scopeSelect:r,className:l,style:n,...i}=e,o=e1(tN,r),c=ts(tN,r),d=ty(tN,r),u=e5(tN,r),[h,p]=s.useState(null),x=(0,C.s)(t,e=>p(e),d.onItemTextChange,e=>c.itemTextRefCallback?.(e,d.value,d.disabled)),m=h?.textContent,g=s.useMemo(()=>(0,a.jsx)("option",{value:d.value,disabled:d.disabled,children:m},d.value),[d.disabled,d.value,m]),{onNativeOptionAdd:f,onNativeOptionRemove:v}=u;return(0,ee.N)(()=>(f(g),()=>v(g)),[f,v,g]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.sG.span,{id:d.textId,...i,ref:x}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ez.createPortal(i.children,o.valueNode):null]})});tk.displayName=tN;var tC="SelectItemIndicator",tS=s.forwardRef((e,t)=>{let{__scopeSelect:r,...s}=e;return ty(tC,r).isSelected?(0,a.jsx)(P.sG.span,{"aria-hidden":!0,...s,ref:t}):null});tS.displayName=tC;var tT="SelectScrollUpButton";s.forwardRef((e,t)=>{let r=ts(tT,e.__scopeSelect),l=td(tT,e.__scopeSelect),[n,i]=s.useState(!1),o=(0,C.s)(t,l.onScrollButtonChange);return(0,ee.N)(()=>{if(r.viewport&&r.isPositioned){let e=function(){i(t.scrollTop>0)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),n?(0,a.jsx)(tI,{...e,ref:o,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null}).displayName=tT;var tR="SelectScrollDownButton";s.forwardRef((e,t)=>{let r=ts(tR,e.__scopeSelect),l=td(tR,e.__scopeSelect),[n,i]=s.useState(!1),o=(0,C.s)(t,l.onScrollButtonChange);return(0,ee.N)(()=>{if(r.viewport&&r.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;i(Math.ceil(t.scrollTop)<e)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),n?(0,a.jsx)(tI,{...e,ref:o,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null}).displayName=tR;var tI=s.forwardRef((e,t)=>{let{__scopeSelect:r,onAutoScroll:l,...n}=e,i=ts("SelectScrollButton",r),o=s.useRef(null),c=eQ(r),d=s.useCallback(()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)},[]);return s.useEffect(()=>()=>d(),[d]),(0,ee.N)(()=>{let e=c().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[c]),(0,a.jsx)(P.sG.div,{"aria-hidden":!0,...n,ref:t,style:{flexShrink:0,...n.style},onPointerDown:(0,T.m)(n.onPointerDown,()=>{null===o.current&&(o.current=window.setInterval(l,50))}),onPointerMove:(0,T.m)(n.onPointerMove,()=>{i.onItemLeave?.(),null===o.current&&(o.current=window.setInterval(l,50))}),onPointerLeave:(0,T.m)(n.onPointerLeave,()=>{d()})})}),tD=s.forwardRef((e,t)=>{let{__scopeSelect:r,...s}=e;return(0,a.jsx)(P.sG.div,{"aria-hidden":!0,...s,ref:t})});tD.displayName="SelectSeparator";var tE="SelectArrow";s.forwardRef((e,t)=>{let{__scopeSelect:r,...s}=e,l=eZ(r),n=e1(tE,r),i=ts(tE,r);return n.open&&"popper"===i.position?(0,a.jsx)(eU.i3,{...l,...s,ref:t}):null}).displayName=tE;var tP=s.forwardRef(({__scopeSelect:e,value:t,...r},l)=>{let n=s.useRef(null),i=(0,C.s)(l,n),o=I(t);return s.useEffect(()=>{let e=n.current;if(!e)return;let r=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(o!==t&&r){let a=new Event("change",{bubbles:!0});r.call(e,t),e.dispatchEvent(a)}},[o,t]),(0,a.jsx)(P.sG.select,{...r,style:{...eV,...r.style},ref:i,defaultValue:t})});function tL(e){return""===e||void 0===e}function tz(e){let t=(0,J.c)(e),r=s.useRef(""),a=s.useRef(0),l=s.useCallback(e=>{let s=r.current+e;t(s),function e(t){r.current=t,window.clearTimeout(a.current),""!==t&&(a.current=window.setTimeout(()=>e(""),1e3))}(s)},[t]),n=s.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return s.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,l,n]}function tM(e,t,r){var a,s;let l=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,n=r?e.indexOf(r):-1,i=(a=e,s=Math.max(n,0),a.map((e,t)=>a[(s+t)%a.length]));1===l.length&&(i=i.filter(e=>e!==r));let o=i.find(e=>e.textValue.toLowerCase().startsWith(l.toLowerCase()));return o!==r?o:void 0}tP.displayName="SelectBubbleInput";var t_=r(24551);let tA=(0,i.tv)({slots:{triggerRoot:["group/trigger min-w-0 shrink-0 bg-bg-white-0 shadow-regular-xs outline-none ring-1 ring-inset ring-stroke-soft-200","text-paragraph-md font-styrene text-text-strong-950","flex items-center text-left","transition duration-200 ease-out","hover:bg-bg-weak-50 hover:ring-transparent","focus:shadow-button-important-focus focus:outline-none focus:ring-stroke-strong-950","focus:text-text-strong-950 data-[placeholder]:focus:text-text-strong-950","disabled:pointer-events-none disabled:bg-bg-weak-50 disabled:text-text-disabled-300 disabled:shadow-none disabled:ring-transparent data-[placeholder]:disabled:text-text-disabled-300","data-[placeholder]:text-text-sub-600"],triggerArrow:["ml-auto size-5 shrink-0","transition duration-200 ease-out","group-data-[placeholder]/trigger:text-text-soft-400","text-text-sub-600","group-hover/trigger:text-text-sub-600 group-data-[placeholder]/trigger:group-hover:text-text-sub-600","group-focus/trigger:text-text-strong-950 group-data-[placeholder]/trigger:group-focus/trigger:text-text-strong-950","group-disabled/trigger:text-text-disabled-300 group-data-[placeholder]/trigger:group-disabled/trigger:text-text-disabled-300","group-data-[state=open]/trigger:rotate-180"],triggerIcon:["h-5 w-auto min-w-0 shrink-0 object-contain text-text-sub-600","transition duration-200 ease-out","group-data-[placeholder]/trigger:text-text-soft-400","group-hover/trigger:text-text-sub-600 group-data-[placeholder]/trigger:group-hover:text-text-sub-600","group-disabled/trigger:text-text-disabled-300 group-data-[placeholder]/trigger:group-disabled/trigger:text-text-disabled-300","group-disabled/trigger:[&:not(.remixicon)]:opacity-[.48]"],selectItemIcon:["size-5 shrink-0 bg-[length:1.25rem] text-text-sub-600","[[data-disabled]_&:not(.remixicon)]:opacity-[.48] [[data-disabled]_&]:text-text-disabled-300"]},variants:{size:{medium:{},small:{},xsmall:{}},variant:{default:{triggerRoot:"w-full"},compact:{triggerRoot:"w-auto"},compactForInput:{triggerRoot:["w-auto rounded-none shadow-none ring-0","focus:bg-bg-weak-50 focus:shadow-none focus:ring-0 focus:ring-transparent"]},inline:{triggerRoot:["h-5 min-h-5 w-auto gap-0 rounded-none bg-transparent p-0 text-text-sub-600 shadow-none ring-0","hover:bg-transparent hover:text-text-strong-950","focus:shadow-none","data-[state=open]:text-text-strong-950"],triggerIcon:["mr-1.5 text-text-soft-400","group-hover/trigger:text-text-sub-600","group-data-[state=open]/trigger:text-text-sub-600"],triggerArrow:["ml-0.5","group-hover/trigger:text-text-strong-950","group-data-[state=open]/trigger:text-text-strong-950"],selectItemIcon:"text-text-soft-400 group-hover/trigger:text-text-sub-600"}},hasError:{true:{triggerRoot:["ring-error-base","focus:shadow-button-error-focus focus:ring-error-base"]}}},compoundVariants:[{size:"medium",variant:"default",class:{triggerRoot:"h-10 min-h-10 gap-2 rounded-10 pl-3 pr-2.5"}},{size:"small",variant:"default",class:{triggerRoot:"h-9 min-h-9 gap-2 rounded-lg pl-2.5 pr-2"}},{size:"xsmall",variant:"default",class:{triggerRoot:"h-8 min-h-8 gap-1.5 rounded-lg pl-2 pr-1.5"}},{size:"medium",variant:"compact",class:{triggerRoot:"h-10 gap-1 rounded-10 pl-3 pr-2.5",triggerIcon:"-ml-0.5",selectItemIcon:"group-has-[&]/trigger:-ml-0.5"}},{size:"small",variant:"compact",class:{triggerRoot:"h-9 gap-1 rounded-lg pl-3 pr-2",triggerIcon:"-ml-0.5",selectItemIcon:"group-has-[&]/trigger:-ml-0.5"}},{size:"xsmall",variant:"compact",class:{triggerRoot:"h-8 gap-0.5 rounded-lg pl-2.5 pr-1.5",triggerIcon:"-ml-0.5 size-4",selectItemIcon:"size-4 bg-[length:1rem] group-has-[&]/trigger:-ml-0.5"}},{size:"medium",variant:"compactForInput",class:{triggerRoot:"pl-2.5 pr-2",triggerIcon:"mr-2",triggerArrow:"ml-0.5"}},{size:"small",variant:"compactForInput",class:{triggerRoot:"px-2",triggerIcon:"mr-2",triggerArrow:"ml-0.5"}},{size:"xsmall",variant:"compactForInput",class:{triggerRoot:"pl-2 pr-1.5",triggerIcon:"mr-1.5 size-4",triggerArrow:"ml-0.5",selectItemIcon:"size-4 bg-[length:1rem]"}}],defaultVariants:{variant:"default",size:"medium"}}),tO=s.createContext({size:"medium",variant:"default",hasError:!1}),tF=()=>s.useContext(tO),tU=({size:e="medium",variant:t="default",hasError:r,...s})=>(0,a.jsx)(tO.Provider,{value:{size:e,variant:t,hasError:r},children:(0,a.jsx)(e4,{...s})});tU.displayName="SelectRoot",tg.displayName="SelectGroup",e9.displayName="SelectValue",tD.displayName="SelectSeparator",tv.displayName="SelectGroupLabel";let tH=s.forwardRef(({className:e,children:t,...r},s)=>{let{size:n,variant:i,hasError:o}=tF(),{triggerRoot:c,triggerArrow:d}=tA({size:n,variant:i,hasError:o});return(0,a.jsxs)(e6,{ref:s,className:c({class:e}),...r,children:[(0,a.jsx)(l.xV,{children:t}),(0,a.jsx)(e7,{asChild:!0,children:(0,a.jsx)(t_.eQr,{className:d()})})]})});tH.displayName="SelectTrigger";let tV=s.forwardRef(({className:e,position:t="popper",children:r,sideOffset:s=8,collisionPadding:l=8,...n},i)=>(0,a.jsx)(te,{children:(0,a.jsx)(tr,{ref:i,className:(0,j.cn)("relative z-50 overflow-hidden rounded-2xl bg-bg-white-0 shadow-regular-md ring-1 ring-inset ring-stroke-soft-200","min-w-[--radix-select-trigger-width] max-w-[max(var(--radix-select-trigger-width),320px)]","max-h-[--radix-select-content-available-height]","data-[state=open]:animate-in data-[state=open]:fade-in-0","data-[state=closed]:animate-out data-[state=closed]:fade-out-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=top]:slide-in-from-bottom-2",e),sideOffset:s,position:t,collisionPadding:l,...n,children:(0,a.jsxs)(ei,{type:"auto",children:[(0,a.jsx)(th,{asChild:!0,children:(0,a.jsx)(ec,{style:{overflowY:void 0},className:"max-h-[196px] w-full scroll-py-2 overflow-auto p-2",children:r})}),(0,a.jsx)(eu,{orientation:"vertical",children:(0,a.jsx)(ew,{className:"!w-1 rounded bg-bg-soft-200"})})]})})}));tV.displayName="SelectContent";let tB=s.forwardRef(({className:e,children:t,...r},s)=>{let{size:l}=tF();return(0,a.jsxs)(tw,{ref:s,className:(0,j.cn)("group relative cursor-pointer select-none rounded-lg p-2 pr-9 text-paragraph-md font-styrene text-text-strong-950","flex items-center gap-2 transition duration-200 ease-out","data-[disabled]:pointer-events-none data-[disabled]:text-text-disabled-300","data-[highlighted]:bg-bg-weak-50 data-[highlighted]:outline-0",{"gap-1.5 pr-[34px]":"xsmall"===l},e),...r,children:[(0,a.jsx)(tk,{asChild:!0,children:(0,a.jsx)("span",{className:(0,j.cn)("flex flex-1 items-center gap-2","group-disabled:text-text-disabled-300",{"gap-1.5":"xsmall"===l}),children:"string"==typeof t?(0,a.jsx)("span",{className:"line-clamp-1",children:t}):t})}),(0,a.jsx)(tS,{asChild:!0,children:(0,a.jsx)(t_.s0,{className:"absolute right-2 top-1/2 size-5 shrink-0 -translate-y-1/2 text-text-sub-600"})})]})});function tG({block:e,onChange:t,giftId:r}){let[l,n]=(0,s.useState)(e),[i,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)([]),u=e=>{let r={...l,...e};n(r),t(r)},h=async(e,t)=>{if(!r)return void alert("Сначала сохраните подарок с основными данными, затем вы сможете загружать файлы");o(!0);try{let a=new FormData;a.append("file",e),a.append("giftId",r),a.append("fileType","block");let s=await fetch("/api/upload",{method:"POST",body:a});if(s.ok){let{url:e}=await s.json();u({[t]:e})}else alert("Ошибка загрузки файла")}catch(e){console.error("Ошибка загрузки:",e),alert("Ошибка загрузки файла")}finally{o(!1)}};switch(e.type){case"text":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(b.b,{className:"mb-2 block text-paragraph-sm",children:["Текст ",(0,a.jsx)(b.n,{})]}),(0,a.jsx)(N,{value:l.content||"",onChange:e=>u({content:e.target.value}),placeholder:"Введите текст..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Стиль"}),(0,a.jsxs)(tU,{value:l.style||"normal",onValueChange:e=>u({style:e}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите стиль"})}),(0,a.jsx)(tV,{children:[{label:"Обычный текст",value:"normal"},{label:"Заголовок",value:"title"},{label:"Подзаголовок",value:"subtitle"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]})]});case"quote":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(b.b,{className:"mb-2 block text-paragraph-sm",children:["Текст цитаты ",(0,a.jsx)(b.n,{})]}),(0,a.jsx)(N,{value:l.content||"",onChange:e=>u({content:e.target.value}),placeholder:"Введите цитату..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Стиль цитаты"}),(0,a.jsxs)(tU,{value:l.style||"small",onValueChange:e=>u({style:e}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите стиль"})}),(0,a.jsx)(tV,{children:[{label:"Малый",value:"small"},{label:"Большой",value:"big"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]})]});case"image":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Заголовок"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.title||"",onChange:e=>u({title:e.target.value}),placeholder:"Заголовок блока"})})})]}),(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Текст"}),(0,a.jsx)(N,{value:l.text||"",onChange:e=>u({text:e.target.value}),placeholder:"Описание к изображению"})]}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsxs)("div",{className:"space-y-2",children:[l.url&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("img",{src:l.url,alt:"Превью",className:"h-40 rounded-lg border border-gray-300 object-cover"})}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&h(t,"url")},className:"block w-full font-styrene text-paragraph-sm font-medium uppercase text-gray-500 file:mr-4 file:rounded-md file:border-0 file:px-4 file:py-2 file:font-styrene file:text-paragraph-sm file:font-medium file:uppercase",disabled:i}),i&&(0,a.jsx)("div",{className:"text-blue-500 mt-1 text-xs",children:"Загрузка изображения..."}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{type:"url",value:l.url||"",onChange:e=>u({url:e.target.value}),placeholder:"Или введите URL изображения..."}),l.url&&(0,a.jsx)("button",{type:"button",onClick:()=>u({url:""}),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})})]})}),(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)(b.b,{className:"mb-3 block text-paragraph-sm",children:"Подпись под фото"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.caption||"",onChange:e=>u({caption:e.target.value}),placeholder:"Подпись под изображением"})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 pt-2 sm:grid-cols-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Расположение"}),(0,a.jsxs)(tU,{value:l.layout||"image-center",onValueChange:e=>u({layout:e}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите стиль"})}),(0,a.jsx)(tV,{children:[{label:"По центру",value:"image-center"},{label:"Слева",value:"image-left"},{label:"Справа",value:"image-right"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Размер"}),(0,a.jsxs)(tU,{value:l.size||"medium",onValueChange:e=>u({size:e}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите стиль"})}),(0,a.jsx)(tV,{children:[{label:"Маленький",value:"small"},{label:"Средний",value:"medium"},{label:"Большой",value:"large"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Ориентация"}),(0,a.jsxs)(tU,{value:l.orientation||"horizontal",onValueChange:e=>u({orientation:e}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите стиль"})}),(0,a.jsx)(tV,{children:[{label:"Горизонтальная",value:"horizontal"},{label:"Вертикальная",value:"vertical"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]})]})]});case"music":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-3 block text-paragraph-sm",children:"Заголовок"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.title||"",onChange:e=>u({title:e.target.value}),placeholder:"Заголовок блока"})})})]}),(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsxs)(b.b,{className:"mb-3 block text-paragraph-sm",children:["Аудио файл ",(0,a.jsx)(b.n,{})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"file",accept:"audio/*",onChange:e=>{let t=e.target.files?.[0];t&&h(t,"url")},className:"block w-full font-styrene text-paragraph-sm font-medium uppercase text-gray-500 file:mr-4 file:rounded-md file:border-0 file:px-4 file:py-2 file:font-styrene file:text-paragraph-sm file:font-medium file:uppercase",disabled:i}),i&&(0,a.jsx)("div",{className:"text-blue-500 mt-1 text-xs",children:"Загрузка аудио..."}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{type:"url",value:l.url||"",onChange:e=>u({url:e.target.value}),placeholder:"Или введите URL аудио файла"}),l.url&&(0,a.jsx)("button",{type:"button",onClick:()=>u({url:""}),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})})]})]}),(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsxs)(b.b,{className:"mb-3 block text-paragraph-sm",children:["Обложка ",(0,a.jsx)(b.n,{})]}),l.coverUrl&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("img",{src:l.coverUrl,alt:"Обложка",className:"h-20 w-20 rounded-lg border border-gray-300 object-cover"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&h(t,"coverUrl")},className:"block w-full font-styrene text-paragraph-sm font-medium uppercase text-gray-500 file:mr-4 file:rounded-md file:border-0 file:px-4 file:py-2 file:font-styrene file:text-paragraph-sm file:font-medium file:uppercase",disabled:i}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{type:"url",value:l.coverUrl||"",onChange:e=>u({coverUrl:e.target.value}),placeholder:"URL обложки"}),l.coverUrl&&(0,a.jsx)("button",{type:"button",onClick:()=>u({coverUrl:""}),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 pt-2 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-3 block text-paragraph-sm",children:"Исполнитель"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.artist||"",onChange:e=>u({artist:e.target.value}),placeholder:"Имя исполнителя"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-3 block text-paragraph-sm",children:"Название трека"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.trackName||"",onChange:e=>u({trackName:e.target.value}),placeholder:"Название песни"})})})]})]})]});case"two-images":let f=l.images||[{url:"",title:"",text:"",caption:"",layout:"text-top"},{url:"",title:"",text:"",caption:"",layout:"text-top"}],v=e=>{u({images:e})},j=(e,t,r)=>{let a=[...f];a[e]={...a[e],[t]:r},v(a)},y=async(e,t)=>{if(!r)return void alert("Сначала сохраните подарок с основными данными, затем вы сможете загружать файлы");d(e=>[...e,t]);try{let a=new FormData;a.append("file",e),a.append("giftId",r),a.append("fileType","block");let s=await fetch("/api/upload",{method:"POST",body:a});if(s.ok){let{url:e}=await s.json();j(t,"url",e)}else alert("Ошибка загрузки файла")}catch(e){console.error("Ошибка загрузки:",e),alert("Ошибка загрузки файла")}finally{d(e=>e.filter(e=>e!==t))}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Размер"}),(0,a.jsxs)(tU,{value:l.size||"medium",onValueChange:e=>u({size:e}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите размер"})}),(0,a.jsx)(tV,{children:[{label:"Маленький",value:"small"},{label:"Средний",value:"medium"},{label:"Большой",value:"large"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Ориентация"}),(0,a.jsxs)(tU,{value:l.orientation||"horizontal",onValueChange:e=>u({orientation:e}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите ориентацию"})}),(0,a.jsx)(tV,{children:[{label:"Горизонтальная",value:"horizontal"},{label:"Вертикальная",value:"vertical"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]})]}),(0,a.jsxs)("div",{className:"rounded-md border border-gray-200 p-4",children:[(0,a.jsx)("h3",{className:"mb-4 font-styrene text-lg font-medium",children:"Изображение 1"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[f[0]?.url&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("img",{src:f[0].url,alt:"Превью",className:"h-40 rounded-lg border border-gray-300 object-cover"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&y(t,0)},className:"block w-full font-styrene text-paragraph-sm font-medium uppercase text-gray-500 file:mr-4 file:rounded-md file:border-0 file:px-4 file:py-2 file:font-styrene file:text-paragraph-sm file:font-medium file:uppercase",disabled:c.includes(0)}),c.includes(0)&&(0,a.jsx)("div",{className:"text-blue-500 mt-1 text-xs",children:"Загрузка изображения..."}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{type:"url",value:f[0]?.url||"",onChange:e=>j(0,"url",e.target.value),placeholder:"Или введите URL изображения..."}),f[0]?.url&&(0,a.jsx)("button",{type:"button",onClick:()=>j(0,"url",""),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Заголовок"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:f[0]?.title||"",onChange:e=>j(0,"title",e.target.value),placeholder:"Заголовок изображения"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Текст"}),(0,a.jsx)(N,{value:f[0]?.text||"",onChange:e=>j(0,"text",e.target.value),placeholder:"Описание изображения"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Подпись"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:f[0]?.caption||"",onChange:e=>j(0,"caption",e.target.value),placeholder:"Подпись под изображением"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Расположение текста"}),(0,a.jsxs)(tU,{value:f[0]?.layout||"text-top",onValueChange:e=>j(0,"layout",e),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите расположение"})}),(0,a.jsx)(tV,{children:[{label:"Текст сверху",value:"text-top"},{label:"Текст снизу",value:"text-bottom"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]})]})]}),(0,a.jsxs)("div",{className:"rounded-md border border-gray-200 p-4",children:[(0,a.jsx)("h3",{className:"mb-4 font-styrene text-lg font-medium",children:"Изображение 2"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[f[1]?.url&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("img",{src:f[1].url,alt:"Превью",className:"h-40 rounded-lg border border-gray-300 object-cover"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&y(t,1)},className:"block w-full font-styrene text-paragraph-sm font-medium uppercase text-gray-500 file:mr-4 file:rounded-md file:border-0 file:px-4 file:py-2 file:font-styrene file:text-paragraph-sm file:font-medium file:uppercase",disabled:c.includes(1)}),c.includes(1)&&(0,a.jsx)("div",{className:"text-blue-500 mt-1 text-xs",children:"Загрузка изображения..."}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{type:"url",value:f[1]?.url||"",onChange:e=>j(1,"url",e.target.value),placeholder:"Или введите URL изображения..."}),f[1]?.url&&(0,a.jsx)("button",{type:"button",onClick:()=>j(1,"url",""),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Заголовок"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:f[1]?.title||"",onChange:e=>j(1,"title",e.target.value),placeholder:"Заголовок изображения"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Текст"}),(0,a.jsx)(N,{value:f[1]?.text||"",onChange:e=>j(1,"text",e.target.value),placeholder:"Описание изображения"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Подпись"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:f[1]?.caption||"",onChange:e=>j(1,"caption",e.target.value),placeholder:"Подпись под изображением"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Расположение текста"}),(0,a.jsxs)(tU,{value:f[1]?.layout||"text-top",onValueChange:e=>j(1,"layout",e),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите расположение"})}),(0,a.jsx)(tV,{children:[{label:"Текст сверху",value:"text-top"},{label:"Текст снизу",value:"text-bottom"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]})]})]})]});case"gallery":return(()=>{let e=l.images||[{url:"",caption:""}],t=e=>{u({images:e})},s=(r,a,s)=>{let l=[...e];l[r]={...l[r],[a]:s},t(l)},n=async(e,t)=>{if(!r)return void alert("Сначала сохраните подарок с основными данными, затем вы сможете загружать файлы");d(e=>[...e,t]);try{let a=new FormData;a.append("file",e),a.append("giftId",r),a.append("fileType","block");let l=await fetch("/api/upload",{method:"POST",body:a});if(l.ok){let{url:e}=await l.json();s(t,"url",e)}else alert("Ошибка загрузки файла")}catch(e){console.error("Ошибка загрузки:",e),alert("Ошибка загрузки файла")}finally{d(e=>e.filter(e=>e!==t))}},i=r=>{t(e.filter((e,t)=>t!==r))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Заголовок галереи"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.title||"",onChange:e=>u({title:e.target.value}),placeholder:"Заголовок галереи"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Текст галереи"}),(0,a.jsx)(N,{value:l.text||"",onChange:e=>u({text:e.target.value}),placeholder:"Описание галереи"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Размер текста"}),(0,a.jsxs)(tU,{value:l.textSize||"small",onValueChange:e=>u({textSize:e}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите размер текста"})}),(0,a.jsx)(tV,{children:[{label:"Маленький",value:"small"},{label:"Большой",value:"medium"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Количество колонок"}),(0,a.jsxs)(tU,{value:String(l.columns||2),onValueChange:e=>u({columns:Number(e)}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите количество колонок"})}),(0,a.jsx)(tV,{children:[{label:"2 колонки",value:"2"},{label:"3 колонки",value:"3"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]}),(0,a.jsxs)("div",{className:"rounded-md border border-gray-200 bg-white p-4",children:[(0,a.jsx)("div",{className:"mb-4 flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)(b.b,{className:"block text-paragraph-sm",children:["Изображения галереи ",(0,a.jsx)(b.n,{})]}),(0,a.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[e.length," из 6 изображений"]})]})}),e.map((t,r)=>(0,a.jsxs)("div",{className:"mb-6 rounded-md border border-gray-200 bg-white p-4",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"font-styrene text-paragraph-sm font-medium uppercase",children:["Изображение ",r+1]}),e.length>1&&(0,a.jsx)("button",{type:"button",onClick:()=>i(r),className:"rounded-md border border-red-300 bg-red-50 px-2 py-1 text-xs font-medium text-red-600",children:"Удалить"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[t.url&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("img",{src:t.url,alt:`Превью ${r+1}`,className:"h-40 rounded-lg border border-gray-300 object-cover"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&n(t,r)},className:"block w-full font-styrene text-paragraph-sm font-medium uppercase text-gray-500 file:mr-4 file:rounded-md file:border-0 file:px-4 file:py-2 file:font-styrene file:text-paragraph-sm file:font-medium file:uppercase",disabled:c.includes(r)}),c.includes(r)&&(0,a.jsx)("div",{className:"text-blue-500 mt-1 text-xs",children:"Загрузка изображения..."}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{type:"url",value:t.url||"",onChange:e=>s(r,"url",e.target.value),placeholder:"Или введите URL изображения..."}),t.url&&(0,a.jsx)("button",{type:"button",onClick:()=>s(r,"url",""),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Подпись"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:t.caption||"",onChange:e=>s(r,"caption",e.target.value),placeholder:"Подпись под изображением"})})})]})]})]},r)),(0,a.jsx)("div",{className:"mt-4 flex justify-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>{e.length<6&&t([...e,{url:"",caption:""}])},className:`rounded-md px-4 py-2 text-sm font-medium ${e.length>=6?"cursor-not-allowed bg-neutral-200 text-gray-500":"hover:bg-primary-600 bg-bg-strong-950 text-white"}`,disabled:e.length>=6,children:e.length>=6?"Достигнут лимит изображений (6)":"Добавить еще изображение"})})]})]})})();case"video-circle":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Заголовок"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.title||"",onChange:e=>u({title:e.target.value}),placeholder:"Заголовок блока"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Текст"}),(0,a.jsx)(N,{value:l.text||"",onChange:e=>u({text:e.target.value}),placeholder:"Описание к видео"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Размер текста"}),(0,a.jsxs)(tU,{value:l.textSize||"small",onValueChange:e=>u({textSize:e}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите размер текста"})}),(0,a.jsx)(tV,{children:[{label:"Маленький",value:"small"},{label:"Большой",value:"medium"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]}),(0,a.jsx)("div",{className:"pt-0",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{let t=e.target.files?.[0];t&&h(t,"url")},className:"block w-full font-styrene text-paragraph-sm font-medium uppercase text-gray-500 file:mr-4 file:rounded-md file:border-0 file:px-4 file:py-2 file:font-styrene file:text-paragraph-sm file:font-medium file:uppercase",disabled:i}),i&&(0,a.jsx)("div",{className:"text-blue-500 mt-1 text-xs",children:"Загрузка видео..."}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{type:"url",value:l.url||"",onChange:e=>u({url:e.target.value}),placeholder:"Или введите URL видео..."}),l.url&&(0,a.jsx)("button",{type:"button",onClick:()=>u({url:""}),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})})]})}),(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)(b.b,{className:"mb-3 block text-paragraph-sm",children:"Подпись под видео"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.caption||"",onChange:e=>u({caption:e.target.value}),placeholder:"Подпись под видео"})})})]}),(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Размер видеокружка"}),(0,a.jsxs)(tU,{value:l.size||"medium",onValueChange:e=>u({size:e}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите размер"})}),(0,a.jsx)(tV,{children:[{label:"Маленький",value:"small"},{label:"Средний",value:"medium"},{label:"Большой",value:"large"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(X,{id:"autoplay",checked:l.autoplay||!1,onCheckedChange:e=>u({autoplay:e})}),(0,a.jsx)(b.b,{className:"font-styrene text-paragraph-sm font-medium text-text-strong-950",htmlFor:"autoplay",children:"Автовоспроизведение"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(X,{id:"muted",checked:!1!==l.muted,onCheckedChange:e=>u({muted:e})}),(0,a.jsx)(b.b,{className:"font-styrene text-paragraph-sm font-medium text-text-strong-950",htmlFor:"muted",children:"Без звука"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(X,{id:"loop",checked:!1!==l.loop,onCheckedChange:e=>u({loop:e})}),(0,a.jsx)(b.b,{className:"font-styrene text-paragraph-sm font-medium text-text-strong-950",htmlFor:"loop",children:"Зацикленное воспроизведение"})]})]})]});case"video":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Заголовок"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.title||"",onChange:e=>u({title:e.target.value}),placeholder:"Заголовок блока"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Текст"}),(0,a.jsx)(N,{value:l.text||"",onChange:e=>u({text:e.target.value}),placeholder:"Описание к видео"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Размер текста"}),(0,a.jsxs)(tU,{value:l.textSize||"small",onValueChange:e=>u({textSize:e}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите размер текста"})}),(0,a.jsx)(tV,{children:[{label:"Маленький",value:"small"},{label:"Большой",value:"medium"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]}),(0,a.jsx)("div",{className:"pt-0",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{let t=e.target.files?.[0];t&&h(t,"url")},className:"block w-full font-styrene text-paragraph-sm font-medium uppercase text-gray-500 file:mr-4 file:rounded-md file:border-0 file:px-4 file:py-2 file:font-styrene file:text-paragraph-sm file:font-medium file:uppercase",disabled:i}),i&&(0,a.jsx)("div",{className:"text-blue-500 mt-1 text-xs",children:"Загрузка видео..."}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{type:"url",value:l.url||"",onChange:e=>u({url:e.target.value}),placeholder:"Или введите URL видео..."}),l.url&&(0,a.jsx)("button",{type:"button",onClick:()=>u({url:""}),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})})]})}),(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)(b.b,{className:"mb-3 block text-paragraph-sm",children:"Подпись под видео"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.caption||"",onChange:e=>u({caption:e.target.value}),placeholder:"Подпись под видео"})})})]}),(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Размер видео"}),(0,a.jsxs)(tU,{value:l.size||"medium",onValueChange:e=>u({size:e}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите размер"})}),(0,a.jsx)(tV,{children:[{label:"Маленький (1/2 ширины)",value:"small"},{label:"Средний (2/3 ширины)",value:"medium"},{label:"Большой (полная ширина)",value:"large"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(X,{id:"video-autoplay",checked:l.autoplay||!1,onCheckedChange:e=>u({autoplay:e})}),(0,a.jsx)(b.b,{className:"font-styrene text-paragraph-sm font-medium text-text-strong-950",htmlFor:"video-autoplay",children:"Автовоспроизведение"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(X,{id:"video-muted",checked:!1!==l.muted,onCheckedChange:e=>u({muted:e})}),(0,a.jsx)(b.b,{className:"font-styrene text-paragraph-sm font-medium text-text-strong-950",htmlFor:"video-muted",children:"Без звука"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(X,{id:"video-loop",checked:l.loop||!1,onCheckedChange:e=>u({loop:e})}),(0,a.jsx)(b.b,{className:"font-styrene text-paragraph-sm font-medium text-text-strong-950",htmlFor:"video-loop",children:"Зацикленное воспроизведение"})]})]})]});case"audio-message":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Заголовок"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.title||"",onChange:e=>u({title:e.target.value}),placeholder:"Заголовок блока"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Текст"}),(0,a.jsx)(N,{value:l.text||"",onChange:e=>u({text:e.target.value}),placeholder:"Описание к голосовому сообщению"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-2 block text-paragraph-sm",children:"Размер текста"}),(0,a.jsxs)(tU,{value:l.textSize||"small",onValueChange:e=>u({textSize:e}),children:[(0,a.jsx)(tH,{children:(0,a.jsx)(e9,{placeholder:"Выберите размер текста"})}),(0,a.jsx)(tV,{children:[{label:"Маленький",value:"small"},{label:"Большой",value:"medium"}].map(({label:e,value:t})=>(0,a.jsx)(tB,{value:t,children:e},t))})]})]}),(0,a.jsx)("div",{className:"pt-0",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"file",accept:"audio/*",onChange:e=>{let t=e.target.files?.[0];t&&h(t,"url")},className:"block w-full font-styrene text-paragraph-sm font-medium uppercase text-gray-500 file:mr-4 file:rounded-md file:border-0 file:px-4 file:py-2 file:font-styrene file:text-paragraph-sm file:font-medium file:uppercase",disabled:i}),i&&(0,a.jsx)("div",{className:"text-blue-500 mt-1 text-xs",children:"Загрузка аудио..."}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{type:"url",value:l.url||"",onChange:e=>u({url:e.target.value}),placeholder:"Или введите URL аудио файла..."}),l.url&&(0,a.jsx)("button",{type:"button",onClick:()=>u({url:""}),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})})]})})]});default:return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"rounded-md border p-4",children:(0,a.jsxs)("p",{className:"font-styrene text-paragraph-sm",children:['\uD83D\uDEA7 Редактор для блока типа "',e.type,'" в разработке. Пока что можно редактировать только базовые поля.']})}),"url"in e&&(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-3 block text-paragraph-sm",children:"URL файла"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"url",value:l.url||"",onChange:e=>u({url:e.target.value}),placeholder:"URL медиа файла"})})})]}),"title"in e&&(0,a.jsxs)("div",{children:[(0,a.jsx)(b.b,{className:"mb-3 block text-paragraph-sm",children:"Заголовок"}),(0,a.jsx)(p,{children:(0,a.jsx)(x,{children:(0,a.jsx)(m,{type:"text",value:l.title||"",onChange:e=>u({title:e.target.value}),placeholder:"Заголовок блока"})})})]})]})}}tB.displayName="SelectItem";var tq=r(11365);function tW({content:e,onChange:t,giftId:r}){let[l,n]=(0,s.useState)(e),[i,o]=(0,s.useState)(null),[c,d]=(0,s.useState)([]),u=e=>{n(e),t(e)},h=(e,t)=>{u({...l,metadata:{...l.metadata,[e]:t}})},p=(e,t)=>{let r=[...l.blocks];r[e]=t,u({...l,blocks:r})},x=e=>{let t;switch(e){case"text":t={type:"text",content:"",style:"normal"};break;case"quote":t={type:"quote",content:"",style:"small"};break;case"image":t={type:"image",url:"",layout:"image-center",size:"medium",orientation:"horizontal"};break;case"two-images":t={type:"two-images",images:[{url:""},{url:""}],size:"medium",orientation:"horizontal"};break;case"gallery":t={type:"gallery",images:[{url:""}],columns:2};break;case"video-circle":t={type:"video-circle",url:"",size:"medium",autoplay:!1,muted:!0,loop:!1};break;case"video":t={type:"video",url:"",size:"medium",autoplay:!1,muted:!0,loop:!1};break;case"audio-message":t={type:"audio-message",url:""};break;case"music":t={type:"music",url:"",coverUrl:"",artist:"",trackName:""};break;default:return}u({...l,blocks:[...l.blocks,t]})},m=e=>{let t=l.blocks.filter((t,r)=>r!==e);u({...l,blocks:t}),d(t=>t.filter(t=>t!==e))},g=(e,t)=>{let r=[...l.blocks],a=r[e];a&&(r.splice(e,1),r.splice(t,0,a),u({...l,blocks:r}),d(r=>{let a=[...r];return a.includes(e)&&(a.splice(a.indexOf(e),1),a.push(t)),a}))},f=e=>{o(e)},v=e=>{e.preventDefault()},j=(e,t)=>{e.preventDefault(),null!==i&&i!==t&&g(i,t),o(null)},y=e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},w=[{type:"text",name:"Текст",icon:(0,a.jsx)(t_.NtT,{})},{type:"quote",name:"Цитата",icon:(0,a.jsx)(t_.Ead,{})},{type:"image",name:"Фото",icon:(0,a.jsx)(t_.fsL,{})},{type:"two-images",name:"Два фото",icon:(0,a.jsx)(t_.Ylc,{})},{type:"gallery",name:"Галерея",icon:(0,a.jsx)(t_.ugJ,{})},{type:"video-circle",name:"Видеокружок",icon:(0,a.jsx)(t_.CFw,{})},{type:"video",name:"Видео",icon:(0,a.jsx)(t_.xi0,{})},{type:"audio-message",name:"Голосовое",icon:(0,a.jsx)(t_.RQr,{})},{type:"music",name:"Музыка",icon:(0,a.jsx)(t_.bDH,{})}];return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(b.b,{htmlFor:"description",children:"Базовое сообщение"}),(0,a.jsx)(N,{placeholder:"Основной текст поздравления",value:l.metadata?.description||"",onChange:e=>h("description",e.target.value),children:(0,a.jsx)(k,{current:l.metadata?.description?.length||0,max:200})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(b.b,{htmlFor:"description",children:"Добавить блок контента"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:w.map(e=>(0,a.jsxs)("button",{onClick:()=>x(e.type),className:"flex items-center rounded-lg border border-gray-200 p-2 text-left transition-colors",children:[(0,a.jsx)("span",{className:"mr-3 mt-1",children:e.icon}),(0,a.jsx)("h4",{className:"font-styrene text-paragraph-sm font-medium uppercase text-adaptive",children:e.name})]},e.type))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)(b.b,{htmlFor:"description",children:["Блоки контента (",l.blocks.length,")"]})}),0===l.blocks.length?(0,a.jsxs)("div",{className:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 py-12 text-center",children:[(0,a.jsx)(tq.nn,{className:"mx-auto text-neutral-300"}),(0,a.jsx)("h3",{className:"mt-2 text-paragraph-md font-styrene uppercase text-adaptive font-medium",children:"Нет блоков контента"})]}):(0,a.jsx)("div",{className:"space-y-4",children:l.blocks.map((e,t)=>(0,a.jsxs)("div",{draggable:!0,onDragStart:()=>f(t),onDragOver:v,onDrop:e=>j(e,t),className:`rounded-lg border bg-white ${i===t?"border-indigo-300 bg-indigo-50":"border-gray-200"} transition-all duration-200`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"cursor-move",children:(0,a.jsx)(tq.th,{size:20,className:"text-neutral-300 hover:text-neutral-600 transition-colors"})}),(0,a.jsxs)("span",{className:"text-paragraph-sm uppercase font-styrene font-medium text-text-strong-950",children:["Блок #",t+1,":"," ",w.find(t=>t.type===e.type)?.name||"Неизвестный тип"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>y(t),className:"p-1 text-neutral-400 hover:text-neutral-600 transition-colors",title:c.includes(t)?"Развернуть блок":"Свернуть блок",children:c.includes(t)?(0,a.jsx)(t_.eQr,{size:24}):(0,a.jsx)(t_.F$e,{size:24})}),(0,a.jsx)("button",{onClick:()=>m(t),className:"p-1 text-neutral-400 hover:text-neutral-600 transition-colors",title:"Удалить блок",children:(0,a.jsx)(tq.ne,{size:20})})]})]}),!c.includes(t)&&(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(tG,{block:e,onChange:e=>p(t,e),giftId:r})})]},t))})]})]})}let t$="AlertIcon",tK=(0,i.tv)({slots:{root:"w-full",wrapper:["grid w-full auto-cols-auto grid-flow-col grid-cols-1 items-start has-[>svg:first-child]:grid-cols-[auto,minmax(0,1fr)]","transition duration-200 ease-out group-data-[expanded=false]/toast:group-data-[front=false]/toast:opacity-0"],icon:"shrink-0",closeIcon:""},variants:{variant:{filled:{root:"text-white",closeIcon:"text-static-white opacity-[.72]"},light:{root:"text-text-strong-950",closeIcon:"text-text-strong-950 opacity-40"},lighter:{root:"text-text-strong-950",closeIcon:"text-text-strong-950 opacity-40"},stroke:{root:"bg-bg-white-0 text-text-strong-950 shadow-regular-md ring-1 ring-inset ring-stroke-soft-200",closeIcon:"text-text-strong-950 opacity-40"}},status:{error:{},warning:{},success:{},information:{},feature:{}},size:{xsmall:{root:"rounded-lg p-2 text-paragraph-xs font-styrene uppercase",wrapper:"gap-2 items-center",icon:"size-4",closeIcon:"size-4"},small:{root:"rounded-lg px-2.5 py-2 text-paragraph-sm font-styrene uppercase",wrapper:"gap-2 items-center",icon:"size-5",closeIcon:"size-5"},large:{root:"rounded-xl p-3.5 pb-4 text-paragraph-sm font-styrene uppercase",wrapper:"items-start gap-3",icon:"size-5",closeIcon:"size-5"}}},compoundVariants:[{variant:"filled",status:"error",class:{root:"bg-error-base"}},{variant:"filled",status:"warning",class:{root:"bg-warning-base"}},{variant:"filled",status:"success",class:{root:"bg-success-base"}},{variant:"filled",status:"information",class:{root:"bg-information-base"}},{variant:"filled",status:"feature",class:{root:"bg-faded-base"}},{variant:"light",status:"error",class:{root:"bg-error-light"}},{variant:"light",status:"warning",class:{root:"bg-warning-light"}},{variant:"light",status:"success",class:{root:"bg-success-light"}},{variant:"light",status:"information",class:{root:"bg-information-light"}},{variant:"light",status:"feature",class:{root:"bg-faded-light"}},{variant:"lighter",status:"error",class:{root:"bg-error-lighter"}},{variant:"lighter",status:"warning",class:{root:"bg-warning-lighter"}},{variant:"lighter",status:"success",class:{root:"bg-success-lighter"}},{variant:"lighter",status:"information",class:{root:"bg-information-lighter"}},{variant:"lighter",status:"feature",class:{root:"bg-faded-lighter"}},{variant:["light","lighter","stroke"],status:"error",class:{icon:"text-error-base"}},{variant:["light","lighter","stroke"],status:"warning",class:{icon:"text-warning-base"}},{variant:["light","lighter","stroke"],status:"success",class:{icon:"text-success-base"}},{variant:["light","lighter","stroke"],status:"information",class:{icon:"text-information-base"}},{variant:["light","lighter","stroke"],status:"feature",class:{icon:"text-faded-base"}}],defaultVariants:{size:"small",variant:"filled",status:"information"}}),tQ=s.forwardRef(({children:e,className:t,wrapperClassName:r,size:l,variant:i,status:o,...c},d)=>{let u=s.useId(),{root:h,wrapper:p}=tK({size:l,variant:i,status:o}),x=(0,n.B)(e,{size:l,variant:i,status:o},[t$,"AlertCloseIcon"],u);return(0,a.jsx)("div",{ref:d,className:h({class:t}),...c,children:(0,a.jsx)("div",{className:p({class:r}),children:x})})});function tX({size:e,variant:t,status:r,className:s,as:l}){let{icon:n}=tK({size:e,variant:t,status:r});return(0,a.jsx)(l||"div",{className:n({class:s})})}function tY({photos:e,onPhotosChange:t,nickname:r,giftId:l}){let[n,i]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),[h,f]=(0,s.useState)(null),v=async r=>{if(!l)return void f("Сначала сохраните подарок с основными данными");i(!0);try{let a=new FormData;a.append("file",r),a.append("giftId",l),a.append("fileType","hint");let s=await fetch("/api/upload",{method:"POST",body:a});if(s.ok){let{url:r}=await s.json();t({...e,hintImageUrl:r})}else f("Ошибка загрузки изображения")}catch(e){console.error("Ошибка загрузки:",e),f("Ошибка загрузки изображения")}finally{i(!1)}},j=async r=>{if(!l)return void f("Сначала сохраните подарок с основными данными");c(!0);try{let a=new FormData;a.append("file",r),a.append("giftId",l),a.append("fileType","cover");let s=await fetch("/api/upload",{method:"POST",body:a});if(s.ok){let{url:r}=await s.json();t({...e,imageCover:r})}else f("Ошибка загрузки изображения обложки")}catch(e){console.error("Ошибка загрузки:",e),f("Ошибка загрузки изображения обложки")}finally{c(!1)}},y=async r=>{if(!l)return void f("Сначала сохраните подарок с основными данными");u(!0);try{let a=new FormData;a.append("file",r),a.append("giftId",l),a.append("fileType","memory");let s=await fetch("/api/upload",{method:"POST",body:a});if(s.ok){let{url:r}=await s.json();t({...e,memoryPhoto:{...e.memoryPhoto,photoUrl:r}})}else f("Ошибка загрузки изображения")}catch(e){console.error("Ошибка загрузки:",e),f("Ошибка загрузки изображения")}finally{u(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[h&&(0,a.jsxs)(tQ,{variant:"filled",status:"error",size:"small",children:[(0,a.jsx)(tX,{as:t_.sFm}),h]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"mb-2 font-styrene text-paragraph-md font-bold uppercase text-text-strong-950",children:"Фотография-подсказка"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center space-x-4",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&v(t)},className:"block w-full font-styrene text-paragraph-sm font-medium uppercase text-gray-500 file:mr-4 file:rounded-md file:border-0 file:px-4 file:py-2 file:font-styrene file:text-paragraph-sm file:font-medium file:uppercase",disabled:n}),n&&(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Загрузка..."})]}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{type:"url",value:e.hintImageUrl,onChange:r=>t({...e,hintImageUrl:r.target.value}),placeholder:"Или введите URL изображения..."}),e.hintImageUrl&&(0,a.jsx)("button",{type:"button",onClick:()=>t({...e,hintImageUrl:""}),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(b.b,{className:"block mb-2",children:"Текст подсказки"}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{id:"hintText",value:e.hintText||"",onChange:r=>t({...e,hintText:r.target.value}),placeholder:"Look for a gift with this sticker"}),e.hintText&&(0,a.jsx)("button",{type:"button",onClick:()=>t({...e,hintText:""}),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"mb-2 font-styrene text-paragraph-md font-bold uppercase text-text-strong-950",children:"Изображение обложки (оригинал)"}),(0,a.jsxs)("div",{className:"mb-2 flex items-center space-x-4",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&j(t)},className:"block w-full font-styrene text-paragraph-sm font-medium uppercase text-gray-500 file:mr-4 file:rounded-md file:border-0 file:px-4 file:py-2 file:font-styrene file:text-paragraph-sm file:font-medium file:uppercase",disabled:o}),o&&(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Загрузка..."})]}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{type:"url",value:e.imageCover||"",onChange:r=>t({...e,imageCover:r.target.value}),placeholder:"Или введите URL оригинального изображения..."}),e.imageCover&&(0,a.jsx)("button",{type:"button",onClick:()=>t({...e,imageCover:""}),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"mb-2 font-styrene text-paragraph-md font-bold uppercase text-text-strong-950",children:"Полароидная фотография"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center space-x-4",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&y(t)},className:"block w-full font-styrene text-paragraph-sm font-medium uppercase text-gray-500 file:mr-4 file:rounded-md file:border-0 file:px-4 file:py-2 file:font-styrene file:text-paragraph-sm file:font-medium file:uppercase",disabled:d}),d&&(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Загрузка..."})]}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{type:"url",value:e.memoryPhoto.photoUrl,onChange:r=>t({...e,memoryPhoto:{...e.memoryPhoto,photoUrl:r.target.value}}),placeholder:"Или введите URL изображения..."}),e.memoryPhoto.photoUrl&&(0,a.jsx)("button",{type:"button",onClick:()=>t({...e,memoryPhoto:{...e.memoryPhoto,photoUrl:""}}),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(b.b,{className:"block mb-2",children:"Дата создания фотографии"}),(0,a.jsx)(p,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{type:"date",value:e.memoryPhoto.photoDate||"",onChange:r=>t({...e,memoryPhoto:{...e.memoryPhoto,photoDate:r.target.value||null}}),placeholder:"Выберите дату создания фотографии"}),e.memoryPhoto.photoDate&&(0,a.jsx)("button",{type:"button",onClick:()=>t({...e,memoryPhoto:{...e.memoryPhoto,photoDate:null}}),className:"p-1",children:(0,a.jsx)(g,{as:t_.Qks})})]})})]})]})]})]})]})}tQ.displayName="AlertRoot",tX.displayName=t$;var tJ=r(10815),tZ=r(25718);function t0({gift:e,onSave:t,onCancel:r}){let[l,n]=(0,s.useState)("basic"),[i,o]=(0,s.useState)(!1),{data:c,isLoading:d}=(0,tZ.RX)(e?.id||""),[u,h]=(0,s.useState)({title:e?.title||"",author:e?.author||"",nickname:e?.nickname||"",number:e?.number||0,openDate:e?.openDate?new Date(e.openDate).toISOString().slice(0,16):"",englishDescription:e?.englishDescription||"",hintText:e?.hintText||"look for a gift with this sticker",codeText:e?.codeText||"This is the part of your cipher. Collect them all to reveal the last secret",code:e?.code||"",isSecret:e?.isSecret||!1}),[p,x]=(0,s.useState)({blocks:[],metadata:{description:""}}),[m,g]=(0,s.useState)({hintImageUrl:e?.hintImageUrl||"",hintText:e?.hintText||"look for a gift with this sticker",imageCover:e?.imageCover||"",memoryPhoto:{photoUrl:e?.memoryPhoto?.photoUrl||"",photoDate:e?.memoryPhoto?.photoDate?new Date(e.memoryPhoto.photoDate).toISOString().split("T")[0]:null}}),f=async()=>{o(!0);try{let e={...u,openDate:new Date(u.openDate).toISOString(),number:Number(u.number),content:p,hintImageUrl:m.hintImageUrl,hintText:m.hintText||"look for a gift with this sticker",imageCover:m.imageCover||"",memoryPhoto:m.memoryPhoto.photoUrl?{photoUrl:m.memoryPhoto.photoUrl,photoDate:m.memoryPhoto.photoDate?new Date(m.memoryPhoto.photoDate).toISOString():null}:null};await t(e)}catch(e){console.error("Ошибка сохранения:",e)}finally{o(!1)}};return(0,a.jsxs)("div",{className:"bg-white shadow-sm rounded-lg",children:[(0,a.jsx)("div",{className:"py-0 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[{id:"basic",name:"Основные данные"},{id:"content",name:"Контент"},{id:"memory",name:"Полароид"}].map(e=>(0,a.jsx)("button",{onClick:()=>n(e.id),className:`py-4 px-1 border-b-2 font-medium text-paragraph-md font-styrene uppercase ${l===e.id?"border-bg-strong-950":"border-transparent border-b-0 text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.name},e.id))}),(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsx)(tJ.b,{onClick:r,children:"Назад"}),(0,a.jsx)(tJ.b,{onClick:f,disabled:i,children:i?"Сохранение...":"Сохранить"})]})]})}),(0,a.jsx)("div",{className:"p-6",children:d?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"text-lg text-gray-500",children:"Загрузка..."})}):(0,a.jsxs)(a.Fragment,{children:["basic"===l&&(0,a.jsx)(Y,{data:u,onChange:e=>h(e),giftId:e?.id}),"content"===l&&(0,a.jsx)(tW,{content:p,onChange:x,giftId:e?.id}),"memory"===l&&(0,a.jsx)(tY,{photos:m,onPhotosChange:g,nickname:u.nickname,giftId:e?.id})]})})]})}var t1=r(29523);function t2({gifts:e,onCreateGift:t,onEditGift:r,onDeleteGift:l}){let[n,i]=(0,s.useState)(""),o=e.filter(e=>e.title?.toLowerCase().includes(n.toLowerCase())||e.number.toString().includes(n)||e.englishDescription.toLowerCase().includes(n.toLowerCase())),c=e=>{let t=new Date(e);return t.toLocaleDateString("ru-RU")+" "+t.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})};return(0,a.jsxs)("div",{className:"bg-transparent rounded-lg",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"font-styrene text-paragraph-lg font-bold uppercase text-text-strong-950",children:["Список подарков (",e.length,")"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Поиск",value:n,onChange:e=>i(e.target.value),className:"ring-1 ring-neutral-200 rounded-8 bg-transparent py-2 pl-2 pr-3 leading-5 placeholder-neutral-400 font-styrene placeholder:font-medium placeholder:text-paragraph-sm placeholder:uppercase"}),(0,a.jsx)(t1.b,{onClick:t,children:"Создать подарок"})]})]})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:0===o.length?(0,a.jsxs)("div",{className:"px-6 py-24 text-center",children:[(0,a.jsx)("h3",{className:"mt-2 text-paragraph-md font-bold text-text-strong-950 uppercase font-styrene",children:"Подарки не найдены"}),(0,a.jsx)("p",{className:"mt-2 text-paragraph-md font-styrene font-regular text-text-soft-400",children:n?"Попробуйте изменить поисковый запрос":"Начните с создания первого подарка"})]}):o.map(e=>(0,a.jsx)("div",{className:"py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"min-w-0 flex-1 ",children:[(0,a.jsxs)("div",{className:"mb-1 flex items-center space-x-2",children:[(0,a.jsx)("h3",{className:"truncate text-paragraph-md font-styrene font-medium text-text-strong-950 uppercase",children:e.title||`Подарок #${e.number}`}),e.isSecret&&(0,a.jsx)("span",{className:"inline-flex items-center rounded bg-red-100 px-2 py-0.5 text-xs font-medium text-red-800",children:"Секретный"}),e.code&&(0,a.jsxs)("span",{className:"bg-blue-100 text-blue-800 inline-flex items-center rounded px-2 py-0.5 text-xs font-medium",children:["Код: ",e.code]})]}),(0,a.jsxs)("div",{className:"flex items-center mt-2 space-x-4 text-paragraph-sm font-styrene text-neutral-300",children:[(0,a.jsxs)("span",{children:["Открытие: ",c(e.openDate)]}),e.memoryPhoto&&(0,a.jsxs)("span",{className:"inline-flex items-center",children:[(0,a.jsx)("svg",{className:"mr-1 h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"Полароид"]})]})]})})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>r(e),className:"border-transparent focus:ring-indigo-500 inline-flex items-center rounded-md border p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2",title:"Редактировать",children:(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsx)("button",{onClick:()=>l(e.id),className:"border-transparent inline-flex items-center rounded-md border p-2 text-red-400 hover:bg-red-50 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",title:"Удалить",children:(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id))})]})}function t5({onSave:e,onCancel:t,onSuccess:r}){let[l,n]=(0,s.useState)("basic"),[i,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(null),[u,h]=(0,s.useState)(null),[p,x]=(0,s.useState)({title:"",author:"",nickname:"",number:(()=>{let e=new Date(v.l$.START_DATE);return Math.ceil((new Date().getTime()-e.getTime())/864e5)})(),openDate:"",englishDescription:"",hintText:"Look for a gift with this sticker",codeText:"This is the part of your cipher. Collect them all to reveal the last secret",code:"",isSecret:!1}),[m,g]=(0,s.useState)({hintImageUrl:"",hintText:"Look for a gift with this sticker",imageCover:"",memoryPhoto:{photoUrl:"",photoDate:null}}),[f,b]=(0,s.useState)({blocks:[],metadata:{description:""}}),j=[{id:"basic",name:"Информация"},{id:"photos",name:"Фотографии"},{id:"content",name:"Контент"}],y=async()=>{let e=j.findIndex(e=>e.id===l);if(e<j.length-1){let t=j[e+1];if(t){if("basic"===l&&!c&&(await k(),u))return;n(t.id)}}},w=(0,tZ.Kv)(),N=(0,tZ.xj)(c||""),k=async()=>{o(!0);try{let e;if(!p.openDate||isNaN(new Date(p.openDate).getTime())){h("Пожалуйста, выберите корректную дату открытия"),o(!1);return}if(!p.number||p.number<=0){h("Пожалуйста, укажите корректный номер подарка"),o(!1);return}if(!p.englishDescription){h("Пожалуйста, заполните английское описание"),o(!1);return}if(!p.author){h("Пожалуйста, укажите имя друга"),o(!1);return}if(!p.nickname){h("Пожалуйста, укажите никнейм друга"),o(!1);return}try{e=new Date(p.openDate).toISOString()}catch(e){console.error("Ошибка преобразования даты:",e),h("Некорректный формат даты открытия"),o(!1);return}let t={title:p.title||"",author:p.author,nickname:p.nickname,number:Number(p.number),openDate:e,englishDescription:p.englishDescription,hintText:p.hintText||"Look for a gift with this sticker",codeText:p.codeText||"This is the part of your cipher. Collect them all to reveal the last secret",code:p.code||"",isSecret:!!p.isSecret};if(console.log("Отправляемые данные:",t),!t.openDate||!t.number||!t.englishDescription){h("Не заполнены обязательные поля: дата открытия, номер или описание"),o(!1);return}let r=await w.mutateAsync(t);console.log("Ответ сервера:",r),d(r.id)}catch(e){console.error("Ошибка сохранения:",e),h("Ошибка при сохранении подарка")}finally{o(!1)}},C=async()=>{if(c){o(!0);try{let t={...p,openDate:new Date(p.openDate).toISOString(),number:Number(p.number),hintImageUrl:m.hintImageUrl,hintText:m.hintText,imageCover:m.imageCover,content:f,memoryPhoto:m.memoryPhoto.photoUrl?{photoUrl:m.memoryPhoto.photoUrl,photoDate:m.memoryPhoto.photoDate?new Date(m.memoryPhoto.photoDate).toISOString():null}:null};if(!c)throw Error("ID подарка не указан");let a=await N.mutateAsync(t);console.log("Ответ сервера при сохранении подарка:",a),r?r():await e(a)}catch(e){console.error("Ошибка сохранения:",e),h(`Ошибка при сохранении подарка: ${e instanceof Error?e.message:String(e)}`)}finally{o(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"rounded-lg bg-white shadow-sm",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(tJ.b,{onClick:"basic"===l?t:()=>{let e=j.findIndex(e=>e.id===l);if(e>0){let t=j[e-1];t&&n(t.id)}},iconPosition:"start",className:"",icon:(0,a.jsx)(tq.fl,{size:16,className:"rotate-180"}),children:"basic"===l?"Отменить":"Назад"}),(0,a.jsx)("nav",{className:"flex space-x-8","aria-label":"Steps",children:j.map((e,t)=>(0,a.jsx)("div",{className:`whitespace-nowrap font-styrene text-paragraph-md font-bold uppercase ${l===e.id||t<j.findIndex(e=>e.id===l)?"border-adaptive text-adaptive":"border-transparent text-gray-500"}`,children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:t+1}),e.name]})},e.id))}),(0,a.jsx)(tJ.b,{onClick:y,iconPosition:"end",className:"",icon:(0,a.jsx)(tq.fl,{size:16}),children:"Далее"})]})}),(0,a.jsxs)("div",{className:"py-8",children:["basic"===l&&(0,a.jsx)(Y,{data:p,onChange:x}),"photos"===l&&(0,a.jsx)(tY,{photos:m,onPhotosChange:g,nickname:p.nickname,giftId:c||void 0}),"content"===l&&(0,a.jsx)(tW,{content:f,onChange:b,giftId:c||void 0})]}),(0,a.jsx)("div",{className:"px-8 py-6",children:(0,a.jsx)("div",{className:"flex justify-center",children:"content"===l?(0,a.jsx)(t1.b,{onClick:C,disabled:i,children:i?"Сохранение...":"Сохранить подарок"}):(0,a.jsx)(t1.b,{onClick:y,disabled:"basic"===l&&!(p.openDate&&!1===isNaN(new Date(p.openDate).getTime())&&p.englishDescription&&p.number>0&&p.author&&p.nickname)||i,children:"basic"===l&&!c&&i?"Сохранение...":"Далее"})})})]}),u&&(0,a.jsx)("div",{className:"fixed bottom-6 right-6 z-50",children:(0,a.jsxs)(tQ,{variant:"filled",status:"error",size:"small",children:[(0,a.jsx)(tX,{as:t_.sFm}),u]})})]})}var t4=r(98468);function t3(){let[e,t]=(0,s.useState)(null),[r,l]=(0,s.useState)(!1),[n,i]=(0,s.useState)(!1),{data:o,isLoading:c}=(0,tZ.Zj)(),d=(0,tZ.HJ)(),u=(0,tZ.Kv)(),h=(0,tZ.xj)("placeholder-id"),p=(0,s.useCallback)(async(e,t)=>{let r=await fetch(`/api/gifts/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error((await r.json()).error||"Ошибка при обновлении подарка");return r.json()},[]),x=async e=>{if(confirm("Вы уверены, что хотите удалить этот подарок?"))try{await d.mutateAsync(e)}catch(e){console.error("Ошибка удаления подарка:",e),alert("Ошибка при удалении подарка")}},m=async r=>{try{if(e)e.id&&(await p(e.id,r),h.reset()),l(!1),t(null);else{let e=await u.mutateAsync(r);e&&(t(e),i(!1),l(!0))}}catch(e){console.error("Ошибка сохранения подарка:",e),alert(`Ошибка при сохранении подарка: ${e instanceof Error?e.message:"Неизвестная ошибка"}`)}};return c?(0,a.jsx)(t4.l,{}):(0,a.jsx)("div",{className:"min-h-screen bg-bg-white-0",children:(0,a.jsxs)("div",{className:"container mx-auto",children:[(0,a.jsx)("div",{className:"flex justify-center pt-[100px] pb-10",children:(0,a.jsxs)("h4",{className:"text-center font-founders text-title-h4 text-text-strong-950",children:["ADMIN ",(0,a.jsx)("br",{})," PANEL"]})}),n?(0,a.jsx)(t5,{onSave:m,onCancel:()=>{i(!1)},onSuccess:()=>{i(!1)}}):r?(0,a.jsx)(t0,{gift:e,onSave:m,onCancel:()=>{l(!1),t(null)}}):(0,a.jsx)(t2,{gifts:o||[],onCreateGift:()=>{i(!0)},onEditGift:e=>{t(e),l(!0)},onDeleteGift:x})]})})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},45760:(e,t,r)=>{"use strict";r.d(t,{B:()=>function e(t,r,s,l,n){let i=a.Children.map(t,(t,n)=>{if(!a.isValidElement(t))return t;let i=t.type,o="function"==typeof i&&"string"==typeof i.displayName?i.displayName:"",c=s.includes(o)?r:{},d=t.props,u=d?.children;return a.cloneElement(t,{...c,key:`${l}-${n}`},null!=u?e(u,r,s,l,!!d?.asChild):void 0)});return n?i?.[0]:i}});var a=r(43210)},52342:(e,t,r)=>{Promise.resolve().then(r.bind(r,1132))},54050:(e,t,r)=>{"use strict";r.d(t,{n:()=>d});var a=r(43210),s=r(65406),l=r(33465),n=r(35536),i=r(31212),o=class extends n.Q{#e;#t=void 0;#r;#a;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,i.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,i.EN)(t.mutationKey)!==(0,i.EN)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#s(),this.#l(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#l()}mutate(e,t){return this.#a=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#s(){let e=this.#r?.state??(0,s.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#l(e){l.jG.batch(()=>{if(this.#a&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#a.onSuccess?.(e.data,t,r),this.#a.onSettled?.(e.data,null,t,r)):e?.type==="error"&&(this.#a.onError?.(e.error,t,r),this.#a.onSettled?.(void 0,e.error,t,r))}this.listeners.forEach(e=>{e(this.#t)})})}},c=r(8693);function d(e,t){let r=(0,c.jE)(t),[s]=a.useState(()=>new o(r,e));a.useEffect(()=>{s.setOptions(e)},[s,e]);let n=a.useSyncExternalStore(a.useCallback(e=>s.subscribe(l.jG.batchCalls(e)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),d=a.useCallback((e,t)=>{s.mutate(e,t).catch(i.lQ)},[s]);if(n.error&&(0,i.GU)(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:d,mutateAsync:n.mutate}}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},75902:(e,t,r)=>{Promise.resolve().then(r.bind(r,25924))},80013:(e,t,r)=>{"use strict";r.d(t,{b:()=>i,n:()=>o});var a=r(60687),s=r(43210),l=r(78148),n=r(78762);let i=s.forwardRef(({className:e,disabled:t,...r},s)=>(0,a.jsx)(l.b,{ref:s,className:(0,n.cn)("text-paragraph-md font-bold font-styrene uppercase text-text-strong-950","flex items-center gap-px",e),"aria-disabled":t,...r}));function o({className:e,children:t,...r}){return(0,a.jsx)("span",{className:(0,n.cn)("text-primary-base","group-aria-disabled:text-text-disabled-300",e),...r,children:t||"*"})}i.displayName="LabelRoot"},98468:(e,t,r)=>{"use strict";r.d(t,{l:()=>l,y:()=>s});var a=r(60687);r(43210);let s=({className:e})=>(0,a.jsx)("div",{className:`c-spinner ${e||""}`}),l=()=>(0,a.jsx)("div",{className:"c-loader",children:(0,a.jsx)("div",{className:"c-loader_spinner c-spinner"})})}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[447,724,244,862,839],()=>r(22971));module.exports=a})();