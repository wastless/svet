(()=>{var e={};e.id=241,e.ids=[241],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11365:(e,t,s)=>{"use strict";s.d(t,{E$:()=>i,HQ:()=>u,IJ:()=>n,fl:()=>r,kt:()=>c,lQ:()=>d,ne:()=>p,nn:()=>x,th:()=>m,ud:()=>l,v:()=>o});var a=s(60687);function r({className:e="",size:t=16}){return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:t,height:t,className:e,children:[(0,a.jsx)("g",{clipPath:"url(#arrow-right_a)",children:(0,a.jsx)("path",{fill:"currentColor",d:"M8.757 13.6565L14.414 7.99951L8.757 2.34351L7.343 3.75751L10.586 6.99951H2V8.99951H10.586L7.343 12.2425L8.757 13.6565Z"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"arrow-right_a",children:(0,a.jsx)("path",{d:"M0 0h16v16H0z"})})})]})}function l({className:e="",size:t=20}){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,className:e,fill:"currentColor",children:(0,a.jsx)("path",{d:"M8 5.5V12h11v-.75C14 9.5 9.5 5.5 9.5 5.5zm0 13V12h11v.75c-5 1.75-9.5 5.75-9.5 5.75z",clipRule:"evenodd",fillRule:"evenodd"})})}function i({className:e="",size:t=20}){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,className:e,fill:"currentColor",children:(0,a.jsx)("path",{d:"M11 5.5H7v13h4zm6 0h-4v13h4z",clipRule:"evenodd",fillRule:"evenodd"})})}function n({className:e="",size:t=20}){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,className:e,fill:"currentColor",children:(0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})}function c({className:e="",size:t=20}){return(0,a.jsx)("div",{style:{width:t,height:t},className:`border-current animate-spin rounded-full border-b-2 ${e}`})}function o({className:e="",size:t=20}){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,className:e,fill:"currentColor",children:(0,a.jsx)("path",{d:"M12.5 3H12l-.299.398V3.4l-.003.003-.018.024-.088.108a10 10 0 0 1-.375.422c-.339.36-.848.855-1.52 1.381C8.348 6.392 6.37 7.553 3.82 8.017L3 8.164v7.67l.821.149c2.55.463 4.528 1.624 5.875 2.679q.812.633 1.52 1.381.241.257.464.53l.018.024.002.002.001.001.299.4h4.5V3zm.174 2.326A13 13 0 0 0 12.97 5h1.53v14h-1.53q-.145-.166-.296-.326a16 16 0 0 0-1.745-1.587C9.546 16.006 7.554 14.805 5 14.19V9.81c2.554-.615 4.546-1.815 5.929-2.898a15.6 15.6 0 0 0 1.745-1.586M19.5 6v12h2V6z",clipRule:"evenodd"})})}function d({className:e="",size:t=20}){return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,className:e,fill:"currentColor",children:[(0,a.jsx)("path",{d:"m16.5 17.44 3.355 2.826 1.289-1.53-4.644-3.91v-.012l-2-1.674L2.145 2.736.856 4.266l4.133 3.48a12 12 0 0 1-1.168.27L3 8.166v7.669l.821.149c2.55.463 4.528 1.624 5.875 2.679q.812.633 1.52 1.381.241.257.464.53l.018.024.002.002.001.001L12 21h4.5zm-2-1.684V19h-1.53q-.145-.166-.296-.326a16 16 0 0 0-1.745-1.587C9.546 16.006 7.554 14.805 5 14.19V9.81c.63-.151 1.225-.339 1.785-.551zM16.5 4v6.902l-2-1.675V5h-1.53a14 14 0 0 1-.296.326c-.322.342-.768.78-1.335 1.255L9.777 5.273q.766-.607 1.44-1.317.24-.257.463-.53l.018-.024.002-.003h.001L12 3h4.5z",clipRule:"evenodd",fillRule:"evenodd"}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{children:(0,a.jsx)("path",{d:"M0 0h24v24H0z"})})})]})}function x({className:e="",size:t=48}){return(0,a.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:t,height:t,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}function m({className:e="",size:t=20}){return(0,a.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:t,height:t,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}function p({className:e="",size:t=20}){return(0,a.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:t,height:t,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}function u({className:e=""}){return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"72",height:"34",fill:"none",viewBox:"0 0 64 30",className:e,children:[(0,a.jsx)("g",{clipPath:"url(#a)",children:(0,a.jsx)("path",{fill:"#F90000",d:"M60.8 8.66c.455.455.82.82 1.184 1.229 2.368 2.594 2.641 5.87.865 8.874-.865 1.456-2.05 2.593-3.37 3.594-3.052 2.276-6.468 3.777-10.111 4.733-11.568 3.049-23.228 3.185-34.933.865-3.097-.592-6.103-1.548-8.927-3.095-1.548-.864-2.96-1.866-4.007-3.322C-.276 19.172-.458 16.67.863 14.03c.865-1.775 2.232-3.14 3.78-4.369 2.733-2.184 5.739-3.822 8.972-5.096C25.32-.213 37.39-1.124 49.732 1.288c3.37.637 6.559 1.775 9.474 3.686.592.41 1.184.82 1.73 1.32 1.093.956 1.048 1.274-.136 2.366M49.823 3.7v-.182c-.728-.136-1.412-.318-2.14-.455-9.701-1.638-19.266-1.138-28.693 1.73-4.1 1.228-8.062 2.912-11.569 5.414-1.32.956-2.641 2.003-3.689 3.231-2.414 2.867-2.14 5.78.82 8.1 1.275 1.002 2.778 1.775 4.281 2.458 3.234 1.41 6.65 2.093 10.111 2.594 8.29 1.137 16.578 1.046 24.822-.365 4.418-.773 8.699-2.047 12.616-4.368 1.594-.956 3.097-2.048 4.19-3.55 1.867-2.502 1.685-5.142-.547-7.326-.683-.683-1.457-1.274-2.277-1.82-3.826-2.503-8.061-3.55-12.57-3.459-.957 0-1.959.091-2.915.137-.592 0-1.093-.228-1.139-.865-.045-.546.365-.91.911-.955.957-.137 1.913-.364 2.87-.41 1.64-.045 3.279.046 4.918.091"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"a",children:(0,a.jsx)("path",{fill:"#fff",d:"M0 0h64v29.553H0z"})})})]})}s(43210)},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24204:(e,t,s)=>{Promise.resolve().then(s.bind(s,75689))},25718:(e,t,s)=>{"use strict";s.d(t,{HJ:()=>h,Kv:()=>p,RX:()=>x,Zj:()=>d,sw:()=>m,xj:()=>u});var a=s(51423),r=s(8693),l=s(54050),i=s(34610),n=s(84359),c=s(43210);let o={GIFTS:"gifts",GIFT:e=>["gift",e],GIFT_CONTENT:e=>["gift-content",e]};function d(){return(0,a.I)({queryKey:[o.GIFTS],queryFn:async()=>{let e=Date.now(),t=await fetch(`/api/gifts?_t=${e}`);if(!t.ok)throw Error("Ошибка загрузки подарков");return t.json()},staleTime:0,gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0})}function x(e){return(0,a.I)({queryKey:o.GIFT_CONTENT(e),queryFn:async()=>{let t=Date.now(),s=await fetch(`/api/gift-content/${e}?_t=${t}`);if(!s.ok)throw Error(`Ошибка загрузки контента подарка ${e}`);if(s.redirected){let t=await fetch(s.url);if(!t.ok)throw Error(`Ошибка загрузки контента подарка ${e} из облачного хранилища`);return t.json()}return s.json()},enabled:!!e,staleTime:0,gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0})}function m(e){let t=(0,a.I)({queryKey:o.GIFT(e),queryFn:async()=>{let t=Date.now(),s=await fetch(`/api/gifts/${e}?_t=${t}`);if(!s.ok)throw Error(`Ошибка загрузки подарка ${e}`);return s.json()},enabled:!!e,staleTime:0,gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0}),s=x(e),r=(0,i.Q)(),l=t.isLoading||s.isLoading||r.isLoading,d=t.isError||s.isError||r.isError,m=t.error||s.error||r.error,p=(0,c.useMemo)(()=>l||d?null:{gift:t.data,content:s.data,isAuthenticated:r.data?.isAuthenticated,memoryPhoto:t.data?.memoryPhoto},[l,d,t.data,s.data,r.data?.isAuthenticated]),u=(0,c.useRef)(!1);return{data:p,isLoading:l,isError:d,error:m,refetch:(0,c.useCallback)(async()=>{u.current||(console.log(`🔄 Invalidating cache for gift ${e}`),(0,n.Mb)(e),u.current=!0),await Promise.all([t.refetch(),s.refetch()]),setTimeout(()=>{u.current=!1},500)},[e,t,s])}}function p(){let e=(0,r.jE)();return(0,l.n)({mutationFn:async e=>{let t=await fetch("/api/gifts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Ошибка при создании подарка");return t.json()},onSuccess:()=>{e.invalidateQueries({queryKey:[o.GIFTS]}),(0,n.Mb)()}})}function u(e){let t=(0,r.jE)();return(0,l.n)({mutationFn:async t=>{if(!e)throw Error("ID подарка не указан");let s=await fetch(`/api/gifts/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error((await s.json()).error||"Ошибка при обновлении подарка");return s.json()},onSuccess:s=>{e&&(t.setQueryData(o.GIFT(e),s),t.invalidateQueries({queryKey:[o.GIFTS]}),t.invalidateQueries({queryKey:o.GIFT_CONTENT(e)}),(0,n.Mb)(e))}})}function h(){let e=(0,r.jE)();return(0,l.n)({mutationFn:async e=>{if(!(await fetch(`/api/gifts/${e}`,{method:"DELETE"})).ok)throw Error("Ошибка при удалении подарка");return e},onSuccess:t=>{e.invalidateQueries({queryKey:[o.GIFTS]}),e.removeQueries({queryKey:o.GIFT(t)}),e.removeQueries({queryKey:o.GIFT_CONTENT(t)}),(0,n.Mb)(t)}})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},53475:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\repositories\\\\lesya.svet\\\\src\\\\app\\\\gift\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\repositories\\lesya.svet\\src\\app\\gift\\[id]\\page.tsx","default")},60652:(e,t,s)=>{Promise.resolve().then(s.bind(s,53475))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},75689:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>I});var a=s(60687),r=s(85814),l=s.n(r),i=s(29523),n=s(23546);function c({name:e,nickname:t,text:s,className:r=""}){let l=function(e){let t={Павел:"Павла",Пётр:"Петра",Лев:"Льва",Николай:"Николая",Андрей:"Андрея",Сергей:"Сергея",Алексей:"Алексея",Евгений:"Евгения",Юрий:"Юрия",Дмитрий:"Дмитрия"};if(t[e])return t[e];for(let[t,s]of Object.entries({а:"и",я:"и",ь:"и",ия:"и",га:"и",ка:"и",ла:"ы",на:"ы"}).sort((e,t)=>t[0].length-e[0].length))if(e.endsWith(t)){if("ия"===t)return e.slice(0,-2)+s;return e.slice(0,-1)+s}return/[бвгджзклмнпрстфхцчшщ]$/i.test(e)?e+"а":e}(e);return(0,a.jsxs)("div",{className:`space-y-6 ${r}`,children:[(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"text-label-md font-nyghtserif italic text-adaptive tracking-wider",children:["от ",(0,a.jsx)("span",{children:l}),t&&(0,a.jsxs)("span",{className:"text-text-soft-400",children:[" (@",t,")"]})]})}),(0,a.jsx)("div",{className:"text-paragraph-lg text-adaptive font-euclid md:text-paragraph-xl",children:s})]})}function o({block:e,className:t=""}){return(0,a.jsx)("div",{className:`text-adaptive ${t}`,children:(0,a.jsx)("p",{className:(e=>{switch(e){case"title":return"text-label-sm md:text-label-md font-nyghtserif italic";case"subtitle":return"text-label-xs md:text-label-sm font-nyghtserif italic";default:return"md:text-paragraph-xl text-paragraph-lg font-euclid"}})(e.style),children:"title"===e.style||"subtitle"===e.style?`(${e.content})`:e.content})})}function d({block:e,className:t=""}){let s="big"===e.style?"text-label-sm md:text-label-md font-nyghtserif":"text-paragraph-lg md:text-paragraph-xl font-euclid";return(0,a.jsxs)("div",{className:`relative ${t}`,children:[(0,a.jsx)("div",{className:"w-0.5 absolute bottom-0 left-0 top-0 bg-white"}),(0,a.jsx)("div",{className:"pl-6",children:(0,a.jsx)("blockquote",{className:`text-adaptive ${s}`,children:e.content})})]})}function x({block:e,className:t=""}){let s=e.layout||"image-center",r=(e,t,s)=>{let a="",r="";if(s)a="w-full";else switch(e){case"small":a="w-full md:w-1/3 mx-auto";break;case"medium":a="w-full md:w-2/3 mx-auto";break;default:a="w-full mx-auto"}switch(t){case"vertical":r="aspect-[3/4]";break;case"horizontal":r="aspect-[4/3]";break;default:r=""}return`${a} ${r} h-auto rounded-2xl object-cover`},l=(e,t,s)=>{if("vertical"===t)switch(e){case"large":default:return{imageCols:"md:col-span-1",textCols:"md:col-span-1"};case"medium":if(s)return{textCols:"md:col-span-2",imageCols:"md:col-span-1"};return{imageCols:"md:col-span-1",textCols:"md:col-span-2"};case"small":if(s)return{textCols:"md:col-span-3",imageCols:"md:col-span-1"};return{imageCols:"md:col-span-1",textCols:"md:col-span-3"}}switch(e){case"large":if(s)return{textCols:"md:col-span-1",imageCols:"md:col-span-2"};return{imageCols:"md:col-span-2",textCols:"md:col-span-1"};case"medium":return{imageCols:"md:col-span-1",textCols:"md:col-span-1"};case"small":if(s)return{textCols:"md:col-span-2",imageCols:"md:col-span-1"};return{imageCols:"md:col-span-1",textCols:"md:col-span-2"};default:return{imageCols:"md:col-span-2",textCols:"md:col-span-1"}}},i=({centered:t=!1})=>e.title?(0,a.jsx)("div",{className:`text-adaptive ${t?"text-center":""}`,children:(0,a.jsxs)("p",{className:"text-label-sm md:text-label-md font-nyghtserif italic",children:["(",e.title,")"]})}):null,n=({centered:t=!1})=>e.text?(0,a.jsx)("div",{className:`text-adaptive ${t?"text-center":""}`,children:(0,a.jsx)("p",{className:"text-paragraph-lg md:text-paragraph-xl font-euclid",children:e.text})}):null,c=({centered:e=!1})=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i,{centered:e}),(0,a.jsx)(n,{centered:e})]}),o=({align:t})=>{let l="";return"left"===t?l="mr-auto":"right"===t?l="ml-auto":"center"===t&&(l="mx-auto"),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("img",{src:e.url,alt:e.caption||"Фотография",className:`${r(e.size,e.orientation,"image-left"===s||"image-right"===s)} ${l}`}),e.caption&&(0,a.jsx)("div",{className:"text-center mt-4",children:(0,a.jsx)("p",{className:"text-paragraph-md font-euclid text-text-soft-400",children:e.caption})})]})};if("image-right"===s){let{textCols:s,imageCols:r}=l(e.size,e.orientation,!0),i="md:grid-cols-3";return"vertical"===e.orientation?"large"===e.size?i="md:grid-cols-2":"medium"===e.size?i="md:grid-cols-3":"small"===e.size&&(i="md:grid-cols-4"):i="medium"===e.size?"md:grid-cols-2":"md:grid-cols-3",(0,a.jsx)("div",{className:`space-y-6 ${t}`,children:(0,a.jsxs)("div",{className:`grid grid-cols-1 ${i} gap-8 items-start`,children:[(0,a.jsx)("div",{className:`space-y-6 ${s}`,children:(0,a.jsx)(c,{})}),(0,a.jsx)("div",{className:r,children:(0,a.jsx)(o,{align:"right"})})]})})}if("image-left"===s){let{imageCols:s,textCols:r}=l(e.size,e.orientation,!1),i="md:grid-cols-3";return"vertical"===e.orientation?"large"===e.size?i="md:grid-cols-2":"medium"===e.size?i="md:grid-cols-3":"small"===e.size&&(i="md:grid-cols-4"):i="medium"===e.size?"md:grid-cols-2":"md:grid-cols-3",(0,a.jsx)("div",{className:`space-y-6 ${t}`,children:(0,a.jsxs)("div",{className:`grid grid-cols-1 ${i} gap-8 items-start`,children:[(0,a.jsx)("div",{className:s,children:(0,a.jsx)(o,{align:"left"})}),(0,a.jsx)("div",{className:`space-y-6 ${r}`,children:(0,a.jsx)(c,{})})]})})}if("vertical"===e.orientation){let s="md:w-1/2";switch(e.size){case"large":default:s="md:w-1/2";break;case"medium":s="md:w-1/3";break;case"small":s="md:w-1/4"}return(0,a.jsxs)("div",{className:`space-y-6 ${t}`,children:[(0,a.jsx)(c,{centered:!0}),(0,a.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,a.jsx)("img",{src:e.url,alt:e.caption||"Фотография",className:`w-full ${s} aspect-[3/4] h-auto rounded-2xl object-cover`}),e.caption&&(0,a.jsx)("div",{className:"text-center mt-4",children:(0,a.jsx)("p",{className:"text-paragraph-md font-euclid text-text-soft-400",children:e.caption})})]})]})}return(0,a.jsxs)("div",{className:`space-y-6 ${t}`,children:[(0,a.jsx)(c,{centered:!0}),(0,a.jsx)(o,{align:"center"})]})}function m({block:e,className:t=""}){let s=(e,t)=>{let s="";switch(t){case"vertical":s="aspect-[3/4]";break;case"horizontal":s="aspect-[4/3]";break;default:s=""}return`w-full ${s} h-auto rounded-2xl object-cover`},r=({title:e})=>e?(0,a.jsx)("div",{className:"text-adaptive",children:(0,a.jsxs)("p",{className:"text-label-sm md:text-label-md font-nyghtserif italic",children:["(",e,")"]})}):null,l=({text:e})=>e?(0,a.jsx)("div",{className:"text-adaptive",children:(0,a.jsx)("p",{className:"md:text-paragraph-xl text-paragraph-lg font-euclid",children:e})}):null,i=({title:e,text:t,layout:s})=>"text-bottom"===s?(0,a.jsxs)("div",{className:"space-y-6 md:space-y-12",children:[(0,a.jsx)(r,{title:e}),(0,a.jsx)(l,{text:t})]}):(0,a.jsxs)("div",{className:"space-y-6 md:space-y-12",children:[(0,a.jsx)(l,{text:t}),(0,a.jsx)(r,{title:e})]}),n=({image:t,index:r})=>{let l=t.layout||"text-top";return"text-bottom"===l?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("img",{src:t.url,alt:t.caption||`Фотография ${r+1}`,className:s(e.size,e.orientation)}),t.caption&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-paragraph-sm font-euclid text-text-soft-400",children:t.caption})}),(0,a.jsx)(i,{title:t.title,text:t.text,layout:l})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(i,{title:t.title,text:t.text,layout:l}),(0,a.jsx)("img",{src:t.url,alt:t.caption||`Фотография ${r+1}`,className:s(e.size,e.orientation)}),t.caption&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-paragraph-sm font-euclid text-text-soft-400",children:t.caption})})]})};return(0,a.jsx)("div",{className:`${t}`,children:(0,a.jsx)(()=>(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4 md:gap-10",children:e.images.map((e,t)=>(0,a.jsx)(n,{image:e,index:t},t))}),{})})}var p=s(43210),u=s(30036),h=s(11365);let f=(0,u.default)(async()=>{},{loadableGenerated:{modules:["components\\gift-blocks\\video-circle-block.tsx -> react-player"]},ssr:!1});function g({block:e,className:t=""}){let[s,r]=(0,p.useState)(!1),[l,i]=(0,p.useState)(!1),[n,c]=(0,p.useState)(!1),[o,d]=(0,p.useState)(!1),[x,m]=(0,p.useState)(0),[u,g]=(0,p.useState)(0),j=(0,p.useRef)(null),v=2*Math.PI*50,b=`${(x>0?u/x*100:0)/100*v} ${v}`;return(0,a.jsxs)("div",{className:`space-y-8 ${t}`,children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[e.title&&(0,a.jsx)("div",{className:"text-center text-adaptive",children:(0,a.jsxs)("p",{className:"font-nyghtserif text-label-sm md:text-label-md italic",children:["(",e.title,")"]})}),e.text&&(0,a.jsx)("div",{className:"text-center text-adaptive",children:(0,a.jsx)("p",{className:`font-euclid ${"medium"===e.textSize?"text-paragraph-lg md:text-paragraph-xl":"text-paragraph-md md:text-paragraph-lg"}`,children:e.text})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("div",{className:`relative ${(e=>{switch(e){case"small":return"w-48 h-48";case"medium":return"w-64 h-64";default:return"w-96 h-96"}})(e.size)} group cursor-pointer overflow-hidden rounded-full bg-bg-strong-950`,onClick:()=>{r(!s)},children:[(0,a.jsx)("div",{className:"absolute inset-0 rounded-full overflow-hidden",children:(0,a.jsx)(f,{ref:j,url:e.url,playing:s,muted:o,loop:e.loop,width:"100%",height:"100%",onReady:()=>c(!0),onPlay:()=>r(!0),onPause:()=>r(!1),onDuration:e=>m(e),onProgress:({playedSeconds:e})=>g(e),config:{file:{attributes:{style:{objectFit:"cover",width:"100%",height:"100%"}}}},style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:"100%",minHeight:"100%"}})}),n&&x>0&&s&&(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:(0,a.jsx)("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:(0,a.jsx)("circle",{cx:"50",cy:"50",r:"50",fill:"none",stroke:"rgba(255, 255, 255, 0.5)",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:b,className:"transition-all duration-100"})})}),!s&&n&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),d(!o)},className:"absolute top-2 left-1/2 transform -translate-x-1/2 w-8 h-8 bg-black bg-opacity-40 rounded-full flex items-center justify-center hover:bg-opacity-80 transition-all z-10",children:o?(0,a.jsx)(h.lQ,{className:"w-4 h-4 text-white"}):(0,a.jsx)(h.v,{className:"w-4 h-4 text-white"})}),!n&&(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2"})})]})}),e.caption&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"font-euclid text-paragraph-md text-text-soft-400",children:e.caption})})]})]})}let j=(0,u.default)(async()=>{},{loadableGenerated:{modules:["components\\gift-blocks\\video-block.tsx -> react-player"]},ssr:!1});function v({block:e,className:t=""}){let[s,r]=(0,p.useState)(!1);return(0,a.jsxs)("div",{className:`space-y-8 ${t}`,children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[e.title&&(0,a.jsx)("div",{className:"text-center text-adaptive",children:(0,a.jsxs)("p",{className:"font-nyghtserif text-label-sm md:text-label-md italic",children:["(",e.title,")"]})}),e.text&&(0,a.jsx)("div",{className:"text-center text-adaptive",children:(0,a.jsx)("p",{className:`font-euclid ${"medium"===e.textSize?"text-paragraph-lg md:text-paragraph-xl":"text-paragraph-md md:text-paragraph-lg"}`,children:e.text})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:(e=>{let t="";switch(e){case"small":t="md:w-1/2 w-full mx-auto";break;case"medium":t="md:w-2/3 w-full mx-auto";break;default:t="md:w-full mx-auto"}return`${t} aspect-video rounded-2xl overflow-hidden bg-black`})(e.size)+" relative",children:[!s&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-2xl bg-gray-200",children:(0,a.jsx)("div",{className:"border-blue-500 h-8 w-8 animate-spin rounded-full border-b-2"})}),(0,a.jsx)(j,{url:e.url,width:"100%",height:"100%",controls:!0,playing:e.autoplay||!1,muted:!1!==e.muted,loop:e.loop||!1,onReady:()=>r(!0),config:{file:{attributes:{controlsList:"nodownload",disablePictureInPicture:!1,style:{borderRadius:"1rem",objectFit:"cover",width:"100%",height:"100%"}}}},style:{borderRadius:"1rem",width:"100%",height:"100%"}})]})}),e.caption&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"font-euclid text-paragraph-md text-text-soft-400",children:e.caption})})]})]})}function b({block:e,className:t=""}){let[s,r]=(0,p.useState)(!1),[l,i]=(0,p.useState)(!1),[n,c]=(0,p.useState)(0),[o,d]=(0,p.useState)(e.duration||0),x=(0,p.useRef)(null),m=(0,p.useRef)(null);return(0,a.jsxs)("div",{className:`space-y-4 ${t}`,children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[e.title&&(0,a.jsx)("div",{className:"text-center text-adaptive",children:(0,a.jsxs)("p",{className:"font-nyghtserif text-label-sm md:text-label-md italic",children:["(",e.title,")"]})}),e.text&&(0,a.jsx)("div",{className:"text-center text-adaptive",children:(0,a.jsx)("p",{className:`font-euclid ${"medium"===e.textSize?"text-paragraph-lg md:text-paragraph-xl":"text-paragraph-md md:text-paragraph-lg"}`,children:e.text})})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"rounded-2xl p-2 max-w-lg w-full",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>{m.current&&(s?m.current.pause():m.current.play())},disabled:!l,className:"w-10 h-10 bg-white bg-opacity-10 rounded-full flex items-center justify-center hover:bg-opacity-20 transition-all disabled:opacity-50",children:l?s?(0,a.jsx)(h.E$,{className:"w-5 h-5 text-white"}):(0,a.jsx)(h.ud,{className:"w-5 h-5 text-white ml-0.5"}):(0,a.jsx)(h.kt,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{ref:x,className:"w-full"})}),(0,a.jsx)("div",{className:"text-white text-paragraph-sm font-euclid min-w-[40px]",children:(e=>{let t=Math.floor(e/60),s=Math.floor(e%60);return`${t}:${s.toString().padStart(2,"0")}`})(s?n:o)})]})})})]})}var w=s(76180),N=s.n(w),y=s(30474);function k({block:e,className:t=""}){let[s,r]=(0,p.useState)(!1),[l,i]=(0,p.useState)(!1),[n,c]=(0,p.useState)(!0),[o,d]=(0,p.useState)(!1),[x,m]=(0,p.useState)(0),[u,f]=(0,p.useState)(e.duration||0),[g,j]=(0,p.useState)(0),[v,b]=(0,p.useState)(1),[w,k]=(0,p.useState)(!1),C=(0,p.useRef)(null),$=async()=>{let e=C.current;if(e&&(l||o))try{s?e.pause():await e.play()}catch(e){console.error("Ошибка воспроизведения:",e),d(!0)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N(),{id:"1b9170674254f6f4",children:".volume-slider.jsx-1b9170674254f6f4{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;height:3px;-webkit-border-radius:1.5px;-moz-border-radius:1.5px;border-radius:1.5px;outline:none;cursor:pointer;background:#4b5563}.volume-slider.jsx-1b9170674254f6f4::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;width:0;height:0;cursor:pointer}.volume-slider.jsx-1b9170674254f6f4::-moz-range-thumb{width:0;height:0;border:none;background:transparent;cursor:pointer}"}),(0,a.jsxs)("div",{className:`jsx-1b9170674254f6f4 space-y-6 ${t}`,children:[(0,a.jsxs)("div",{className:"jsx-1b9170674254f6f4 flex flex-col gap-1",children:[e.title&&(0,a.jsx)("div",{className:"jsx-1b9170674254f6f4 text-center text-adaptive",children:(0,a.jsxs)("p",{className:"jsx-1b9170674254f6f4 font-nyghtserif text-label-sm md:text-label-md italic",children:["(",e.title,")"]})}),e.text&&(0,a.jsx)("div",{className:"jsx-1b9170674254f6f4 text-center text-adaptive",children:(0,a.jsx)("p",{className:`jsx-1b9170674254f6f4 font-euclid ${"medium"===e.textSize?"text-paragraph-lg md:text-paragraph-xl":"text-paragraph-md md:text-paragraph-lg"}`,children:e.text})})]}),(0,a.jsx)("div",{className:"jsx-1b9170674254f6f4 flex justify-center",children:(0,a.jsxs)("div",{className:"jsx-1b9170674254f6f4 bg-neutral-900 rounded-xl px-4 py-2 w-full max-w-xl",children:[(0,a.jsxs)("div",{className:"jsx-1b9170674254f6f4 flex items-center gap-3",children:[(0,a.jsxs)("div",{onClick:$,className:"jsx-1b9170674254f6f4 relative w-12 h-12 rounded-lg overflow-hidden flex-shrink-0 group cursor-pointer",children:[(0,a.jsx)(y.default,{src:e.coverUrl,alt:`${e.trackName} - ${e.artist}`,fill:!0,className:"object-cover",sizes:"48px"}),(0,a.jsx)("div",{className:"jsx-1b9170674254f6f4 absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center",children:(0,a.jsxs)("div",{className:`jsx-1b9170674254f6f4 w-8 h-8 rounded-full bg-neutral-900 bg-opacity-60 flex items-center justify-center transition-all duration-200 relative overflow-hidden group/button ${n||o?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:[(0,a.jsx)("div",{className:"jsx-1b9170674254f6f4 absolute inset-0 bg-white opacity-0 group-hover/button:opacity-20 transition-opacity duration-200 rounded-full pointer-events-none"}),(0,a.jsx)("div",{className:"jsx-1b9170674254f6f4 relative z-10",children:o?(0,a.jsx)(h.IJ,{className:"w-5 h-5 text-white"}):n||!l?(0,a.jsx)(h.kt,{className:"w-5 h-5 border-white"}):s?(0,a.jsx)(h.E$,{className:"w-5 h-5 text-white"}):(0,a.jsx)(h.ud,{className:"w-5 h-5 text-white ml-0.5"})})]})})]}),(0,a.jsxs)("div",{className:"jsx-1b9170674254f6f4 flex justify-between w-full",children:[(0,a.jsxs)("div",{className:"jsx-1b9170674254f6f4 flex flex-col gap-1 min-w-0",children:[(0,a.jsx)("h3",{className:"jsx-1b9170674254f6f4 font-euclid text-paragraph-md font-medium text-white truncate",children:e.trackName}),(0,a.jsx)("p",{className:"jsx-1b9170674254f6f4 font-euclid text-paragraph-sm text-gray-400 truncate",children:e.artist})]}),(0,a.jsxs)("div",{className:"jsx-1b9170674254f6f4 flex items-center gap-2 flex-shrink-0",children:[(0,a.jsx)("button",{onClick:()=>{k(!w)},title:w?"Включить звук":"Отключить звук",className:"jsx-1b9170674254f6f4 text-neutral-300 hover:text-white transition-colors",children:w||0===v?(0,a.jsx)(h.lQ,{className:"w-5 h-5"}):(0,a.jsx)(h.v,{className:"w-5 h-5"})}),(0,a.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:w?0:v,onChange:e=>{let t=parseFloat(e.target.value);b(t),t>0&&k(!1)},style:{background:`linear-gradient(to right, #ffffff 0%, #ffffff ${(w?0:v)*100}%, #4b5563 ${(w?0:v)*100}%, #4b5563 100%)`},className:"jsx-1b9170674254f6f4 volume-slider w-16"})]})]})]}),(0,a.jsx)("audio",{ref:C,src:e.url,preload:"metadata",crossOrigin:"anonymous",className:"jsx-1b9170674254f6f4"})]})})]})]})}function C({block:e,className:t=""}){let s=e.images.slice(0,6),r=({image:e,index:t})=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("img",{src:e.url,alt:e.caption||`Изображение ${t+1}`,className:"aspect-square w-full rounded-2xl object-cover"}),e.caption&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"font-euclid text-paragraph-sm text-text-soft-400",children:e.caption})})]});return(0,a.jsxs)("div",{className:`space-y-8 ${t}`,children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(()=>e.title?(0,a.jsx)("div",{className:"text-center text-adaptive",children:(0,a.jsx)("h3",{className:"font-nyghtserif text-label-sm md:text-label-md italic",children:e.title})}):null,{}),(0,a.jsx)(()=>{if(!e.text)return null;let t="medium"===e.textSize?"text-paragraph-lg md:text-paragraph-xl":"text-paragraph-md md:text-paragraph-lg";return(0,a.jsx)("div",{className:"text-center text-adaptive",children:(0,a.jsx)("p",{className:`${t} font-euclid`,children:e.text})})},{})]}),(0,a.jsx)("div",{className:`grid ${(()=>{let t=e.images.length;return t<=2?"grid-cols-2":t<=3?"grid-cols-2 md:grid-cols-3":t<=4?"grid-cols-2 md:grid-cols-2":t<=6?"grid-cols-2 md:grid-cols-3":"grid-cols-2 md:grid-cols-3"})()} gap-2 md:gap-6`,children:s.map((e,t)=>(0,a.jsx)(r,{image:e,index:t},t))})]})}function $({content:e,memoryPhoto:t,className:s="",gift:r}){let l=(e,t)=>{let s=`block-${t}`,r="mb-12";switch(e.type){case"text":return(0,a.jsx)(o,{block:e,className:r},s);case"quote":return(0,a.jsx)(d,{block:e,className:r},s);case"image":return(0,a.jsx)(x,{block:e,className:r},s);case"two-images":return(0,a.jsx)(m,{block:e,className:r},s);case"video-circle":return(0,a.jsx)(g,{block:e,className:r},s);case"video":return(0,a.jsx)(v,{block:e,className:r},s);case"audio-message":return(0,a.jsx)(b,{block:e,className:r},s);case"music":return(0,a.jsx)(k,{block:e,className:r},s);case"gallery":return(0,a.jsx)(C,{block:e,className:r},s);default:return null}},i=r?.author||e.metadata?.senderName,n=r?.nickname?r.nickname:void 0,p=e.metadata?.description||"С днем рождения!";return(0,a.jsxs)("div",{className:`space-y-20 ${s}`,children:[i&&(0,a.jsx)(c,{name:i,nickname:n,text:p,className:"mb-16"}),e.blocks.map((e,t)=>l(e,t))]})}var z=s(56208),R=s(16189);let S=`
  .dice-container {
    display: grid;
    place-items: center;
    width: 400px;
    padding: 60px 0 40px;
  }
  
  .dice {
    position: relative;
    width: 100px;
    height: 100px;
    transform-style: preserve-3d;
    transition: 1s ease;
  }
  
  /* Больший размер кубика для главной страницы */
  .main-dice-container .dice-container {
    width: 500px;
    padding: 80px 0 60px;
  }
  
  .main-dice-container .dice {
    width: 200px;
    height: 200px;
  }
  
  /* Увеличиваем смещение граней для большего кубика */
  .main-dice-container .front {
    transform: translateZ(100px);
  }
  
  .main-dice-container .back {
    transform: rotateX(180deg) translateZ(100px);
  }
  
  .main-dice-container .top {
    transform: rotateX(90deg) translateZ(100px);
  }
  
  .main-dice-container .bottom {
    transform: rotateX(-90deg) translateZ(100px);
  }
  
  .main-dice-container .right {
    transform: rotateY(90deg) translateZ(100px);
  }
  
  .main-dice-container .left {
    transform: rotateY(-90deg) translateZ(100px);
  }
  
  /* Стилизация граней для главной страницы */
  .main-dice-container .face {
    border-radius: 30px;
    border-width: 8px;
  }
  
  .main-dice-container .face::before {
    border-radius: 30px;
  }
  
  @keyframes rolling {
    50% {
      transform: rotateX(1080deg) rotateY(720deg);
    }
  }
  
  .face {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 20px;
    border: 5px solid #f6f3f0;
    transform-style: preserve-3d;
    background: linear-gradient(145deg, #dddbd8, #fff);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .face::before {
    position: absolute;
    content: '';
    width: 100%;
    height: 100%;
    border-radius: 20px;
    background: #f6f3f0;
    transform: translateZ(-1px);
  }
  
  .face img {
    width: 60%;
    height: 60%;
    object-fit: contain;
    z-index: 10;
  }
  
  .front {
    transform: translateZ(50px);
  }
  
  .back {
    transform: rotateX(180deg) translateZ(50px);
  }
  
  .top {
    transform: rotateX(90deg) translateZ(50px);
  }
  
  .bottom {
    transform: rotateX(-90deg) translateZ(50px);
  }
  
  .right {
    transform: rotateY(90deg) translateZ(50px);
  }
  
  .left {
    transform: rotateY(-90deg) translateZ(50px);
  }
  
  .roll-button {
    cursor: pointer;
    color: #b33951;
    margin-top: 60px;
    padding: 6px 12px;
    border-radius: 3px;
    font-weight: 700;
    font-size: 16px;
    border: 2px solid #b33951;
    transition: .4s;
  }
  
  .roll-button:hover {
    color: #fff;
    background: #b33951;
  }
  
  .roll-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,T=({onRollComplete:e,visible:t=!0,isAutoRolling:s=!1})=>{let[r,l]=(0,p.useState)(!1),i=(0,p.useRef)(null);(0,p.useEffect)(()=>{s&&!r&&n()},[s]);let n=()=>{if(r)return;l(!0);let t=Math.floor(6*Math.random())+1;i.current&&(i.current.style.animation="rolling 6s cubic-bezier(0.165, 0.84, 0.44, 1)",setTimeout(()=>{if(i.current){switch(t){case 1:i.current.style.transform="rotateX(0deg) rotateY(0deg)";break;case 6:i.current.style.transform="rotateX(180deg) rotateY(0deg)";break;case 2:i.current.style.transform="rotateX(-90deg) rotateY(0deg)";break;case 5:i.current.style.transform="rotateX(90deg) rotateY(0deg)";break;case 3:i.current.style.transform="rotateX(0deg) rotateY(90deg)";break;case 4:i.current.style.transform="rotateX(0deg) rotateY(-90deg)"}i.current.style.animation="none",setTimeout(()=>{l(!1),e&&e(t)},500)}},6050))};return t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{children:S}),(0,a.jsx)("div",{className:"dice-container",children:(0,a.jsxs)("div",{className:"dice",ref:i,children:[(0,a.jsx)("div",{className:"face front",children:(0,a.jsx)("img",{src:"/1.svg",alt:"1"})}),(0,a.jsx)("div",{className:"face back",children:(0,a.jsx)("img",{src:"/6.svg",alt:"6"})}),(0,a.jsx)("div",{className:"face top",children:(0,a.jsx)("img",{src:"/2.svg",alt:"2"})}),(0,a.jsx)("div",{className:"face bottom",children:(0,a.jsx)("img",{src:"/5.svg",alt:"5"})}),(0,a.jsx)("div",{className:"face right",children:(0,a.jsx)("img",{src:"/3.svg",alt:"3"})}),(0,a.jsx)("div",{className:"face left",children:(0,a.jsx)("img",{src:"/4.svg",alt:"4"})})]})})]}):null},E=`
  .dice-page-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
    background-color: white;
  }
  
  .dice-wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 40;
    padding: 100px;
  }
  
  /* Больший размер кубика для страницы подарка */
  .dice-wrapper .dice-container {
    width: 500px;
    padding: 80px 0 60px;
  }
  
  .dice-wrapper .dice {
    width: 200px;
    height: 200px;
  }
  
  /* Увеличиваем смещение граней для большего кубика */
  .dice-wrapper .front {
    transform: translateZ(100px);
  }
  
  .dice-wrapper .back {
    transform: rotateX(180deg) translateZ(100px);
  }
  
  .dice-wrapper .top {
    transform: rotateX(90deg) translateZ(100px);
  }
  
  .dice-wrapper .bottom {
    transform: rotateX(-90deg) translateZ(100px);
  }
  
  .dice-wrapper .right {
    transform: rotateY(90deg) translateZ(100px);
  }
  
  .dice-wrapper .left {
    transform: rotateY(-90deg) translateZ(100px);
  }
  
  /* Стилизация граней для страницы подарка */
  .dice-wrapper .face {
    border-radius: 30px;
    border-width: 8px;
  }
  
  .dice-wrapper .face::before {
    border-radius: 30px;
  }
`,M=({onComplete:e,giftId:t})=>{let[s,r]=(0,p.useState)(!1),[l,i]=(0,p.useState)(!t),n=(0,p.useRef)(null);(0,p.useEffect)(()=>{t&&(async()=>{try{let e=await fetch(`/api/gifts/${t}`),s=await fetch(`/api/gift-content/${t}`);e.ok&&s.ok&&(console.log("Gift data and content preloaded successfully"),i(!0))}catch(e){console.error("Error preloading gift data:",e),i(!0)}})()},[t]),(0,p.useEffect)(()=>{n.current&&z.Ay.fromTo(n.current,{y:window.innerHeight/2+200,opacity:0,scale:.3},{y:0,opacity:1,scale:1,duration:1.2,ease:"power1.out",onComplete:()=>{setTimeout(()=>{r(!0)},100)}})},[]);let c=()=>{setTimeout(()=>{n.current&&z.Ay.to(n.current,{y:100,opacity:0,scale:.5,duration:.5,ease:"power3.in",onComplete:()=>{e()}})},800)};return(0,a.jsxs)("div",{className:"dice-page-container",children:[(0,a.jsx)("style",{children:E}),(0,a.jsx)("div",{ref:n,className:"dice-wrapper",children:(0,a.jsx)(T,{onRollComplete:e=>{if(console.log("Dice roll result:",e),r(!1),l)c();else{let e=setInterval(()=>{l&&(clearInterval(e),c())},100);setTimeout(()=>{clearInterval(e),c()},1e3)}},isAutoRolling:s})})]})};var P=s(25718),F=s(40565),q=s(98468);function I(){let e=function(e){let[t,s]=(0,p.useState)(!1);return t}(0),t=(0,R.useParams)().id,s="home"===(0,R.useSearchParams)().get("from"),{data:r,isLoading:c,error:o,refetch:d}=(0,P.sw)(t),{isAuthenticated:x,isLoading:m}=(0,F.A)();(0,p.useRef)(x);let[u,h]=(0,p.useState)(s),[f,g]=(0,p.useState)(!s),j=(0,p.useRef)(null),v=(0,p.useRef)(null),b=(0,p.useRef)(null),w=(0,p.useRef)(null),N=(0,p.useRef)(null),y=(0,p.useRef)(null),k=(0,p.useRef)(null),C=(0,p.useRef)(null),z=(0,p.useRef)(null),S=(0,p.useRef)(null),T=(0,p.useRef)(null),E=(0,p.useRef)(null),I=(0,p.useRef)(null);if(o)return(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"font-founders text-title-h2",children:"ERROR"}),(0,a.jsx)("p",{className:"mt-4 font-styrene text-paragraph-md font-bold uppercase",children:"Couldn't upload gift data"}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(i.b,{asChild:!0,children:(0,a.jsx)(l(),{href:"/",children:"Go Home"})})})]})});if(c||m||!r)return(0,a.jsx)(q.l,{});let{gift:L,content:O}=r;if(!L)return(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"font-founders text-title-h2",children:"ERROR"}),(0,a.jsx)("p",{className:"mt-4 font-styrene text-paragraph-md font-bold uppercase",children:"Couldn't upload gift data"}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(i.b,{asChild:!0,children:(0,a.jsx)(l(),{href:"/",children:"Go Home"})})})]})});let G=r.memoryPhoto;return(0,a.jsxs)("div",{className:"relative bg-bg-white-0",children:[u&&(0,a.jsx)(M,{onComplete:()=>{h(!1),g(!0)}}),f&&(0,a.jsxs)("main",{ref:j,className:"relative min-h-screen bg-bg-white-0 opacity-0",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 py-24 text-center font-founders",children:[(0,a.jsxs)("h1",{ref:v,className:"text-title-h4",children:["YOUR GIFT ",(0,a.jsx)("br",{})," OF THE DAY"]}),(0,a.jsxs)("div",{ref:b,className:"text-title-h5",children:["(",L.number,")"]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 px-4",children:[(0,a.jsxs)("div",{ref:w,className:"mx-auto max-w-xs text-center font-nyghtserif text-label-md italic sm:max-w-md md:max-w-lg md:text-label-lg",children:["“",L.englishDescription,"”"]}),(0,a.jsxs)("div",{className:"mx-auto flex w-full max-w-[280px] flex-col items-center gap-3 sm:max-w-[320px] sm:gap-4",children:[(0,a.jsx)("div",{ref:N,className:"aspect-square w-full overflow-hidden rounded-2xl",children:(0,a.jsx)("img",{src:L.hintImageUrl,alt:L.hintText||"Gift hint image",className:"h-full w-full object-cover"})}),(0,a.jsx)("p",{ref:y,className:"text-center font-styrene text-paragraph-sm font-bold uppercase md:text-paragraph-md md:font-bold",children:L.hintText})]})]}),L.code&&x&&(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3 px-4 pt-24 text-center sm:gap-4 sm:pt-20 md:pt-24",children:[(0,a.jsx)("p",{ref:k,className:"mx-auto max-w-[300px] font-styrene text-paragraph-sm font-bold uppercase sm:max-w-[380px] md:max-w-[440px] md:text-paragraph-md md:font-bold lg:font-bold",children:L.codeText}),(0,a.jsx)("div",{ref:C,className:"font-founders text-title-h4 uppercase",children:L.code})]}),L.code&&!x&&(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3 px-4 pt-16 text-center sm:gap-5 sm:pt-20 md:pt-24",children:[(0,a.jsx)("p",{ref:k,className:"mx-auto max-w-[300px] font-styrene text-paragraph-sm font-bold uppercase sm:max-w-[380px] md:max-w-[440px] md:text-paragraph-md md:font-bold lg:font-bold",children:L.codeText}),(0,a.jsx)("div",{ref:C,className:"select-none bg-bg-strong-950 px-4 font-founders text-title-h4 uppercase text-bg-strong-950",children:"SECRET CODE"})]}),(0,a.jsx)("span",{ref:z,className:"mb-6 mt-16 flex items-center justify-center font-nyghtserif text-label-lg text-adaptive sm:text-label-xl md:mb-20 md:mt-20",children:"***"}),(0,a.jsx)("div",{ref:S,className:"dark-container bg-bg-strong-950 px-4 py-12 text-adaptive sm:px-6 sm:py-14 md:py-16",children:(0,a.jsx)("div",{className:"mx-auto max-w-sm sm:max-w-2xl md:max-w-3xl lg:max-w-4xl",children:L.isSecret&&!x?(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"mx-auto max-w-[290px] font-founders text-title-h4 uppercase text-adaptive md:max-w-[460px] md:text-title-h3",children:"Oops, only Lesya sees this content"})}):O&&(0,a.jsx)($,{content:O,memoryPhoto:G,className:"max-w-none",gift:L})})}),(0,a.jsxs)("div",{className:"dark-container flex flex-col items-center gap-6 bg-bg-strong-950 px-4 pb-16 pt-12 text-center text-adaptive sm:gap-8 sm:pb-20 sm:pt-16 md:gap-10 md:pb-28 md:pt-20",children:[(0,a.jsx)("span",{className:"font-nyghtserif text-adaptive sm:text-label-lg md:text-label-xl",children:"***"}),(0,a.jsxs)("h2",{ref:T,className:"font-founders text-title-h4 text-adaptive",children:["THE MEMORY ",(0,a.jsx)("br",{})," IS UNLOCKED"]}),G&&(0,a.jsx)("div",{ref:E,className:"mx-auto flex w-full items-center justify-center",children:(0,a.jsx)(l(),{href:"/gallery",className:"flex items-center justify-center transition-all",children:(0,a.jsx)(n.v,{memoryPhoto:G,isRevealed:!0,openDate:L.openDate,size:e?"small":"medium"})})}),(0,a.jsx)("div",{ref:I,className:"mt-2 sm:mt-4",children:(0,a.jsx)(l(),{href:"/gallery",children:(0,a.jsx)(i.b,{children:"to the gallery"})})})]}),(0,a.jsx)("div",{className:"h-16 bg-bg-strong-950"})]})]})}},93513:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>o});var a=s(65239),r=s(48088),l=s(88170),i=s.n(l),n=s(30893),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let o={children:["",{children:["gift",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,53475)),"C:\\repositories\\lesya.svet\\src\\app\\gift\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,55524)),"C:\\repositories\\lesya.svet\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,54413)),"C:\\repositories\\lesya.svet\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["C:\\repositories\\lesya.svet\\src\\app\\gift\\[id]\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/gift/[id]/page",pathname:"/gift/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,724,244,740,474,839,237],()=>s(93513));module.exports=a})();